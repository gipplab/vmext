!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.cytoscape=a()}}(function(){var define,module,exports;return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){},{}],2:[function(a,b,c){"use strict";var d=a("./util"),e=a("./is"),f=a("./promise"),g=function(a,b,c){if(!(this instanceof g))return new g(a,b,c);var f=this._private=d.extend({duration:1e3},b,c);f.target=a,f.style=f.style||f.css,f.started=!1,f.playing=!1,f.hooked=!1,f.applying=!1,f.progress=0,f.completes=[],f.frames=[],f.complete&&e.fn(f.complete)&&f.completes.push(f.complete),this.length=1,this[0]=this},h=g.prototype;d.extend(h,{instanceString:function(){return"animation"},hook:function(){var a=this._private;if(!a.hooked){var b,c=a.target._private.animation;b=a.queue?c.queue:c.current,b.push(this),e.elementOrCollection(a.target)&&a.target.cy().addToAnimationPool(a.target),a.hooked=!0}return this},play:function(){var a=this._private;return 1===a.progress&&(a.progress=0),a.playing=!0,a.started=!1,a.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var a=this._private;return a.applying=!0,a.started=!1,a.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var a=this._private;return a.playing=!1,a.started=!1,this},stop:function(){var a=this._private;return a.playing=!1,a.started=!1,a.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(a){var b=this._private;return void 0===a?b.progress*b.duration:this.progress(a/b.duration)},progress:function(a){var b=this._private,c=b.playing;return void 0===a?b.progress:(c&&this.pause(),b.progress=a,b.started=!1,c&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var a=this._private,b=a.playing;b&&this.pause(),a.progress=1-a.progress,a.started=!1;var c=function(b,c){var d=a[b];a[b]=a[c],a[c]=d};c("zoom","startZoom"),c("pan","startPan"),c("position","startPosition");for(var d=0;d<a.style.length;d++){var e=a.style[d],f=e.name,g=a.startStyle[f];a.startStyle[f]=e,a.style[d]=g}return b&&this.play(),this},promise:function(a){var b,c=this._private;switch(a){case"frame":b=c.frames;break;default:case"complete":case"completed":b=c.completes}return new f(function(a,c){b.push(function(){a()})})}}),h.complete=h.completed,b.exports=g},{"./is":83,"./promise":86,"./util":100}],3:[function(a,b,c){"use strict";var d=a("../../is"),e={aStar:function(a){var b=this;a=a||{};var c=function(a,b,d,e){if(a==b)return e.push(f.getElementById(b)),e;if(b in d){var g=d[b],h=o[b];return e.push(f.getElementById(b)),e.push(f.getElementById(h)),c(a,g,d,e)}},e=function(a,b){if(0!==a.length){for(var c=0,d=b[a[0]],e=1;e<a.length;e++){var f=b[a[e]];d>f&&(d=f,c=e)}return c}},f=this._private.cy;if(null!=a&&null!=a.root){var g=d.string(a.root)?this.filter(a.root)[0]:a.root[0];if(null!=a.goal){var h=d.string(a.goal)?this.filter(a.goal)[0]:a.goal[0];if(null!=a.heuristic&&d.fn(a.heuristic))var i=a.heuristic;else var i=function(){return 0};if(null!=a.weight&&d.fn(a.weight))var j=a.weight;else var j=function(a){return 1};if(null!=a.directed)var k=a.directed;else var k=!1;var l=[],m=[g.id()],n={},o={},p={},q={};p[g.id()]=0,q[g.id()]=i(g);for(var r=this.edges().stdFilter(function(a){return!a.isLoop()}),s=this.nodes(),t=0;m.length>0;){var u=e(m,q),v=f.getElementById(m[u]);if(t++,v.id()==h.id()){var w=c(g.id(),h.id(),n,[]);return w.reverse(),{found:!0,distance:p[v.id()],path:b.spawn(w),steps:t}}l.push(v.id()),m.splice(u,1);var x=v.connectedEdges();k&&(x=x.stdFilter(function(a){return a.data("source")===v.id()})),x=x.intersect(r);for(var y=0;y<x.length;y++){var z=x[y],A=z.connectedNodes().stdFilter(function(a){return a.id()!==v.id()}).intersect(s);if(-1==l.indexOf(A.id())){var B=p[v.id()]+j.apply(z,[z]);-1!=m.indexOf(A.id())?B<p[A.id()]&&(p[A.id()]=B,q[A.id()]=B+i(A),n[A.id()]=v.id()):(p[A.id()]=B,q[A.id()]=B+i(A),m.push(A.id()),n[A.id()]=v.id(),o[A.id()]=z.id())}}}return{found:!1,distance:void 0,path:void 0,steps:t}}}}};b.exports=e},{"../../is":83}],4:[function(a,b,c){"use strict";var d=a("../../is"),e=a("../../util"),f={bellmanFord:function(a){var b=this;if(a=a||{},null!=a.weight&&d.fn(a.weight))var c=a.weight;else var c=function(a){return 1};if(null!=a.directed)var f=a.directed;else var f=!1;if(null!=a.root){if(d.string(a.root))var g=this.filter(a.root)[0];else var g=a.root[0];for(var h=this._private.cy,i=this.edges().stdFilter(function(a){return!a.isLoop()}),j=this.nodes(),k=j.length,l={},m=0;k>m;m++)l[j[m].id()]=m;for(var n=[],o=[],p=[],m=0;k>m;m++)j[m].id()===g.id()?n[m]=0:n[m]=1/0,o[m]=void 0;for(var q=!1,m=1;k>m;m++){q=!1;for(var r=0;r<i.length;r++){var s=l[i[r].source().id()],t=l[i[r].target().id()],u=c.apply(i[r],[i[r]]),v=n[s]+u;if(v<n[t]&&(n[t]=v,o[t]=s,p[t]=i[r],q=!0),!f){var v=n[t]+u;v<n[s]&&(n[s]=v,o[s]=t,p[s]=i[r],q=!0)}}if(!q)break}if(q)for(var r=0;r<i.length;r++){var s=l[i[r].source().id()],t=l[i[r].target().id()],u=c.apply(i[r],[i[r]]);if(n[s]+u<n[t])return e.error("Graph contains a negative weight cycle for Bellman-Ford"),{pathTo:void 0,distanceTo:void 0,hasNegativeWeightCycle:!0}}for(var w=[],m=0;k>m;m++)w.push(j[m].id());var x={distanceTo:function(a){if(d.string(a))var b=h.filter(a)[0].id();else var b=a.id();return n[l[b]]},pathTo:function(a){var c=function(a,b,c,d,e,f){for(;;){if(e.push(h.getElementById(d[c])),e.push(f[c]),b===c)return e;var g=a[c];if("undefined"==typeof g)return;c=g}};if(d.string(a))var e=h.filter(a)[0].id();else var e=a.id();var f=[],i=c(o,l[g.id()],l[e],w,f,p);return null!=i&&i.reverse(),b.spawn(i)},hasNegativeWeightCycle:!1};return x}}};b.exports=f},{"../../is":83,"../../util":100}],5:[function(a,b,c){"use strict";var d=a("../../is"),e=a("../../heap"),f={betweennessCentrality:function(a){a=a||{};var b,c;d.fn(a.weight)?(c=a.weight,b=!0):b=!1;for(var f=null!=a.directed&&a.directed,g=this._private.cy,h=this.nodes(),i={},j={},k=0,l={set:function(a,b){j[a]=b,b>k&&(k=b)},get:function(a){return j[a]}},m=0;m<h.length;m++){var n=h[m],o=n.id();f?i[o]=n.outgoers().nodes():i[o]=n.openNeighborhood().nodes(),l.set(o,0)}for(var p=0;p<h.length;p++){for(var q=h[p].id(),r=[],s={},t={},u={},v=new e(function(a,b){return u[a]-u[b]}),m=0;m<h.length;m++){var o=h[m].id();s[o]=[],t[o]=0,u[o]=1/0}for(t[q]=1,u[q]=0,v.push(q);!v.empty();){var n=v.pop();if(r.push(n),b)for(var w=0;w<i[n].length;w++){var x,y=i[n][w],z=g.getElementById(n);x=z.edgesTo(y).length>0?z.edgesTo(y)[0]:y.edgesTo(z)[0];var A=c.apply(x,[x]);y=y.id(),u[y]>u[n]+A&&(u[y]=u[n]+A,v.nodes.indexOf(y)<0?v.push(y):v.updateItem(y),t[y]=0,s[y]=[]),u[y]==u[n]+A&&(t[y]=t[y]+t[n],s[y].push(n))}else for(var w=0;w<i[n].length;w++){var y=i[n][w].id();u[y]==1/0&&(v.push(y),u[y]=u[n]+1),u[y]==u[n]+1&&(t[y]=t[y]+t[n],s[y].push(n))}}for(var B={},m=0;m<h.length;m++)B[h[m].id()]=0;for(;r.length>0;)for(var y=r.pop(),w=0;w<s[y].length;w++){var n=s[y][w];B[n]=B[n]+t[n]/t[y]*(1+B[y]),y!=h[p].id()&&l.set(y,l.get(y)+B[y])}}var C={betweenness:function(a){if(d.string(a))var a=g.filter(a).id();else var a=a.id();return l.get(a)},betweennessNormalized:function(a){if(0==k)return 0;if(d.string(a))var a=g.filter(a).id();else var a=a.id();return l.get(a)/k}};return C.betweennessNormalised=C.betweennessNormalized,C}};f.bc=f.betweennessCentrality,b.exports=f},{"../../heap":81,"../../is":83}],6:[function(a,b,c){"use strict";var d=a("../../is"),e=function(a){return a={bfs:a.bfs||!a.dfs,dfs:a.dfs||!a.bfs},function(b,c,e){var f,g,h;d.plainObject(b)&&!d.elementOrCollection(b)&&(f=b,b=f.roots||f.root,c=f.visit,e=f.directed,g=f.std,h=f.thisArg),e=2!==arguments.length||d.fn(c)?e:c,c=d.fn(c)?c:function(){};for(var i,j=this._private.cy,k=b=d.string(b)?this.filter(b):b,l=[],m=[],n={},o={},p={},q=0,r=this.nodes(),s=this.edges(),t=0;t<k.length;t++)k[t].isNode()&&(l.unshift(k[t]),a.bfs&&(p[k[t].id()]=!0,m.push(k[t])),o[k[t].id()]=0);for(;0!==l.length;){var k=a.bfs?l.shift():l.pop();if(a.dfs){if(p[k.id()])continue;p[k.id()]=!0,m.push(k)}var u,v=o[k.id()],w=n[k.id()],x=null==w?void 0:w.connectedNodes().not(k)[0];if(u=g?c.call(h,k,w,x,q++,v):c.call(k,q++,v,k,w,x),u===!0){i=k;break}if(u===!1)break;for(var y=k.connectedEdges(e?function(){return this.data("source")===k.id()}:void 0).intersect(s),t=0;t<y.length;t++){var z=y[t],A=z.connectedNodes(function(){return this.id()!==k.id()}).intersect(r);0===A.length||p[A.id()]||(A=A[0],l.push(A),a.bfs&&(p[A.id()]=!0,m.push(A)),n[A.id()]=z,o[A.id()]=o[k.id()]+1)}}for(var B=[],t=0;t<m.length;t++){var C=m[t],D=n[C.id()];D&&B.push(D),B.push(C)}return{path:j.collection(B,{unique:!0}),found:j.collection(i)}}},f={breadthFirstSearch:e({bfs:!0}),depthFirstSearch:e({dfs:!0})};f.bfs=f.breadthFirstSearch,f.dfs=f.depthFirstSearch,b.exports=f},{"../../is":83}],7:[function(a,b,c){"use strict";var d=a("../../is"),e={closenessCentralityNormalized:function(a){a=a||{};var b=this.cy(),c=a.harmonic;void 0===c&&(c=!0);for(var e={},f=0,g=this.nodes(),h=this.floydWarshall({weight:a.weight,directed:a.directed}),i=0;i<g.length;i++){for(var j=0,k=0;k<g.length;k++)if(i!=k){var l=h.distance(g[i],g[k]);j+=c?1/l:l}c||(j=1/j),j>f&&(f=j),e[g[i].id()]=j}return{closeness:function(a){if(0==f)return 0;if(d.string(a))var a=b.filter(a)[0].id();else var a=a.id();return e[a]/f}}},closenessCentrality:function(a){if(a=a||{},null!=a.root){if(d.string(a.root))var b=this.filter(a.root)[0];else var b=a.root[0];if(null!=a.weight&&d.fn(a.weight))var c=a.weight;else var c=function(){return 1};if(null!=a.directed&&d.bool(a.directed))var e=a.directed;else var e=!1;var f=a.harmonic;void 0===f&&(f=!0);for(var g=this.dijkstra({root:b,weight:c,directed:e}),h=0,i=this.nodes(),j=0;j<i.length;j++)if(i[j].id()!=b.id()){var k=g.distanceTo(i[j]);h+=f?1/k:k}return f?h:1/h}}};e.cc=e.closenessCentrality,e.ccn=e.closenessCentralityNormalised=e.closenessCentralityNormalized,b.exports=e},{"../../is":83}],8:[function(a,b,c){"use strict";var d=a("../../is"),e=a("../../util"),f={degreeCentralityNormalized:function(a){a=a||{};var b=this.cy();if(null!=a.directed)var c=a.directed;else var c=!1;var f=this.nodes(),g=f.length;if(c){for(var h={},i={},j=0,k=0,l=0;g>l;l++){var m=f[l],n=this.degreeCentrality(e.extend({},a,{root:m}));j<n.indegree&&(j=n.indegree),k<n.outdegree&&(k=n.outdegree),h[m.id()]=n.indegree,i[m.id()]=n.outdegree}return{indegree:function(a){if(0==j)return 0;if(d.string(a))var a=b.filter(a)[0].id();else var a=a.id();return h[a]/j},outdegree:function(a){if(0==k)return 0;if(d.string(a))var a=b.filter(a)[0].id();else var a=a.id();return i[a]/k}}}for(var o={},p=0,l=0;g>l;l++){var m=f[l],n=this.degreeCentrality(e.extend({},a,{root:m}));p<n.degree&&(p=n.degree),o[m.id()]=n.degree}return{degree:function(a){if(0==p)return 0;if(d.string(a))var a=b.filter(a)[0].id();else var a=a.id();return o[a]/p}}},degreeCentrality:function(a){a=a||{};var b=this;if(null!=a&&null!=a.root){var c=d.string(a.root)?this.filter(a.root)[0]:a.root[0];if(null!=a.weight&&d.fn(a.weight))var e=a.weight;else var e=function(a){return 1};if(null!=a.directed)var f=a.directed;else var f=!1;if(null!=a.alpha&&d.number(a.alpha))var g=a.alpha;else g=0;if(f){for(var h=c.connectedEdges('edge[target = "'+c.id()+'"]').intersection(b),i=c.connectedEdges('edge[source = "'+c.id()+'"]').intersection(b),j=h.length,k=i.length,l=0,m=0,n=0;n<h.length;n++){var o=h[n];l+=e.apply(o,[o])}for(var n=0;n<i.length;n++){var o=i[n];m+=e.apply(o,[o])}return{indegree:Math.pow(j,1-g)*Math.pow(l,g),outdegree:Math.pow(k,1-g)*Math.pow(m,g)}}for(var p=c.connectedEdges().intersection(b),q=p.length,r=0,n=0;n<p.length;n++){var o=p[n];r+=e.apply(o,[o])}return{degree:Math.pow(q,1-g)*Math.pow(r,g)}}}};f.dc=f.degreeCentrality,f.dcn=f.degreeCentralityNormalised=f.degreeCentralityNormalized,b.exports=f},{"../../is":83,"../../util":100}],9:[function(a,b,c){"use strict";var d=a("../../is"),e=a("../../heap"),f={dijkstra:function(a,b,c){var f;d.plainObject(a)&&!d.elementOrCollection(a)&&(f=a,a=f.root,b=f.weight,c=f.directed);var g=this._private.cy;b=d.fn(b)?b:function(){return 1};for(var h=d.string(a)?this.filter(a)[0]:a[0],i={},j={},k={},l=this.edges().filter(function(){return!this.isLoop()}),m=this.nodes(),n=function(a){return i[a.id()]},o=function(a,b){i[a.id()]=b,p.updateItem(a)},p=new e(function(a,b){return n(a)-n(b)}),q=0;q<m.length;q++){var r=m[q];i[r.id()]=r.same(h)?0:1/0,p.push(r)}for(var s=function(a,d){for(var e,f=(c?a.edgesTo(d):a.edgesWith(d)).intersect(l),g=1/0,h=0;h<f.length;h++){var i=f[h],j=b.apply(i,[i]);(g>j||!e)&&(g=j,e=i)}return{edge:e,dist:g}};p.size()>0;){var t=p.pop(),u=n(t),v=t.id();if(k[v]=u,u===Math.Infinite)break;for(var w=t.neighborhood().intersect(m),q=0;q<w.length;q++){var x=w[q],y=x.id(),z=s(t,x),A=u+z.dist;A<n(x)&&(o(x,A),j[y]={node:t,edge:z.edge})}}return{distanceTo:function(a){var b=d.string(a)?m.filter(a)[0]:a[0];return k[b.id()]},pathTo:function(a){var b=d.string(a)?m.filter(a)[0]:a[0],c=[],e=b;if(b.length>0)for(c.unshift(b);j[e.id()];){var f=j[e.id()];c.unshift(f.edge),c.unshift(f.node),e=f.node}return g.collection(c)}}}};b.exports=f},{"../../heap":81,"../../is":83}],10:[function(a,b,c){"use strict";var d=a("../../is"),e={floydWarshall:function(a){a=a||{};var b=this.cy();if(null!=a.weight&&d.fn(a.weight))var c=a.weight;else var c=function(a){return 1};if(null!=a.directed)var e=a.directed;else var e=!1;for(var f=this.edges().stdFilter(function(a){return!a.isLoop()}),g=this.nodes(),h=g.length,i={},j=0;h>j;j++)i[g[j].id()]=j;for(var k=[],j=0;h>j;j++){for(var l=new Array(h),m=0;h>m;m++)j==m?l[m]=0:l[m]=1/0;k.push(l)}var n=[],o=[],p=function(a){for(var b=0;h>b;b++){for(var c=new Array(h),d=0;h>d;d++)c[d]=void 0;a.push(c)}};p(n),p(o);for(var j=0;j<f.length;j++){var q=i[f[j].source().id()],r=i[f[j].target().id()],s=c.apply(f[j],[f[j]]);k[q][r]>s&&(k[q][r]=s,n[q][r]=r,o[q][r]=f[j])}if(!e)for(var j=0;j<f.length;j++){var q=i[f[j].target().id()],r=i[f[j].source().id()],s=c.apply(f[j],[f[j]]);k[q][r]>s&&(k[q][r]=s,n[q][r]=r,o[q][r]=f[j])}for(var t=0;h>t;t++)for(var j=0;h>j;j++)for(var m=0;h>m;m++)k[j][t]+k[t][m]<k[j][m]&&(k[j][m]=k[j][t]+k[t][m],n[j][m]=n[j][t]);for(var u=[],j=0;h>j;j++)u.push(g[j].id());var v={distance:function(a,c){if(d.string(a))var e=b.filter(a)[0].id();else var e=a.id();if(d.string(c))var f=b.filter(c)[0].id();else var f=c.id();return k[i[e]][i[f]]},path:function(a,c){var e=function(a,c,d,e,f){if(a===c)return b.getElementById(e[a]);if(void 0!==d[a][c]){for(var g=[b.getElementById(e[a])],h=a;a!==c;){h=a,a=d[a][c];var i=f[h][a];g.push(i),g.push(b.getElementById(e[a]))}return g}};if(d.string(a))var f=b.filter(a)[0].id();else var f=a.id();if(d.string(c))var g=b.filter(c)[0].id();else var g=c.id();var h=e(i[f],i[g],n,u,o);return b.collection(h)}};return v}};b.exports=e},{"../../is":83}],11:[function(a,b,c){"use strict";var d=a("../../util"),e={};[a("./bfs-dfs"),a("./dijkstra"),a("./kruskal"),a("./a-star"),a("./floyd-warshall"),a("./bellman-ford"),a("./kerger-stein"),a("./page-rank"),a("./degree-centrality"),a("./closeness-centrality"),a("./betweenness-centrality")].forEach(function(a){d.extend(e,a)}),b.exports=e},{"../../util":100,"./a-star":3,"./bellman-ford":4,"./betweenness-centrality":5,"./bfs-dfs":6,"./closeness-centrality":7,"./degree-centrality":8,"./dijkstra":9,"./floyd-warshall":10,"./kerger-stein":12,"./kruskal":13,"./page-rank":14}],12:[function(a,b,c){"use strict";var d=a("../../util"),e={kargerStein:function(a){var b=this;a=a||{};var c=function(a,b,c){for(var d=c[a],e=d[1],f=d[2],g=b[e],h=b[f],i=c.filter(function(a){return(b[a[1]]!==g||b[a[2]]!==h)&&(b[a[1]]!==h||b[a[2]]!==g)}),j=0;j<i.length;j++){var k=i[j];k[1]===h?(i[j]=k.slice(0),i[j][1]=g):k[2]===h&&(i[j]=k.slice(0),i[j][2]=g)}for(var j=0;j<b.length;j++)b[j]===h&&(b[j]=g);return i},e=function(a,b,d,f){if(f>=d)return b;var g=Math.floor(Math.random()*b.length),h=c(g,a,b);return e(a,h,d-1,f)},f=this._private.cy,g=this.edges().stdFilter(function(a){return!a.isLoop()}),h=this.nodes(),i=h.length,j=g.length,k=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2)),l=Math.floor(i/Math.sqrt(2));if(2>i)return void d.error("At least 2 nodes are required for Karger-Stein algorithm");for(var m={},n=0;i>n;n++)m[h[n].id()]=n;for(var o=[],n=0;j>n;n++){var p=g[n];o.push([n,m[p.source().id()],m[p.target().id()]])}for(var q,r=1/0,s=[],n=0;i>n;n++)s.push(n);for(var t=0;k>=t;t++){var u=s.slice(0),v=e(u,o,i,l),w=u.slice(0),x=e(u,v,l,2),y=e(w,v,l,2);x.length<=y.length&&x.length<r?(r=x.length,q=[x,u]):y.length<=x.length&&y.length<r&&(r=y.length,q=[y,w])}for(var z=q[0].map(function(a){return g[a[0]]}),A=[],B=[],C=q[1][0],n=0;n<q[1].length;n++){var D=q[1][n];D===C?A.push(h[n]):B.push(h[n])}var E={cut:b.spawn(f,z),partition1:b.spawn(A),partition2:b.spawn(B)};return E}};b.exports=e},{"../../util":100}],13:[function(a,b,c){"use strict";var d=a("../../is"),e={kruskal:function(a){function b(a){for(var b=0;b<f.length;b++){var c=f[b];if(c.anySame(a))return{eles:c,index:b}}}var c=this.cy();a=d.fn(a)?a:function(){return 1};for(var e=c.collection(c,[]),f=[],g=this.nodes(),h=0;h<g.length;h++)f.push(g[h].collection());for(var i=this.edges(),j=i.toArray().sort(function(b,c){var d=a.call(b,b),e=a.call(c,c);return d-e}),h=0;h<j.length;h++){var k=j[h],l=k.source()[0],m=k.target()[0],n=b(l),o=b(m);n.index!==o.index&&(e=e.add(k),f[n.index]=n.eles.add(o.eles),f.splice(o.index,1))}return g.add(e)}};b.exports=e},{"../../is":83}],14:[function(a,b,c){"use strict";var d=a("../../is"),e={pageRank:function(a){a=a||{};var b=function(a){for(var b=a.length,c=0,d=0;b>d;d++)c+=a[d];for(var d=0;b>d;d++)a[d]=a[d]/c};if(null!=a&&null!=a.dampingFactor)var c=a.dampingFactor;else var c=.8;if(null!=a&&null!=a.precision)var e=a.precision;else var e=1e-6;if(null!=a&&null!=a.iterations)var f=a.iterations;else var f=200;if(null!=a&&null!=a.weight&&d.fn(a.weight))var g=a.weight;else var g=function(a){return 1};for(var h=this._private.cy,i=this.edges().stdFilter(function(a){return!a.isLoop()}),j=this.nodes(),k=j.length,l=i.length,m={},n=0;k>n;n++)m[j[n].id()]=n;for(var o=[],p=[],q=(1-c)/k,n=0;k>n;n++){for(var r=[],s=0;k>s;s++)r.push(0);o.push(r),p.push(0)}for(var n=0;l>n;n++){var t=i[n],u=m[t.source().id()],v=m[t.target().id()],w=g.apply(t,[t]);o[v][u]+=w,p[u]+=w}for(var x=1/k+q,s=0;k>s;s++)if(0===p[s])for(var n=0;k>n;n++)o[n][s]=x;else for(var n=0;k>n;n++)o[n][s]=o[n][s]/p[s]+q;for(var y,z=[],A=[],n=0;k>n;n++)z.push(1),A.push(0);for(var B=0;f>B;B++){for(var C=A.slice(0),n=0;k>n;n++)for(var s=0;k>s;s++)C[n]+=o[n][s]*z[s];b(C),y=z,z=C;for(var D=0,n=0;k>n;n++)D+=Math.pow(y[n]-z[n],2);if(e>D)break}var E={rank:function(a){if(d.string(a))var b=h.filter(a)[0].id();else var b=a.id();return z[m[b]]}};return E}};b.exports=e},{"../../is":83}],15:[function(a,b,c){"use strict";var d=a("../define"),e={animate:d.animate(),animation:d.animation(),animated:d.animated(),clearQueue:d.clearQueue(),delay:d.delay(),delayAnimation:d.delayAnimation(),stop:d.stop()};b.exports=e},{"../define":44}],16:[function(a,b,c){"use strict";var d=a("../util"),e={classes:function(a){a=(a||"").match(/\S+/g)||[];for(var b=this,c=[],e={},f=0;f<a.length;f++){var g=a[f];e[g]=!0}for(var h=0;h<b.length;h++){for(var i=b[h],j=i._private,k=j.classes,l=!1,f=0;f<a.length;f++){var g=a[f],m=k[g];if(!m){l=!0;break}}if(!l)for(var a=Object.keys(k),f=0;f<a.length;f++){var n=a[f],m=k[n],o=e[n];if(m&&!o){l=!0;break}}l&&(j.classes=d.copy(e),c.push(i))}return c.length>0&&this.spawn(c).updateStyle().trigger("class"),b},addClass:function(a){return this.toggleClass(a,!0)},hasClass:function(a){var b=this[0];return!(null==b||!b._private.classes[a])},toggleClass:function(a,b){for(var c=a.match(/\S+/g)||[],d=this,e=[],f=0,g=d.length;g>f;f++)for(var h=d[f],i=!1,j=0;j<c.length;j++){var k=c[j],l=h._private.classes,m=l[k],n=b||void 0===b&&!m;n?(l[k]=!0,m||i||(e.push(h),i=!0)):(l[k]=!1,m&&!i&&(e.push(h),i=!0))}return e.length>0&&this.spawn(e).updateStyle().trigger("class"),d},removeClass:function(a){return this.toggleClass(a,!1)},flashClass:function(a,b){var c=this;if(null==b)b=250;else if(0===b)return c;return c.addClass(a),setTimeout(function(){c.removeClass(a)},b),c}};b.exports=e},{"../util":100}],17:[function(a,b,c){"use strict";var d={allAre:function(a){return this.filter(a).length===this.length},is:function(a){return this.filter(a).length>0},some:function(a,b){for(var c=0;c<this.length;c++){var d=b?a.apply(b,[this[c],c,this]):a(this[c],c,this);if(d)return!0}return!1},every:function(a,b){for(var c=0;c<this.length;c++){var d=b?a.apply(b,[this[c],c,this]):a(this[c],c,this);if(!d)return!1}return!0},same:function(a){return a=this.cy().collection(a),this.length===a.length&&this.intersect(a).length===this.length},anySame:function(a){return a=this.cy().collection(a),this.intersect(a).length>0},allAreNeighbors:function(a){return a=this.cy().collection(a),this.neighborhood().intersect(a).length===a.length}};d.allAreNeighbours=d.allAreNeighbors,b.exports=d},{}],18:[function(a,b,c){"use strict";var d={parent:function(a){for(var b=[],c=this._private.cy,d=0;d<this.length;d++){var e=this[d],f=c.getElementById(e._private.data.parent);f.size()>0&&b.push(f)}return this.spawn(b,{unique:!0}).filter(a)},parents:function(a){for(var b=[],c=this.parent();c.nonempty();){for(var d=0;d<c.length;d++){var e=c[d];b.push(e)}c=c.parent()}return this.spawn(b,{unique:!0}).filter(a)},commonAncestors:function(a){for(var b,c=0;c<this.length;c++){var d=this[c],e=d.parents();b=b||e,b=b.intersect(e)}return b.filter(a)},orphans:function(a){return this.stdFilter(function(a){return a.isNode()&&a.parent().empty()}).filter(a)},nonorphans:function(a){return this.stdFilter(function(a){return a.isNode()&&a.parent().nonempty()}).filter(a)},children:function(a){for(var b=[],c=0;c<this.length;c++){var d=this[c];b=b.concat(d._private.children)}return this.spawn(b,{unique:!0}).filter(a)},siblings:function(a){return this.parent().children().not(this).filter(a)},isParent:function(){var a=this[0];return a?0!==a._private.children.length:void 0},isChild:function(){var a=this[0];return a?void 0!==a._private.data.parent&&0!==a.parent().length:void 0},descendants:function(a){function b(a){for(var d=0;d<a.length;d++){var e=a[d];c.push(e),e.children().nonempty()&&b(e.children())}}var c=[];return b(this.children()),this.spawn(c,{unique:!0}).filter(a)}};d.ancestors=d.parents,b.exports=d},{}],19:[function(a,b,c){"use strict";var d,e,f=a("../define");d=e={data:f.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:f.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:f.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:f.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:f.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:f.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var a=this[0];return a?a._private.data.id:void 0}},d.attr=d.data,d.removeAttr=d.removeData,b.exports=e},{"../define":44}],20:[function(a,b,c){"use strict";function d(a){return function(b){var c=this;if(void 0===b&&(b=!0),0!==c.length&&c.isNode()&&!c.removed()){for(var d=0,e=c[0],f=e._private.edges,g=0;g<f.length;g++){var h=f[g];!b&&h.isLoop()||(d+=a(e,h))}return d}}}function e(a,b){return function(c){for(var d,e=this.nodes(),f=0;f<e.length;f++){var g=e[f],h=g[a](c);void 0===h||void 0!==d&&!b(h,d)||(d=h)}return d}}var f=a("../util"),g={};f.extend(g,{degree:d(function(a,b){return b.source().same(b.target())?2:1}),indegree:d(function(a,b){return b.target().same(a)?1:0}),outdegree:d(function(a,b){return b.source().same(a)?1:0})}),f.extend(g,{minDegree:e("degree",function(a,b){return b>a}),maxDegree:e("degree",function(a,b){return a>b}),minIndegree:e("indegree",function(a,b){return b>a}),maxIndegree:e("indegree",function(a,b){return a>b}),minOutdegree:e("outdegree",function(a,b){return b>a}),maxOutdegree:e("outdegree",function(a,b){return a>b})}),f.extend(g,{totalDegree:function(a){for(var b=0,c=this.nodes(),d=0;d<c.length;d++)b+=c[d].degree(a);return b}}),b.exports=g},{"../util":100}],21:[function(a,b,c){"use strict";var d,e,f=a("../define"),g=a("../is"),h=a("../util"),i=a("../math");d=e={position:f.data({field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"rtrigger",allowGetting:!0,validKeys:["x","y"],onSet:function(a){var b=a.updateCompoundBounds();b.rtrigger("position")},canSet:function(a){return!a.locked()&&!a.isParent()}}),silentPosition:f.data({field:"position",bindingEvent:"position",allowBinding:!1,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!1,triggerFnName:"trigger",allowGetting:!0,validKeys:["x","y"],onSet:function(a){a.updateCompoundBounds()},canSet:function(a){return!a.locked()&&!a.isParent()}}),positions:function(a,b){if(g.plainObject(a))this.position(a);else if(g.fn(a)){for(var c=a,d=0;d<this.length;d++){var e=this[d],a=c.apply(e,[d,e]);if(a&&!e.locked()&&!e.isParent()){var f=e._private.position;f.x=a.x,f.y=a.y}}var h=this.updateCompoundBounds(),i=h.length>0?this.add(h):this;b?i.trigger("position"):i.rtrigger("position")}return this},silentPositions:function(a){return this.positions(a,!0)},renderedPosition:function(a,b){var c=this[0],d=this.cy(),e=d.zoom(),f=d.pan(),h=g.plainObject(a)?a:void 0,i=void 0!==h||void 0!==b&&g.string(a);if(c&&c.isNode()){if(!i){var j=c._private.position;return h={x:j.x*e+f.x,y:j.y*e+f.y},void 0===a?h:h[a]}for(var k=0;k<this.length;k++){var c=this[k];void 0!==b?c._private.position[a]=(b-f[a])/e:void 0!==h&&(c._private.position={x:(h.x-f.x)/e,y:(h.y-f.y)/e})}this.rtrigger("position")}else if(!i)return;return this},relativePosition:function(a,b){var c=this[0],d=this.cy(),e=g.plainObject(a)?a:void 0,f=void 0!==e||void 0!==b&&g.string(a),h=d.hasCompoundNodes();if(c&&c.isNode()){if(!f){var i=c._private.position,j=h?c.parent():null,k=j&&j.length>0,l=k;k&&(j=j[0]);var m=l?j._private.position:{x:0,y:0};return e={x:i.x-m.x,y:i.y-m.y},void 0===a?e:e[a]}for(var n=0;n<this.length;n++){var c=this[n],j=h?c.parent():null,k=j&&j.length>0,l=k;k&&(j=j[0]);var m=l?j._private.position:{x:0,y:0};void 0!==b?c._private.position[a]=b+m[a]:void 0!==e&&(c._private.position={x:e.x+m.x,y:e.y+m.y})}this.rtrigger("position")}else if(!f)return;return this},renderedBoundingBox:function(a){var b=this.boundingBox(a),c=this.cy(),d=c.zoom(),e=c.pan(),f=b.x1*d+e.x,g=b.x2*d+e.x,h=b.y1*d+e.y,i=b.y2*d+e.y;return{x1:f,x2:g,y1:h,y2:i,w:g-f,h:i-h}},updateCompoundBounds:function(){function a(a){if(a.isParent()){var b=a._private,d=a.children(),e="include"===a.pstyle("compound-sizing-wrt-labels").value,f=d.boundingBox({includeLabels:e,includeShadows:!1,includeOverlays:!1,useCache:!1}),g=b.position;b.autoWidth=f.w,g.x=(f.x1+f.x2)/2,b.autoHeight=f.h,g.y=(f.y1+f.y2)/2,c.push(a)}}var b=this.cy();if(!b.styleEnabled()||!b.hasCompoundNodes())return b.collection();for(var c=[],d=this;d.nonempty();){for(var e=0;e<d.length;e++){var f=d[e];a(f)}d=d.parent()}return this.spawn(c)}};var j=function(a){return a===1/0||a===-(1/0)?0:a},k=function(a,b,c,d,e){d-b!==0&&e-c!==0&&(a.x1=b<a.x1?b:a.x1,a.x2=d>a.x2?d:a.x2,a.y1=c<a.y1?c:a.y1,a.y2=e>a.y2?e:a.y2)},l=function(a,b){return k(a,b.x1,b.y1,b.x2,b.y2)},m=function(a,b,c){return h.getPrefixedProperty(a,b,c)},n=function(a,b,c,d){var e,f,g=b._private,h=g.rstyle,i=h.arrowWidth/2,j=b.pstyle(c+"-arrow-shape").value;"none"!==j&&("source"===c?(e=h.srcX,f=h.srcY):"target"===c?(e=h.tgtX,f=h.tgtY):(e=h.midX,f=h.midY),k(a,e-i,f-i,e+i,f+i))},o=function(a,b,c,d){var e;e=c?c+"-":"";var f=b._private,g=f.rstyle,h=b.pstyle(e+"label").strValue;if(h){var i,j,l,n,o=b.pstyle("text-halign"),p=b.pstyle("text-valign"),q=m(g,"labelWidth",c),r=m(g,"labelHeight",c),s=m(g,"labelX",c),t=m(g,"labelY",c),u=b.pstyle(e+"text-margin-x").pfValue,v=b.pstyle(e+"text-margin-y").pfValue,w=b.isEdge(),x=b.pstyle(e+"text-rotation"),y=b.pstyle("text-shadow-blur").pfValue/2,z=b.pstyle("text-shadow-offset-x").pfValue,A=b.pstyle("text-shadow-offset-y").pfValue,B=b.pstyle("text-shadow-opacity").value,C=b.pstyle("text-outline-width").pfValue,D=b.pstyle("text-border-width").pfValue,E=D/2,F=r,G=q,H=G/2,I=F/2;if(w)i=s-H,j=s+H,l=t-I,n=t+I;else{switch(o.value){case"left":i=s-G,j=s;break;case"center":i=s-H,j=s+H;break;case"right":i=s,j=s+G}switch(p.value){case"top":l=t-F,n=t;break;case"center":l=t-I,n=t+I;break;case"bottom":l=t,n=t+F}}var J=w&&"autorotate"===x.strValue,K=null!=x.pfValue&&0!==x.pfValue;if(J||K){var L=J?m(f.rstyle,"labelAngle",c):x.pfValue,M=Math.cos(L),N=Math.sin(L),O=function(a,b){return a-=s,b-=t,{x:a*M-b*N+s,y:a*N+b*M+t}},P=O(i,l),Q=O(i,n),R=O(j,l),S=O(j,n);i=Math.min(P.x,Q.x,R.x,S.x),j=Math.max(P.x,Q.x,R.x,S.x),l=Math.min(P.y,Q.y,R.y,S.y),n=Math.max(P.y,Q.y,R.y,S.y)}i+=u-Math.max(C,E),j+=u+Math.max(C,E),l+=v-Math.max(C,E),n+=v+Math.max(C,E),k(a,i,l,j,n),d.includeShadows&&B>0&&(i+=-y+z,j+=+y+z,l+=-y+A,n+=+y+A,k(a,i,l,j,n))}return a},p=function(a,b){var c,d,e,f,g,h,l=a._private.cy,m=l._private,p=m.styleEnabled,q={x1:1/0,y1:1/0,x2:-(1/0),y2:-(1/0)},r=a._private,s=p?a.pstyle("display").value:"element",t=a.isNode(),u=a.isEdge(),v="none"!==s;if(v){var w=0,x=0;p&&b.includeOverlays&&(w=a.pstyle("overlay-opacity").value,0!==w&&(x=a.pstyle("overlay-padding").value));var y=0,z=0;if(p&&(y=a.pstyle("width").pfValue,z=y/2),t&&b.includeNodes){var A=r.position;g=A.x,h=A.y;var y=a.outerWidth(),B=y/2,C=a.outerHeight(),D=C/2;c=g-B-x,d=g+B+x,e=h-D-x,f=h+D+x,k(q,c,e,d,f)}else if(u&&b.includeEdges){var E=r.rstyle||{};if(p&&(c=Math.min(E.srcX,E.midX,E.tgtX),d=Math.max(E.srcX,E.midX,E.tgtX),e=Math.min(E.srcY,E.midY,E.tgtY),f=Math.max(E.srcY,E.midY,E.tgtY),c-=z,d+=z,e-=z,f+=z,k(q,c,e,d,f)),p&&"haystack"===a.pstyle("curve-style").strValue){var F=E.haystackPts;if(c=F[0].x,e=F[0].y,d=F[1].x,f=F[1].y,c>d){var G=c;c=d,d=G}if(e>f){var G=e;e=f,f=G}k(q,c-z,e-z,d+z,f+z)}else{for(var H=E.bezierPts||E.linePts||[],I=0;I<H.length;I++){var J=H[I];c=J.x-z,d=J.x+z,e=J.y-z,f=J.y+z,k(q,c,e,d,f)}if(0===H.length){var K=r.source,L=K._private,M=L.position,N=r.target,O=N._private,P=O.position;if(c=M.x,d=P.x,e=M.y,f=P.y,c>d){var G=c;c=d,d=G}if(e>f){var G=e;e=f,f=G}c-=z,d+=z,e-=z,f+=z,k(q,c,e,d,f)}}}if(p){if(c=q.x1,d=q.x2,e=q.y1,f=q.y2,b.includeShadows&&a.pstyle("shadow-opacity").value>0){var Q=a.pstyle("shadow-blur").pfValue/2,R=a.pstyle("shadow-offset-x").pfValue,S=a.pstyle("shadow-offset-y").pfValue;k(q,c-Q+R,e-Q+S,d+Q+R,f+Q+S)}k(q,c-x,e-x,d+x,f+x)}p&&b.includeEdges&&u&&(n(q,a,"mid-source",b),n(q,a,"mid-target",b),n(q,a,"source",b),n(q,a,"target",b)),p&&b.includeLabels&&(o(q,a,null,b),u&&(o(q,a,"source",b),o(q,a,"target",b)))}return q.x1=j(q.x1),q.y1=j(q.y1),q.x2=j(q.x2),q.y2=j(q.y2),q.w=j(q.x2-q.x1),q.h=j(q.y2-q.y1),q.w>0&&q.h>0&&v&&i.expandBoundingBox(q,1),q},q=function(a){return a?"t":"f"},r=function(a){var b="";return b+=q(a.incudeNodes),b+=q(a.includeEdges),b+=q(a.includeLabels),b+=q(a.includeShadows),b+=q(a.includeOverlays)},s=function(a,b){var c,d=a._private,e=a.cy().headless(),f=b===t?u:r(b);return b.useCache&&!e&&d.bbCache&&d.bbCache[f]?c=d.bbCache[f]:(c=p(a,b),e||(d.bbCache=d.bbCache||{},d.bbCache[f]=c)),c},t={includeNodes:!0,includeEdges:!0,
includeLabels:!0,includeShadows:!0,includeOverlays:!0,useCache:!0},u=r(t);e.recalculateRenderedStyle=function(a){var b=this.cy(),c=b.renderer(),d=b.styleEnabled();return c&&d&&c.recalculateRenderedStyle(this,a),this},e.boundingBox=function(a){if(1===this.length&&this[0]._private.bbCache&&(void 0===a||void 0===a.useCache||a.useCache===!0))return void 0===a&&(a=t),s(this[0],a);var b={x1:1/0,y1:1/0,x2:-(1/0),y2:-(1/0)};a=a||h.staticEmptyObject();var c={includeNodes:h.default(a.includeNodes,t.includeNodes),includeEdges:h.default(a.includeEdges,t.includeEdges),includeLabels:h.default(a.includeLabels,t.includeLabels),includeShadows:h.default(a.includeShadows,t.includeShadows),includeOverlays:h.default(a.includeOverlays,t.includeOverlays),useCache:h.default(a.useCache,t.useCache)},d=this,e=d.cy(),f=e.styleEnabled();f&&this.recalculateRenderedStyle(c.useCache);for(var g=0;g<d.length;g++){var i=d[g];f&&i.isEdge()&&"bezier"===i.pstyle("curve-style").strValue&&i.parallelEdges().recalculateRenderedStyle(c.useCache),l(b,s(i,c))}return b.x1=j(b.x1),b.y1=j(b.y1),b.x2=j(b.x2),b.y2=j(b.y2),b.w=j(b.x2-b.x1),b.h=j(b.y2-b.y1),b};var v=function(a){a.uppercaseName=h.capitalize(a.name),a.autoName="auto"+a.uppercaseName,a.labelName="label"+a.uppercaseName,a.outerName="outer"+a.uppercaseName,a.uppercaseOuterName=h.capitalize(a.outerName),d[a.name]=function(){var b=this[0],c=b._private,d=c.cy,e=d._private.styleEnabled;if(b){if(!e)return 1;if(b.isParent())return c[a.autoName]||0;var f=b.pstyle(a.name);switch(f.strValue){case"label":return c.rstyle[a.labelName]||0;default:return f.pfValue}}},d["outer"+a.uppercaseName]=function(){var b=this[0],c=b._private,d=c.cy,e=d._private.styleEnabled;if(b){if(e){var f=b[a.name](),g=b.pstyle("border-width").pfValue,h=2*b.pstyle("padding").pfValue;return f+g+h}return 1}},d["rendered"+a.uppercaseName]=function(){var b=this[0];if(b){var c=b[a.name]();return c*this.cy().zoom()}},d["rendered"+a.uppercaseOuterName]=function(){var b=this[0];if(b){var c=b[a.outerName]();return c*this.cy().zoom()}}};v({name:"width"}),v({name:"height"}),d.modelPosition=d.point=d.position,d.modelPositions=d.points=d.positions,d.renderedPoint=d.renderedPosition,d.relativePoint=d.relativePosition,d.boundingbox=d.boundingBox,d.renderedBoundingbox=d.renderedBoundingBox,b.exports=e},{"../define":44,"../is":83,"../math":85,"../util":100}],22:[function(a,b,c){"use strict";var d=a("../util"),e=a("../is"),f=function(a,b,c){var f=this;if(c=!(void 0!==c&&!c),void 0===a||void 0===b||!e.core(a))return void d.error("An element must have a core reference and parameters set");var g=b.group;if(null==g&&(g=b.data&&null!=b.data.source&&null!=b.data.target?"edges":"nodes"),"nodes"!==g&&"edges"!==g)return void d.error("An element must be of type `nodes` or `edges`; you specified `"+g+"`");if(this.length=1,this[0]=this,this._private={cy:a,single:!0,data:b.data||{},position:b.position||{},autoWidth:void 0,autoHeight:void 0,listeners:[],group:g,style:{},rstyle:{},styleCxts:[],removed:!0,selected:!!b.selected,selectable:void 0===b.selectable||!!b.selectable,locked:!!b.locked,grabbed:!1,grabbable:void 0===b.grabbable||!!b.grabbable,active:!1,classes:{},animation:{current:[],queue:[]},rscratch:{},scratch:b.scratch||{},edges:[],children:[],traversalCache:{}},b.renderedPosition){var h=b.renderedPosition,i=a.pan(),j=a.zoom();this._private.position={x:(h.x-i.x)/j,y:(h.y-i.y)/j}}if(e.string(b.classes))for(var k=b.classes.split(/\s+/),l=0,m=k.length;m>l;l++){var n=k[l];n&&""!==n&&(f._private.classes[n]=!0)}(b.style||b.css)&&a.style().applyBypass(this,b.style||b.css),(void 0===c||c)&&this.restore()};b.exports=f},{"../is":83,"../util":100}],23:[function(a,b,c){"use strict";var d=a("../define"),e={on:d.on(),one:d.on({unbindSelfOnTrigger:!0}),once:d.on({unbindAllBindersOnTrigger:!0}),off:d.off(),trigger:d.trigger(),rtrigger:function(a,b){return 0!==this.length?(this.cy().notify({type:a,eles:this}),this.trigger(a,b),this):void 0}};d.eventAliasesOn(e),b.exports=e},{"../define":44}],24:[function(a,b,c){"use strict";var d=a("../is"),e=a("../selector"),f={nodes:function(a){return this.filter(function(a,b){return b.isNode()}).filter(a)},edges:function(a){return this.filter(function(a,b){return b.isEdge()}).filter(a)},filter:function(a){if(void 0===a)return this;if(d.string(a)||d.elementOrCollection(a))return e(a).filter(this);if(d.fn(a)){for(var b=[],c=0;c<this.length;c++){var f=this[c];a.apply(f,[c,f])&&b.push(f)}return this.spawn(b)}return this.spawn()},not:function(a){if(a){d.string(a)&&(a=this.filter(a));for(var b=[],c=0;c<this.length;c++){var e=this[c],f=a._private.ids[e.id()];f||b.push(e)}return this.spawn(b)}return this},absoluteComplement:function(){var a=this._private.cy;return a.mutableElements().not(this)},intersect:function(a){if(d.string(a)){var b=a;return this.filter(b)}for(var c=[],e=this,f=a,g=this.length<a.length,h=g?f._private.ids:e._private.ids,i=g?e:f,j=0;j<i.length;j++){var k=i[j]._private.data.id,l=h[k];l&&c.push(l)}return this.spawn(c)},xor:function(a){var b=this._private.cy;d.string(a)&&(a=b.$(a));var c=[],e=this,f=a,g=function(a,b){for(var d=0;d<a.length;d++){var e=a[d],f=e._private.data.id,g=b._private.ids[f];g||c.push(e)}};return g(e,f),g(f,e),this.spawn(c)},diff:function(a){var b=this._private.cy;d.string(a)&&(a=b.$(a));var c=[],e=[],f=[],g=this,h=a,i=function(a,b,c){for(var d=0;d<a.length;d++){var e=a[d],g=e._private.data.id,h=b._private.ids[g];h?f.push(e):c.push(e)}};return i(g,h,c),i(h,g,e),{left:this.spawn(c,{unique:!0}),right:this.spawn(e,{unique:!0}),both:this.spawn(f,{unique:!0})}},add:function(a){var b=this._private.cy;if(!a)return this;if(d.string(a)){var c=a;a=b.mutableElements().filter(c)}for(var e=[],f=0;f<this.length;f++)e.push(this[f]);for(var f=0;f<a.length;f++){var g=!this._private.ids[a[f].id()];g&&e.push(a[f])}return this.spawn(e)},merge:function(a){var b=this._private,c=b.cy;if(!a)return this;if(a&&d.string(a)){var e=a;a=c.mutableElements().filter(e)}for(var f=0;f<a.length;f++){var g=a[f],h=g._private.data.id,i=!b.ids[h];if(i){var j=this.length++;this[j]=g,b.ids[h]=g,b.indexes[h]=j}else{var j=b.indexes[h];this[j]=g,b.ids[h]=g}}return this},unmergeOne:function(a){a=a[0];var b=this._private,c=a._private.data.id,d=b.indexes[c];if(null==d)return this;this[d]=void 0,b.ids[c]=void 0,b.indexes[c]=void 0;var e=d===this.length-1;if(this.length>1&&!e){var f=this.length-1,g=this[f],h=g._private.data.id;this[f]=void 0,this[d]=g,b.indexes[h]=d}return this.length--,this},unmerge:function(a){var b=this._private.cy;if(!a)return this;if(a&&d.string(a)){var c=a;a=b.mutableElements().filter(c)}for(var e=0;e<a.length;e++)this.unmergeOne(a[e]);return this},map:function(a,b){for(var c=[],d=this,e=0;e<d.length;e++){var f=d[e],g=b?a.apply(b,[f,e,d]):a(f,e,d);c.push(g)}return c},stdFilter:function(a,b){for(var c=[],d=this,e=0;e<d.length;e++){var f=d[e],g=b?a.apply(b,[f,e,d]):a(f,e,d);g&&c.push(f)}return this.spawn(c)},max:function(a,b){for(var c,d=-(1/0),e=this,f=0;f<e.length;f++){var g=e[f],h=b?a.apply(b,[g,f,e]):a(g,f,e);h>d&&(d=h,c=g)}return{value:d,ele:c}},min:function(a,b){for(var c,d=1/0,e=this,f=0;f<e.length;f++){var g=e[f],h=b?a.apply(b,[g,f,e]):a(g,f,e);d>h&&(d=h,c=g)}return{value:d,ele:c}}},g=f;g.u=g["|"]=g["+"]=g.union=g.or=g.add,g["\\"]=g["!"]=g["-"]=g.difference=g.relativeComplement=g.subtract=g.not,g.n=g["&"]=g["."]=g.and=g.intersection=g.intersect,g["^"]=g["(+)"]=g["(-)"]=g.symmetricDifference=g.symdiff=g.xor,g.fnFilter=g.filterFn=g.stdFilter,g.complement=g.abscomp=g.absoluteComplement,b.exports=f},{"../is":83,"../selector":87}],25:[function(a,b,c){"use strict";var d={isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source().id()===this.target().id()},isSimple:function(){return this.isEdge()&&this.source().id()!==this.target().id()},group:function(){var a=this[0];return a?a._private.group:void 0}};b.exports=d},{}],26:[function(a,b,c){"use strict";var d=a("../util"),e=a("../is"),f=a("./element"),g={generate:function(a,b,c){for(var e=null!=c?c:d.uuid();a.hasElementWithId(e);)e=d.uuid();return e}},h=function(a,b,c){if(void 0===a||!e.core(a))return void d.error("A collection must have a reference to the core");var h={},i={},j=!1;if(b){if(b.length>0&&e.plainObject(b[0])&&!e.element(b[0])){j=!0;for(var k=[],l={},m=0,n=b.length;n>m;m++){var o=b[m];null==o.data&&(o.data={});var p=o.data;if(null==p.id)p.id=g.generate(a,o);else if(a.hasElementWithId(p.id)||l[p.id])continue;var q=new f(a,o,!1);k.push(q),l[p.id]=!0}b=k}}else b=[];this.length=0;for(var m=0,n=b.length;n>m;m++){var r=b[m];if(r){var s=r._private.data.id;(!c||c.unique&&!h[s])&&(h[s]=r,i[s]=this.length,this[this.length]=r,this.length++)}}this._private={cy:a,ids:h,indexes:i},j&&this.restore()},i=f.prototype=h.prototype;i.instanceString=function(){return"collection"},i.spawn=function(a,b,c){return e.core(a)||(c=b,b=a,a=this.cy()),new h(a,b,c)},i.spawnSelf=function(){return this.spawn(this)},i.cy=function(){return this._private.cy},i.element=function(){return this[0]},i.collection=function(){return e.collection(this)?this:new h(this._private.cy,[this])},i.unique=function(){return new h(this._private.cy,this,{unique:!0})},i.hasElementWithId=function(a){return!!this._private.ids[a]},i.getElementById=function(a){var b=this._private.cy,c=this._private.ids[a];return c?c:new h(b)},i.poolIndex=function(){var a=this._private.cy,b=a._private.elements,c=this._private.data.id;return b._private.indexes[c]},i.json=function(a){var b=this.element(),c=this.cy();if(null==b&&a)return this;if(null!=b){var f=b._private;if(e.plainObject(a)){c.startBatch(),a.data&&b.data(a.data),a.position&&b.position(a.position);var g=function(c,d,e){var g=a[c];null!=g&&g!==f[c]&&(g?b[d]():b[e]())};return g("removed","remove","restore"),g("selected","select","unselect"),g("selectable","selectify","unselectify"),g("locked","lock","unlock"),g("grabbable","grabify","ungrabify"),null!=a.classes&&b.classes(a.classes),c.endBatch(),this}if(void 0===a){var h={data:d.copy(f.data),position:d.copy(f.position),group:f.group,removed:f.removed,selected:f.selected,selectable:f.selectable,locked:f.locked,grabbable:f.grabbable,classes:null};return h.classes=Object.keys(f.classes).filter(function(a){return f.classes[a]}).join(" "),h}}},i.jsons=function(){for(var a=[],b=0;b<this.length;b++){var c=this[b],d=c.json();a.push(d)}return a},i.clone=function(){for(var a=this.cy(),b=[],c=0;c<this.length;c++){var d=this[c],e=d.json(),g=new f(a,e,!1);b.push(g)}return new h(a,b)},i.copy=i.clone,i.restore=function(a){var b=this,c=b.cy(),f=c._private;void 0===a&&(a=!0);for(var i,j=[],k=[],l=0,m=b.length;m>l;l++){var n=b[l];n.removed()&&(n.isNode()?j.push(n):k.push(n))}i=j.concat(k);var l,o=function(){i.splice(l,1),l--};for(l=0;l<i.length;l++){var n=i[l],p=n._private,q=p.data;if(p.traversalCache=null,void 0===q.id)q.id=g.generate(c,n);else if(e.number(q.id))q.id=""+q.id;else{if(e.emptyString(q.id)||!e.string(q.id)){d.error("Can not create element with invalid string ID `"+q.id+"`"),o();continue}if(c.hasElementWithId(q.id)){d.error("Can not create second element with ID `"+q.id+"`"),o();continue}}var r=q.id;if(n.isNode()){var s=n,t=p.position;null==t.x&&(t.x=0),null==t.y&&(t.y=0)}if(n.isEdge()){for(var u=n,v=["source","target"],w=v.length,x=!1,y=0;w>y;y++){var z=v[y],A=q[z];e.number(A)&&(A=q[z]=""+q[z]),null==A||""===A?(d.error("Can not create edge `"+r+"` with unspecified "+z),x=!0):c.hasElementWithId(A)||(d.error("Can not create edge `"+r+"` with nonexistant "+z+" `"+A+"`"),x=!0)}if(x){o();continue}var B=c.getElementById(q.source),C=c.getElementById(q.target);B._private.edges.push(u),C._private.edges.push(u),u._private.source=B,u._private.target=C}p.ids={},p.ids[r]=n,p.indexes={},p.indexes[r]=n,p.removed=!1,c.addToPool(n)}for(var l=0;l<j.length;l++){var s=j[l],q=s._private.data;e.number(q.parent)&&(q.parent=""+q.parent);var D=q.parent,E=null!=D;if(E){var F=c.getElementById(D);if(F.empty())q.parent=void 0;else{for(var G=!1,H=F;!H.empty();){if(s.same(H)){G=!0,q.parent=void 0;break}H=H.parent()}G||(F[0]._private.children.push(s),s._private.parent=F[0],f.hasCompoundNodes=!0)}}}if(i.length>0){for(var I=new h(c,i),l=0;l<I.length;l++){var n=I[l];if(!n.isNode()){for(var J=n.parallelEdges(),y=0;y<J.length;y++)J[y]._private.traversalCache=null;n.source()[0]._private.traversalCache=null,n.target()[0]._private.traversalCache=null}}var K;K=f.hasCompoundNodes?I.add(I.connectedNodes()).add(I.parent()):I,K.updateStyle(a),a?I.rtrigger("add"):I.trigger("add")}return b},i.removed=function(){var a=this[0];return a&&a._private.removed},i.inside=function(){var a=this[0];return a&&!a._private.removed},i.remove=function(a){function b(a){for(var b=a._private.edges,c=0;c<b.length;c++)e(b[c])}function c(a){for(var b=a._private.children,c=0;c<b.length;c++)e(b[c])}function e(a){var d=m[a.id()];d||(m[a.id()]=!0,a.isNode()?(l.push(a),b(a),c(a)):l.unshift(a))}function f(a,b){var c=a._private.edges;d.removeFromArray(c,b),a._private.traversalCache=null}function g(a){for(var b=a.parallelEdges(),c=0;c<b.length;c++)b[c]._private.traversalCache=null}function i(a,b){b=b[0],a=a[0];var c=a._private.children,e=a.id();d.removeFromArray(c,b),r.ids[e]||(r.ids[e]=!0,r.push(a))}var j=this,k=[],l=[],m={},n=j._private.cy;void 0===a&&(a=!0);for(var o=0,p=j.length;p>o;o++){var q=j[o];e(q)}var r=[];r.ids={},n.removeFromPool(l);for(var o=0;o<l.length;o++){var q=l[o];if(q._private.removed=!0,k.push(q),q.isEdge()){var s=q.source()[0],t=q.target()[0];f(s,q),f(t,q),g(q)}else{var u=q.parent();0!==u.length&&i(u,q)}}var v=n._private.elements;n._private.hasCompoundNodes=!1;for(var o=0;o<v.length;o++){var q=v[o];if(q.isParent()){n._private.hasCompoundNodes=!0;break}}var w=new h(this.cy(),k);w.size()>0&&(a&&this.cy().notify({type:"remove",eles:w}),w.trigger("remove"));for(var o=0;o<r.length;o++){var q=r[o];q.removed()||q.updateStyle()}return new h(n,k)},i.move=function(a){var b=this._private.cy;if(void 0!==a.source||void 0!==a.target){var c=a.source,d=a.target,e=b.hasElementWithId(c),f=b.hasElementWithId(d);if(e||f){var g=this.jsons();this.remove();for(var h=0;h<g.length;h++){var i=g[h],j=this[h];"edges"===i.group&&(e&&(i.data.source=c),f&&(i.data.target=d),i.scratch=j._private.scratch)}return b.add(g)}}else if(void 0!==a.parent){var k=a.parent,l=null===k||b.hasElementWithId(k);if(l){var g=this.jsons(),m=this.descendants(),n=m.union(m.union(this).connectedEdges()).jsons();this.remove();for(var h=0;h<g.length;h++){var i=g[h],j=this[h];"nodes"===i.group&&(i.data.parent=null===k?void 0:k,i.scratch=j._private.scratch)}return b.add(g.concat(n))}}return this},[a("./algorithms"),a("./animation"),a("./class"),a("./comparators"),a("./compounds"),a("./data"),a("./degree"),a("./dimensions"),a("./events"),a("./filter"),a("./group"),a("./index"),a("./iteration"),a("./layout"),a("./style"),a("./switch-functions"),a("./traversing")].forEach(function(a){d.extend(i,a)}),b.exports=h},{"../is":83,"../util":100,"./algorithms":11,"./animation":15,"./class":16,"./comparators":17,"./compounds":18,"./data":19,"./degree":20,"./dimensions":21,"./element":22,"./events":23,"./filter":24,"./group":25,"./index":26,"./iteration":27,"./layout":28,"./style":29,"./switch-functions":30,"./traversing":31}],27:[function(a,b,c){"use strict";var d=a("../is"),e=a("./zsort"),f={each:function(a){if(d.fn(a))for(var b=0;b<this.length;b++){var c=this[b],e=a.apply(c,[b,c]);if(e===!1)break}return this},forEach:function(a,b){if(d.fn(a))for(var c=0;c<this.length;c++){var e=this[c],f=b?a.apply(b,[e,c,this]):a(e,c,this);if(f===!1)break}return this},toArray:function(){for(var a=[],b=0;b<this.length;b++)a.push(this[b]);return a},slice:function(a,b){var c=[],d=this.length;null==b&&(b=d),null==a&&(a=0),0>a&&(a=d+a),0>b&&(b=d+b);for(var e=a;e>=0&&b>e&&d>e;e++)c.push(this[e]);return this.spawn(c)},size:function(){return this.length},eq:function(a){return this[a]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(a){if(!d.fn(a))return this;var b=this.toArray().sort(a);return this.spawn(b)},sortByZIndex:function(){return this.sort(e)},zDepth:function(){var a=this[0];if(a){var b=a._private,c=b.group;if("nodes"===c){var d=b.data.parent?a.parents().size():0;return a.isParent()?d:Number.MAX_VALUE}var e=b.source,f=b.target,g=e.zDepth(),h=f.zDepth();return Math.max(g,h,0)}}};b.exports=f},{"../is":83,"./zsort":32}],28:[function(a,b,c){"use strict";var d=a("../is"),e=a("../util"),f=a("../promise"),g={layoutPositions:function(a,b,c){var e=this.nodes(),g=this.cy();if(a.trigger({type:"layoutstart",layout:a}),a.animations=[],b.animate){for(var h=0;h<e.length;h++){var i=e[h],j=c.call(i,h,i),k=i.position();d.number(k.x)&&d.number(k.y)||i.silentPosition({x:0,y:0});var l=i.animation({position:j,duration:b.animationDuration,easing:b.animationEasing});a.animations.push(l),l.play()}var m;g.on("step.*",m=function(){b.fit&&g.fit(b.eles,b.padding)}),a.one("layoutstop",function(){g.off("step.*",m)}),a.one("layoutready",b.ready),a.trigger({type:"layoutready",layout:a}),f.all(a.animations.map(function(a){return a.promise()})).then(function(){g.off("step.*",m),null!=b.zoom&&g.zoom(b.zoom),b.pan&&g.pan(b.pan),b.fit&&g.fit(b.eles,b.padding),a.one("layoutstop",b.stop),a.trigger({type:"layoutstop",layout:a})})}else e.positions(c),b.fit&&g.fit(b.eles,b.padding),null!=b.zoom&&g.zoom(b.zoom),b.pan&&g.pan(b.pan),a.one("layoutready",b.ready),a.trigger({type:"layoutready",layout:a}),a.one("layoutstop",b.stop),a.trigger({type:"layoutstop",layout:a});return this},layout:function(a){var b=this.cy();return b.layout(e.extend({},a,{eles:this})),this},makeLayout:function(a){var b=this.cy();return b.makeLayout(e.extend({},a,{eles:this}))}};g.createLayout=g.makeLayout,b.exports=g},{"../is":83,"../promise":86,"../util":100}],29:[function(a,b,c){"use strict";var d=a("../is"),e={updateStyle:function(a){var b=this._private.cy;if(!b.styleEnabled())return this;if(b._private.batchingStyle){var c=b._private.batchStyleEles;return c.merge(this),this}var d=b.hasCompoundNodes(),e=b.style(),f=this;return a=!(!a&&void 0!==a),d&&(f=this.spawnSelf().merge(this.descendants()).merge(this.parents())),e.apply(f),d&&f.updateCompoundBounds(),a?f.rtrigger("style"):f.trigger("style"),this},updateMappers:function(a){var b=this._private.cy,c=b.style();if(a=!(!a&&void 0!==a),!b.styleEnabled())return this;c.updateMappers(this);var d=this.updateCompoundBounds(),e=d.length>0?this.add(d):this;return a?e.rtrigger("style"):e.trigger("style"),this},parsedStyle:function(a){var b=this[0];if(b.cy().styleEnabled())return b?b._private.style[a]||b.cy().style().getDefaultProperty(a):void 0},renderedStyle:function(a){var b=this.cy();if(!b.styleEnabled())return this;var c=this[0];if(c){var d=c.cy().style().getRenderedStyle(c);return void 0===a?d:d[a]}},style:function(a,b){var c=this.cy();if(!c.styleEnabled())return this;var e=!1,f=c.style();if(d.plainObject(a)){var g=a;f.applyBypass(this,g,e);var h=this.updateCompoundBounds(),i=h.length>0?this.add(h):this;i.rtrigger("style")}else if(d.string(a)){if(void 0===b){var j=this[0];return j?f.getStylePropertyValue(j,a):void 0}f.applyBypass(this,a,b,e);var h=this.updateCompoundBounds(),i=h.length>0?this.add(h):this;i.rtrigger("style")}else if(void 0===a){var j=this[0];return j?f.getRawStyle(j):void 0}return this},removeStyle:function(a){var b=this.cy();if(!b.styleEnabled())return this;var c=!1,d=b.style(),e=this;if(void 0===a)for(var f=0;f<e.length;f++){var g=e[f];d.removeAllBypasses(g,c)}else{a=a.split(/\s+/);for(var f=0;f<e.length;f++){var g=e[f];d.removeBypasses(g,a,c)}}var h=this.updateCompoundBounds(),i=h.length>0?this.add(h):this;return i.rtrigger("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},visible:function(){var a=this.cy();if(!a.styleEnabled())return!0;var b=this[0],c=a.hasCompoundNodes();if(b){if("visible"!==b.pstyle("visibility").value||"element"!==b.pstyle("display").value||0===b.pstyle("width").pfValue)return!1;if("nodes"===b._private.group){if(0===b.pstyle("height").pfValue)return!1;if(!c)return!0;var d=b._private.data.parent?b.parents():null;if(d)for(var e=0;e<d.length;e++){var f=d[e],g=f.pstyle("visibility").value,h=f.pstyle("display").value;if("visible"!==g||"element"!==h)return!1}return!0}var i=b._private.source,j=b._private.target;return i.visible()&&j.visible()}},hidden:function(){var a=this[0];return a?!a.visible():void 0},effectiveOpacity:function(){var a=this.cy();if(!a.styleEnabled())return 1;var b=a.hasCompoundNodes(),c=this[0];if(c){var d=c._private,e=c.pstyle("opacity").value;if(!b)return e;var f=d.data.parent?c.parents():null;if(f)for(var g=0;g<f.length;g++){var h=f[g],i=h.pstyle("opacity").value;e*=i}return e}},transparent:function(){var a=this.cy();if(!a.styleEnabled())return!1;var b=this[0],c=b.cy().hasCompoundNodes();return b?c?0===b.effectiveOpacity():0===b.pstyle("opacity").value:void 0},backgrounding:function(){var a=this.cy();if(!a.styleEnabled())return!1;var b=this[0];return!!b._private.backgrounding}};e.bypass=e.css=e.style,e.renderedCss=e.renderedStyle,e.removeBypass=e.removeCss=e.removeStyle,e.pstyle=e.parsedStyle,b.exports=e},{"../is":83}],30:[function(a,b,c){"use strict";function d(a){return function(){var b=arguments,c=[];if(2===b.length){var d=b[0],e=b[1];this.on(a.event,d,e)}else if(1===b.length){var e=b[0];this.on(a.event,e)}else if(0===b.length){for(var f=0;f<this.length;f++){var g=this[f],h=!a.ableField||g._private[a.ableField],i=g._private[a.field]!=a.value;if(a.overrideAble){var j=a.overrideAble(g);if(void 0!==j&&(h=j,!j))return this}h&&(g._private[a.field]=a.value,i&&c.push(g))}var k=this.spawn(c);k.updateStyle(),k.trigger(a.event)}return this}}function e(a){f[a.field]=function(){var b=this[0];if(b){if(a.overrideField){var c=a.overrideField(b);if(void 0!==c)return c}return b._private[a.field]}},f[a.on]=d({event:a.on,field:a.field,ableField:a.ableField,overrideAble:a.overrideAble,value:!0}),f[a.off]=d({event:a.off,field:a.field,ableField:a.ableField,overrideAble:a.overrideAble,value:!1})}var f={};e({field:"locked",overrideField:function(a){return!!a.cy().autolock()||void 0},on:"lock",off:"unlock"}),e({field:"grabbable",overrideField:function(a){return!a.cy().autoungrabify()&&void 0},on:"grabify",off:"ungrabify"}),e({field:"selected",ableField:"selectable",overrideAble:function(a){return!a.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),e({field:"selectable",overrideField:function(a){return!a.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),f.deselect=f.unselect,f.grabbed=function(){var a=this[0];return a?a._private.grabbed:void 0},e({field:"active",on:"activate",off:"unactivate"}),f.inactive=function(){var a=this[0];return a?!a._private.active:void 0},b.exports=f},{}],31:[function(a,b,c){"use strict";function d(a){return function(b){for(var c=[],d=0;d<this.length;d++){var e=this[d],f=e._private[a.attr];f&&c.push(f)}return this.spawn(c,{unique:!0}).filter(b)}}function e(a){return function(b){var c=[],d=this._private.cy,e=a||{};h.string(b)&&(b=d.$(b));for(var f=this._private.ids,g=b._private.ids,i=0;i<b.length;i++)for(var j=b[i]._private.edges,k=0;k<j.length;k++){var l=j[k],m=l._private.data,n=f[m.source]&&g[m.target],o=g[m.source]&&f[m.target],p=n||o;if(p){if(e.thisIsSrc||e.thisIsTgt){if(e.thisIsSrc&&!n)continue;if(e.thisIsTgt&&!o)continue}c.push(l)}}return this.spawn(c,{unique:!0})}}function f(a){var b={codirected:!1};return a=g.extend({},b,a),function(b){for(var c=[],d=this.edges(),e=a,f=0;f<d.length;f++)for(var g=d[f],h=g._private,i=h.source,j=i._private.data.id,k=h.data.target,l=i._private.edges,m=0;m<l.length;m++){var n=l[m],o=n._private.data,p=o.target,q=o.source,r=p===k&&q===j,s=j===p&&k===q;(e.codirected&&r||!e.codirected&&(r||s))&&c.push(n)}return this.spawn(c,{unique:!0}).filter(b)}}var g=a("../util"),h=a("../is"),i={},j=function(a,b){return function(c,d,e,f){var g,i=c,j=this;if(null==i?g="null":h.elementOrCollection(i)&&1===i.length&&(g="#"+i.id()),1===j.length&&g){var k=j[0]._private,l=k.traversalCache=k.traversalCache||{},m=l[b]=l[b]||{},n=m[g];return n?n:m[g]=a.call(j,c,d,e,f)}return a.call(j,c,d,e,f)}},k=function(a){return function(b){for(var c=this,d=[],e=0;e<c.length;e++){var f=c[e];if(f.isNode()){for(var g=!1,h=f.connectedEdges(),i=0;i<h.length;i++){var j=h[i],k=j.source(),l=j.target();if(a.noIncomingEdges&&l===f&&k!==f||a.noOutgoingEdges&&k===f&&l!==f){g=!0;break}}g||d.push(f)}}return this.spawn(d,{unique:!0}).filter(b)}},l=function(a){return function(b){for(var c=this,d=[],e=0;e<c.length;e++){var f=c[e];if(f.isNode())for(var g=f.connectedEdges(),h=0;h<g.length;h++){var i=g[h],j=i.source(),k=i.target();a.outgoing&&j===f?(d.push(i),d.push(k)):a.incoming&&k===f&&(d.push(i),d.push(j))}}return this.spawn(d,{unique:!0}).filter(b)}},m=function(a){return function(b){for(var c=this,d=[],e={};;){var f=a.outgoing?c.outgoers():c.incomers();if(0===f.length)break;for(var g=!1,h=0;h<f.length;h++){var i=f[h],j=i.id();e[j]||(e[j]=!0,d.push(i),g=!0)}if(!g)break;c=f}return this.spawn(d,{unique:!0}).filter(b)}};g.extend(i,{roots:k({noIncomingEdges:!0}),leaves:k({noOutgoingEdges:!0}),outgoers:j(l({outgoing:!0}),"outgoers"),successors:m({outgoing:!0}),incomers:j(l({incoming:!0}),"incomers"),predecessors:m({incoming:!0})}),g.extend(i,{neighborhood:j(function(a){for(var b=[],c=this.nodes(),d=0;d<c.length;d++)for(var e=c[d],f=e.connectedEdges(),g=0;g<f.length;g++){var h=f[g],i=h.source(),j=h.target(),k=e===i?j:i;k.length>0&&b.push(k[0]),b.push(h[0])}return this.spawn(b,{unique:!0}).filter(a)},"neighborhood"),closedNeighborhood:function(a){return this.neighborhood().add(this).filter(a)},openNeighborhood:function(a){return this.neighborhood(a)}}),i.neighbourhood=i.neighborhood,i.closedNeighbourhood=i.closedNeighborhood,i.openNeighbourhood=i.openNeighborhood,g.extend(i,{source:j(function(a){var b,c=this[0];return c&&(b=c._private.source||c.cy().collection()),b&&a?b.filter(a):b},"source"),target:j(function(a){var b,c=this[0];return c&&(b=c._private.target||c.cy().collection()),b&&a?b.filter(a):b},"target"),sources:d({attr:"source"}),targets:d({attr:"target"})}),g.extend(i,{edgesWith:j(e(),"edgesWith",!0),edgesTo:j(e({thisIsSrc:!0}),"edgesTo",!0)}),g.extend(i,{connectedEdges:j(function(a){for(var b=[],c=this,d=0;d<c.length;d++){var e=c[d];if(e.isNode())for(var f=e._private.edges,g=0;g<f.length;g++){var h=f[g];b.push(h)}}return this.spawn(b,{unique:!0}).filter(a)},"connectedEdges"),connectedNodes:j(function(a){for(var b=[],c=this,d=0;d<c.length;d++){var e=c[d];e.isEdge()&&(b.push(e.source()[0]),b.push(e.target()[0]))}return this.spawn(b,{unique:!0}).filter(a)},"connectedNodes"),parallelEdges:j(f(),"parallelEdges"),codirectedEdges:j(f({codirected:!0}),"codirectedEdges")}),g.extend(i,{components:function(){var a=this,b=a.cy(),c=a.spawn(),d=a.nodes().spawnSelf(),e=[],f=function(a,b){c.merge(a),d.unmerge(a),b.merge(a)};if(d.empty())return a.spawn();do{var g=b.collection();e.push(g);var h=d[0];f(h,g),a.bfs({directed:!1,roots:h,visit:function(a,b,c,d,e){f(c,g)}})}while(d.length>0);return e.map(function(a){var b=a.connectedEdges().stdFilter(function(b){return a.anySame(b.source())&&a.anySame(b.target())});return a.union(b)})}}),b.exports=i},{"../is":83,"../util":100}],32:[function(a,b,c){"use strict";var d=function(a,b){var c=a.cy(),d=a.pstyle("z-index").value-b.pstyle("z-index").value,e=0,f=0,g=c.hasCompoundNodes(),h=a.isNode(),i=!h,j=b.isNode(),k=!j;g&&(e=a.zDepth(),f=b.zDepth());var l=e-f,m=0===l;return m?h&&k?1:i&&j?-1:0===d?a.poolIndex()-b.poolIndex():d:l};b.exports=d},{}],33:[function(a,b,c){"use strict";var d=a("../is"),e=a("../util"),f=a("../collection"),g=a("../collection/element"),h={add:function(a){var b,c=this;if(d.elementOrCollection(a)){var h=a;if(h._private.cy===c)b=h.restore();else{for(var i=[],j=0;j<h.length;j++){var k=h[j];i.push(k.json())}b=new f(c,i)}}else if(d.array(a)){var i=a;b=new f(c,i)}else if(d.plainObject(a)&&(d.array(a.nodes)||d.array(a.edges))){for(var l=a,i=[],m=["nodes","edges"],j=0,n=m.length;n>j;j++){var o=m[j],p=l[o];if(d.array(p))for(var q=0,r=p.length;r>q;q++){var s=e.extend({group:o},p[q]);i.push(s)}}b=new f(c,i)}else{var s=a;b=new g(c,s).collection()}return b},remove:function(a){if(d.elementOrCollection(a));else if(d.string(a)){var b=a;a=this.$(b)}return a.remove()},load:function(a,b,c){var f=this;f.notifications(!1);var g=f.mutableElements();g.length>0&&g.remove(),null!=a&&(d.plainObject(a)||d.array(a))&&f.add(a),f.one("layoutready",function(a){f.notifications(!0),f.trigger(a),f.notify({type:"load",eles:f.mutableElements()}),f.one("load",b),f.trigger("load")}).one("layoutstop",function(){f.one("done",c),f.trigger("done")});var h=e.extend({},f._private.options.layout);return h.eles=f.elements(),f.layout(h),this}};b.exports=h},{"../collection":26,"../collection/element":22,"../is":83,"../util":100}],34:[function(a,b,c){"use strict";var d=a("../define"),e=a("../util"),f=a("../is"),g={animate:d.animate(),animation:d.animation(),animated:d.animated(),clearQueue:d.clearQueue(),delay:d.delay(),delayAnimation:d.delayAnimation(),stop:d.stop(),addToAnimationPool:function(a){var b=this;b.styleEnabled()&&b._private.aniEles.merge(a)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){function a(){k._private.animationsRunning&&e.requestAnimationFrame(function(c){b(c),a()})}function b(a){function b(b,e){var h=b._private,i=h.animation.current,j=h.animation.queue,k=!1;if(0===i.length){var l=j.shift();l&&i.push(l)}for(var m=function(a){for(var b=a.length-1;b>=0;b--){var c=a[b];c()}a.splice(0,a.length)},n=i.length-1;n>=0;n--){var o=i[n],p=o._private;p.stopped?(i.splice(n,1),p.hooked=!1,p.playing=!1,p.started=!1,m(p.frames)):(p.playing||p.applying)&&(p.playing&&p.applying&&(p.applying=!1),p.started||c(b,o,a),d(b,o,a,e),f.fn(p.step)&&p.step.call(b,a),p.applying&&(p.applying=!1),m(p.frames),o.completed()&&(i.splice(n,1),p.hooked=!1,p.playing=!1,p.started=!1,m(p.completes)),k=!0)}return e||0!==i.length||0!==j.length||g.push(b),k}for(var e=k._private.aniEles,g=[],h=!1,i=0;i<e.length;i++){var j=e[i],l=b(j);h=h||l}var m=b(k,!0);if(h||m)if(e.length>0){var n=e.updateCompoundBounds().spawnSelf().merge(e);k.notify({type:"draw",eles:n})}else k.notify({type:"draw"});e.unmerge(g),k.trigger("step")}function c(a,b,c){var d=f.core(a),e=!d,g=a,h=k._private.style,i=b._private;if(e){var j=g._private.position;i.startPosition=i.startPosition||{x:j.x,y:j.y},i.startStyle=i.startStyle||h.getAnimationStartStyle(g,i.style)}if(d){var l=k._private.pan;i.startPan=i.startPan||{x:l.x,y:l.y},i.startZoom=null!=i.startZoom?i.startZoom:k._private.zoom}i.started=!0,i.startTime=c-i.progress*i.duration}function d(a,b,c,d){var e=k._private.style,h=!d,i=a._private,l=b._private,m=l.easing,o=l.startTime;if(!l.easingImpl)if(null==m)l.easingImpl=n.linear;else{var p;if(f.string(m)){var q=e.parse("transition-timing-function",m);p=q.value}else p=m;var r,s;f.string(p)?(r=p,s=[]):(r=p[1],s=p.slice(2).map(function(a){return+a})),s.length>0?("spring"===r&&s.push(l.duration),l.easingImpl=n[r].apply(null,s)):l.easingImpl=n[r]}var t,u=l.easingImpl;if(t=0===l.duration?1:(c-o)/l.duration,l.applying&&(t=l.progress),0>t?t=0:t>1&&(t=1),null==l.delay){var v=l.startPosition,w=l.position,x=i.position;w&&h&&(g(v.x,w.x)&&(x.x=j(v.x,w.x,t,u)),g(v.y,w.y)&&(x.y=j(v.y,w.y,t,u)),a.trigger("position"));var y=l.startPan,z=l.pan,A=i.pan,B=null!=z&&d;B&&(g(y.x,z.x)&&(A.x=j(y.x,z.x,t,u)),g(y.y,z.y)&&(A.y=j(y.y,z.y,t,u)),a.trigger("pan"));var C=l.startZoom,D=l.zoom,E=null!=D&&d;E&&(g(C,D)&&(i.zoom=j(C,D,t,u)),a.trigger("zoom")),(B||E)&&a.trigger("viewport");var F=l.style;if(F&&F.length>0&&h){for(var G=0;G<F.length;G++){var H=F[G],r=H.name,I=H,J=l.startStyle[r],K=j(J,I,t,u);e.overrideBypass(a,r,K)}a.trigger("style")}}return l.progress=t,t}function g(a,b){return null!=a&&null!=b&&(!(!f.number(a)||!f.number(b))||!(!a||!b));
}function h(a,b,c){var d=1-c,e=c*c;return 3*d*d*c*a+3*d*e*b+e*c}function i(a,b){return function(c,d,e){return c+(d-c)*h(a,b,e)}}function j(a,b,c,d){0>c?c=0:c>1&&(c=1);var e,g;if(e=null!=a.pfValue||null!=a.value?null!=a.pfValue?a.pfValue:a.value:a,g=null!=b.pfValue||null!=b.value?null!=b.pfValue?b.pfValue:b.value:b,f.number(e)&&f.number(g))return d(e,g,c);if(f.array(e)&&f.array(g)){for(var h=[],i=0;i<g.length;i++){var j=e[i],k=g[i];if(null!=j&&null!=k){var l=d(j,k,c);a.roundValue&&(l=Math.round(l)),h.push(l)}else h.push(k)}return h}}var k=this;if(k._private.animationsRunning=!0,k.styleEnabled()){var l=k.renderer();l&&l.beforeRender?l.beforeRender(function(a,c){b(c)},l.beforeRenderPriorities.animations):a();var m=function(){function a(a){return-a.tension*a.x-a.friction*a.v}function b(b,c,d){var e={x:b.x+d.dx*c,v:b.v+d.dv*c,tension:b.tension,friction:b.friction};return{dx:e.v,dv:a(e)}}function c(c,d){var e={dx:c.v,dv:a(c)},f=b(c,.5*d,e),g=b(c,.5*d,f),h=b(c,d,g),i=1/6*(e.dx+2*(f.dx+g.dx)+h.dx),j=1/6*(e.dv+2*(f.dv+g.dv)+h.dv);return c.x=c.x+i*d,c.v=c.v+j*d,c}return function a(b,d,e){var f,g,h,i={x:-1,v:0,tension:null,friction:null},j=[0],k=0,l=1e-4,m=.016;for(b=parseFloat(b)||500,d=parseFloat(d)||20,e=e||null,i.tension=b,i.friction=d,f=null!==e,f?(k=a(b,d),g=k/e*m):g=m;h=c(h||i,g),j.push(1+h.x),k+=16,Math.abs(h.x)>l&&Math.abs(h.v)>l;);return f?function(a){return j[a*(j.length-1)|0]}:k}}(),n={linear:function(a,b,c){return a+(b-a)*c},ease:i(.25,.1,.25,1),"ease-in":i(.42,0,1,1),"ease-out":i(0,0,.58,1),"ease-in-out":i(.42,0,.58,1),"ease-in-sine":i(.47,0,.745,.715),"ease-out-sine":i(.39,.575,.565,1),"ease-in-out-sine":i(.445,.05,.55,.95),"ease-in-quad":i(.55,.085,.68,.53),"ease-out-quad":i(.25,.46,.45,.94),"ease-in-out-quad":i(.455,.03,.515,.955),"ease-in-cubic":i(.55,.055,.675,.19),"ease-out-cubic":i(.215,.61,.355,1),"ease-in-out-cubic":i(.645,.045,.355,1),"ease-in-quart":i(.895,.03,.685,.22),"ease-out-quart":i(.165,.84,.44,1),"ease-in-out-quart":i(.77,0,.175,1),"ease-in-quint":i(.755,.05,.855,.06),"ease-out-quint":i(.23,1,.32,1),"ease-in-out-quint":i(.86,0,.07,1),"ease-in-expo":i(.95,.05,.795,.035),"ease-out-expo":i(.19,1,.22,1),"ease-in-out-expo":i(1,0,0,1),"ease-in-circ":i(.6,.04,.98,.335),"ease-out-circ":i(.075,.82,.165,1),"ease-in-out-circ":i(.785,.135,.15,.86),spring:function(a,b,c){if(0===c)return n.linear;var d=m(a,b,c);return function(a,b,c){return a+(b-a)*d(c)}},"cubic-bezier":function(a,b,c,d){return i(a,b,c,d)}}}}};b.exports=g},{"../define":44,"../is":83,"../util":100}],35:[function(a,b,c){"use strict";var d=a("../define"),e={on:d.on(),one:d.on({unbindSelfOnTrigger:!0}),once:d.on({unbindAllBindersOnTrigger:!0}),off:d.off(),trigger:d.trigger()};d.eventAliasesOn(e),b.exports=e},{"../define":44}],36:[function(a,b,c){"use strict";var d={png:function(a){var b=this._private.renderer;return a=a||{},b.png(a)},jpg:function(a){var b=this._private.renderer;return a=a||{},a.bg=a.bg||"#fff",b.jpg(a)}};d.jpeg=d.jpg,b.exports=d},{}],37:[function(a,b,c){"use strict";var d=a("../window"),e=a("../util"),f=a("../collection"),g=a("../is"),h=a("../promise"),i=a("../define"),j=function(a){var b=this;a=e.extend({},a);var c=a.container;c&&!g.htmlElement(c)&&g.htmlElement(c[0])&&(c=c[0]);var i=c?c._cyreg:null;i=i||{},i&&i.cy&&(i.cy.destroy(),i={});var j=i.readies=i.readies||[];c&&(c._cyreg=i),i.cy=b;var k=void 0!==d&&void 0!==c&&!a.headless,l=a;l.layout=e.extend({name:k?"grid":"null"},l.layout),l.renderer=e.extend({name:k?"canvas":"null"},l.renderer);var m=function(a,b,c){return void 0!==b?b:void 0!==c?c:a},n=this._private={container:c,ready:!1,initrender:!1,options:l,elements:new f(this),listeners:[],aniEles:new f(this),scratch:{},layout:null,renderer:null,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:m(!0,l.zoomingEnabled),userZoomingEnabled:m(!0,l.userZoomingEnabled),panningEnabled:m(!0,l.panningEnabled),userPanningEnabled:m(!0,l.userPanningEnabled),boxSelectionEnabled:m(!0,l.boxSelectionEnabled),autolock:m(!1,l.autolock,l.autolockNodes),autoungrabify:m(!1,l.autoungrabify,l.autoungrabifyNodes),autounselectify:m(!1,l.autounselectify),styleEnabled:void 0===l.styleEnabled?k:l.styleEnabled,zoom:g.number(l.zoom)?l.zoom:1,pan:{x:g.plainObject(l.pan)&&g.number(l.pan.x)?l.pan.x:0,y:g.plainObject(l.pan)&&g.number(l.pan.y)?l.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1},o=l.selectionType;void 0===o||"additive"!==o&&"single"!==o?n.selectionType="single":n.selectionType=o,g.number(l.minZoom)&&g.number(l.maxZoom)&&l.minZoom<l.maxZoom?(n.minZoom=l.minZoom,n.maxZoom=l.maxZoom):g.number(l.minZoom)&&void 0===l.maxZoom?n.minZoom=l.minZoom:g.number(l.maxZoom)&&void 0===l.minZoom&&(n.maxZoom=l.maxZoom);var p=function(a,b){var c=a.some(g.promise);return c?h.all(a).then(b):void b(a)};b.initRenderer(e.extend({hideEdgesOnViewport:l.hideEdgesOnViewport,textureOnViewport:l.textureOnViewport,wheelSensitivity:g.number(l.wheelSensitivity)&&l.wheelSensitivity>0?l.wheelSensitivity:1,motionBlur:void 0!==l.motionBlur&&l.motionBlur,motionBlurOpacity:void 0===l.motionBlurOpacity?.05:l.motionBlurOpacity,pixelRatio:g.number(l.pixelRatio)&&l.pixelRatio>0?l.pixelRatio:void 0,desktopTapThreshold:void 0===l.desktopTapThreshold?4:l.desktopTapThreshold,touchTapThreshold:void 0===l.touchTapThreshold?8:l.touchTapThreshold},l.renderer)),p([l.style,l.elements],function(a){var c=a[0],d=a[1];n.styleEnabled&&b.setStyle(c),l.initrender&&(b.on("initrender",l.initrender),b.on("initrender",function(){n.initrender=!0})),b.load(d,function(){b.startAnimationLoop(),n.ready=!0,g.fn(l.ready)&&b.on("ready",l.ready);for(var a=0;a<j.length;a++){var c=j[a];b.on("ready",c)}i&&(i.readies=[]),b.trigger("ready")},l.done)})},k=j.prototype;e.extend(k,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},ready:function(a){return this.isReady()?this.trigger("ready",[],a):this.on("ready",a),this},initrender:function(){return this._private.initrender},destroy:function(){var a=this;return a.stopAnimationLoop(),a.destroyRenderer(),a},hasElementWithId:function(a){return this._private.elements.hasElementWithId(a)},getElementById:function(a){return this._private.elements.getElementById(a)},selectionType:function(){return this._private.selectionType},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return"null"===this._private.options.renderer.name},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(a){return this._private.elements.merge(a),this},removeFromPool:function(a){return this._private.elements.unmerge(a),this},container:function(){return this._private.container},options:function(){return e.copy(this._private.options)},json:function(a){var b=this,c=b._private,d=b.mutableElements();if(g.plainObject(a)){if(b.startBatch(),a.elements){var f={},h=function(a,c){for(var d=0;d<a.length;d++){var g=a[d],h=g.data.id,i=b.getElementById(h);f[h]=!0,0!==i.length?i.json(g):c?b.add(e.extend({group:c},g)):b.add(g)}};if(g.array(a.elements))h(a.elements);else for(var i=["nodes","edges"],j=0;j<i.length;j++){var k=i[j],l=a.elements[k];g.array(l)&&h(l,k)}d.stdFilter(function(a){return!f[a.id()]}).remove()}a.style&&b.style(a.style),null!=a.zoom&&a.zoom!==c.zoom&&b.zoom(a.zoom),a.pan&&(a.pan.x===c.pan.x&&a.pan.y===c.pan.y||b.pan(a.pan));for(var m=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify"],j=0;j<m.length;j++){var n=m[j];null!=a[n]&&b[n](a[n])}return b.endBatch(),this}if(void 0===a){var o={};return o.elements={},d.forEach(function(a){var b=a.group();o.elements[b]||(o.elements[b]=[]),o.elements[b].push(a.json())}),this._private.styleEnabled&&(o.style=b.style().json()),o.zoomingEnabled=b._private.zoomingEnabled,o.userZoomingEnabled=b._private.userZoomingEnabled,o.zoom=b._private.zoom,o.minZoom=b._private.minZoom,o.maxZoom=b._private.maxZoom,o.panningEnabled=b._private.panningEnabled,o.userPanningEnabled=b._private.userPanningEnabled,o.pan=e.copy(b._private.pan),o.boxSelectionEnabled=b._private.boxSelectionEnabled,o.renderer=e.copy(b._private.options.renderer),o.hideEdgesOnViewport=b._private.options.hideEdgesOnViewport,o.textureOnViewport=b._private.options.textureOnViewport,o.wheelSensitivity=b._private.options.wheelSensitivity,o.motionBlur=b._private.options.motionBlur,o}},scratch:i.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0}),removeScratch:i.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0})}),[a("./add-remove"),a("./animation"),a("./events"),a("./export"),a("./layout"),a("./notification"),a("./renderer"),a("./search"),a("./style"),a("./viewport")].forEach(function(a){e.extend(k,a)}),b.exports=j},{"../collection":26,"../define":44,"../is":83,"../promise":86,"../util":100,"../window":107,"./add-remove":33,"./animation":34,"./events":35,"./export":36,"./layout":38,"./notification":39,"./renderer":40,"./search":41,"./style":42,"./viewport":43}],38:[function(a,b,c){"use strict";var d=a("../util"),e=a("../is"),f={layout:function(a){var b=this._private.prevLayout=null==a?this._private.prevLayout:this.makeLayout(a);return b.run(),this},makeLayout:function(a){var b=this;if(null==a)return void d.error("Layout options must be specified to make a layout");if(null==a.name)return void d.error("A `name` must be specified to make a layout");var c=a.name,f=b.extension("layout",c);if(null==f)return void d.error("Can not apply layout: No such layout `"+c+"` found; did you include its JS file?");var g;g=e.string(a.eles)?b.$(a.eles):null!=a.eles?a.eles:b.$();var h=new f(d.extend({},a,{cy:b,eles:g}));return h}};f.createLayout=f.makeLayout,b.exports=f},{"../is":83,"../util":100}],39:[function(a,b,c){"use strict";var d={notify:function(a){var b=this._private;if(b.batchingNotify){var c=b.batchNotifyEles,d=b.batchNotifyTypes;return a.eles&&c.merge(a.eles),void(d.ids[a.type]||(d.push(a.type),d.ids[a.type]=!0))}if(b.notificationsEnabled){var e=this.renderer();e&&e.notify(a)}},notifications:function(a){var b=this._private;return void 0===a?b.notificationsEnabled:void(b.notificationsEnabled=!!a)},noNotifications:function(a){this.notifications(!1),a(),this.notifications(!0)},startBatch:function(){var a=this._private;return null==a.batchCount&&(a.batchCount=0),0===a.batchCount&&(a.batchingStyle=a.batchingNotify=!0,a.batchStyleEles=this.collection(),a.batchNotifyEles=this.collection(),a.batchNotifyTypes=[],a.batchNotifyTypes.ids={}),a.batchCount++,this},endBatch:function(){var a=this._private;return a.batchCount--,0===a.batchCount&&(a.batchingStyle=!1,a.batchStyleEles.updateStyle(),a.batchingNotify=!1,this.notify({type:a.batchNotifyTypes,eles:a.batchNotifyEles})),this},batch:function(a){return this.startBatch(),a(),this.endBatch(),this},batchData:function(a){var b=this;return this.batch(function(){for(var c=Object.keys(a),d=0;d<c.length;d++){var e=c[d],f=a[e],g=b.getElementById(e);g.data(f)}})}};b.exports=d},{}],40:[function(a,b,c){"use strict";var d=a("../util"),e={renderTo:function(a,b,c,d){var e=this._private.renderer;return e.renderTo(a,b,c,d),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify({type:"draw"}),this},resize:function(){return this.invalidateSize(),this.notify({type:"resize"}),this.trigger("resize"),this},initRenderer:function(a){var b=this,c=b.extension("renderer",a.name);if(null==c)return void d.error("Can not initialise: No such renderer `%s` found; did you include its JS file?",a.name);var e=d.extend({},a,{cy:b});b._private.renderer=new c(e)},destroyRenderer:function(){var a=this;a.notify({type:"destroy"});var b=a.container();if(b)for(b._cyreg=null;b.childNodes.length>0;)b.removeChild(b.childNodes[0]);a._private.renderer=null},onRender:function(a){return this.on("render",a)},offRender:function(a){return this.off("render",a)}};e.invalidateDimensions=e.resize,b.exports=e},{"../util":100}],41:[function(a,b,c){"use strict";var d=a("../is"),e=a("../collection"),f={collection:function(a,b){return d.string(a)?this.$(a):d.elementOrCollection(a)?a.collection():d.array(a)?new e(this,a,b):new e(this)},nodes:function(a){var b=this.$(function(){return this.isNode()});return a?b.filter(a):b},edges:function(a){var b=this.$(function(){return this.isEdge()});return a?b.filter(a):b},$:function(a){var b=this._private.elements;return a?b.filter(a):b.spawnSelf()},mutableElements:function(){return this._private.elements}};f.elements=f.filter=f.$,b.exports=f},{"../collection":26,"../is":83}],42:[function(a,b,c){"use strict";var d=a("../is"),e=a("../style"),f={style:function(a){if(a){var b=this.setStyle(a);b.update()}return this._private.style},setStyle:function(a){var b=this._private;return d.stylesheet(a)?b.style=a.generateStyle(this):d.array(a)?b.style=e.fromJson(this,a):d.string(a)?b.style=e.fromString(this,a):b.style=e(this),b.style}};b.exports=f},{"../is":83,"../style":92}],43:[function(a,b,c){"use strict";var d=a("../is"),e={autolock:function(a){return void 0===a?this._private.autolock:(this._private.autolock=!!a,this)},autoungrabify:function(a){return void 0===a?this._private.autoungrabify:(this._private.autoungrabify=!!a,this)},autounselectify:function(a){return void 0===a?this._private.autounselectify:(this._private.autounselectify=!!a,this)},panningEnabled:function(a){return void 0===a?this._private.panningEnabled:(this._private.panningEnabled=!!a,this)},userPanningEnabled:function(a){return void 0===a?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!a,this)},zoomingEnabled:function(a){return void 0===a?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!a,this)},userZoomingEnabled:function(a){return void 0===a?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!a,this)},boxSelectionEnabled:function(a){return void 0===a?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!a,this)},pan:function(){var a,b,c,e,f,g=arguments,h=this._private.pan;switch(g.length){case 0:return h;case 1:if(d.string(g[0]))return a=g[0],h[a];if(d.plainObject(g[0])){if(!this._private.panningEnabled)return this;c=g[0],e=c.x,f=c.y,d.number(e)&&(h.x=e),d.number(f)&&(h.y=f),this.trigger("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;a=g[0],b=g[1],"x"!==a&&"y"!==a||!d.number(b)||(h[a]=b),this.trigger("pan viewport")}return this.notify({type:"viewport"}),this},panBy:function(a){var b,c,e,f,g,h=arguments,i=this._private.pan;if(!this._private.panningEnabled)return this;switch(h.length){case 1:d.plainObject(h[0])&&(e=h[0],f=e.x,g=e.y,d.number(f)&&(i.x+=f),d.number(g)&&(i.y+=g),this.trigger("pan viewport"));break;case 2:b=h[0],c=h[1],"x"!==b&&"y"!==b||!d.number(c)||(i[b]+=c),this.trigger("pan viewport")}return this.notify({type:"viewport"}),this},fit:function(a,b){var c=this.getFitViewport(a,b);if(c){var d=this._private;d.zoom=c.zoom,d.pan=c.pan,this.trigger("pan zoom viewport"),this.notify({type:"viewport"})}return this},getFitViewport:function(a,b){if(d.number(a)&&void 0===b&&(b=a,a=void 0),this._private.panningEnabled&&this._private.zoomingEnabled){var c;if(d.string(a)){var e=a;a=this.$(e)}else if(d.boundingBox(a)){var f=a;c={x1:f.x1,y1:f.y1,x2:f.x2,y2:f.y2},c.w=c.x2-c.x1,c.h=c.y2-c.y1}else d.elementOrCollection(a)||(a=this.mutableElements());c=c||a.boundingBox();var g,h=this.width(),i=this.height();if(b=d.number(b)?b:0,!isNaN(h)&&!isNaN(i)&&h>0&&i>0&&!isNaN(c.w)&&!isNaN(c.h)&&c.w>0&&c.h>0){g=Math.min((h-2*b)/c.w,(i-2*b)/c.h),g=g>this._private.maxZoom?this._private.maxZoom:g,g=g<this._private.minZoom?this._private.minZoom:g;var j={x:(h-g*(c.x1+c.x2))/2,y:(i-g*(c.y1+c.y2))/2};return{zoom:g,pan:j}}}},minZoom:function(a){return void 0===a?this._private.minZoom:(d.number(a)&&(this._private.minZoom=a),this)},maxZoom:function(a){return void 0===a?this._private.maxZoom:(d.number(a)&&(this._private.maxZoom=a),this)},zoom:function(a){var b,c;if(void 0===a)return this._private.zoom;if(d.number(a))c=a;else if(d.plainObject(a)){if(c=a.level,a.position){var e=a.position,f=this._private.pan,g=this._private.zoom;b={x:e.x*g+f.x,y:e.y*g+f.y}}else a.renderedPosition&&(b=a.renderedPosition);if(b&&!this._private.panningEnabled)return this}if(!this._private.zoomingEnabled)return this;if(!d.number(c)||b&&(!d.number(b.x)||!d.number(b.y)))return this;if(c=c>this._private.maxZoom?this._private.maxZoom:c,c=c<this._private.minZoom?this._private.minZoom:c,b){var h=this._private.pan,i=this._private.zoom,j=c,k={x:-j/i*(b.x-h.x)+b.x,y:-j/i*(b.y-h.y)+b.y};this._private.zoom=c,this._private.pan=k;var l=h.x!==k.x||h.y!==k.y;this.trigger(" zoom "+(l?" pan ":"")+" viewport ")}else this._private.zoom=c,this.trigger("zoom viewport");return this.notify({type:"viewport"}),this},viewport:function(a){var b=this._private,c=!0,e=!0,f=[],g=!1,h=!1;if(!a)return this;if(d.number(a.zoom)||(c=!1),d.plainObject(a.pan)||(e=!1),!c&&!e)return this;if(c){var i=a.zoom;i<b.minZoom||i>b.maxZoom||!b.zoomingEnabled?g=!0:(b.zoom=i,f.push("zoom"))}if(e&&(!g||!a.cancelOnFailedZoom)&&b.panningEnabled){var j=a.pan;d.number(j.x)&&(b.pan.x=j.x,h=!1),d.number(j.y)&&(b.pan.y=j.y,h=!1),h||f.push("pan")}return f.length>0&&(f.push("viewport"),this.trigger(f.join(" ")),this.notify({type:"viewport"})),this},center:function(a){var b=this.getCenterPan(a);return b&&(this._private.pan=b,this.trigger("pan viewport"),this.notify({type:"viewport"})),this},getCenterPan:function(a,b){if(this._private.panningEnabled){if(d.string(a)){var c=a;a=this.mutableElements().filter(c)}else d.elementOrCollection(a)||(a=this.mutableElements());var e=a.boundingBox(),f=this.width(),g=this.height();b=void 0===b?this._private.zoom:b;var h={x:(f-b*(e.x1+e.x2))/2,y:(g-b*(e.y1+e.y2))/2};return h}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var a=this._private,b=a.container;return a.sizeCache=a.sizeCache||(b?{width:b.clientWidth,height:b.clientHeight}:{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var a=this._private.pan,b=this._private.zoom,c=this.renderedExtent(),d={x1:(c.x1-a.x)/b,x2:(c.x2-a.x)/b,y1:(c.y1-a.y)/b,y2:(c.y2-a.y)/b};return d.w=d.x2-d.x1,d.h=d.y2-d.y1,d},renderedExtent:function(){var a=this.width(),b=this.height();return{x1:0,y1:0,x2:a,y2:b,w:a,h:b}}};e.centre=e.center,e.autolockNodes=e.autolock,e.autoungrabifyNodes=e.autoungrabify,b.exports=e},{"../is":83}],44:[function(a,b,c){"use strict";var d=a("./util"),e=a("./is"),f=a("./selector"),g=a("./promise"),h=a("./event"),i=a("./animation"),j={data:function(a){var b={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,onSet:function(a){},canSet:function(a){return!0}};return a=d.extend({},b,a),function(b,c){var d=a,f=this,g=void 0!==f.length,h=g?f:[f],i=g?f[0]:f;if(e.string(b)){if(d.allowGetting&&void 0===c){var j;return i&&(j=i._private[d.field][b]),j}if(d.allowSetting&&void 0!==c){var k=!d.immutableKeys[b];if(k){for(var l=0,m=h.length;m>l;l++)d.canSet(h[l])&&(h[l]._private[d.field][b]=c);d.updateStyle&&f.updateStyle(),d.onSet(f),d.settingTriggersEvent&&f[d.triggerFnName](d.settingEvent)}}}else if(d.allowSetting&&e.plainObject(b)){for(var n,o,p=b,q=Object.keys(p),l=0;l<q.length;l++){n=q[l],o=p[n];var k=!d.immutableKeys[n];if(k)for(var r=0;r<h.length;r++){var s=h[r];d.canSet(s)&&(s._private[d.field][n]=o)}}d.updateStyle&&f.updateStyle(),d.onSet(f),d.settingTriggersEvent&&f[d.triggerFnName](d.settingEvent)}else if(d.allowBinding&&e.fn(b)){var t=b;f.on(d.bindingEvent,t)}else if(d.allowGetting&&void 0===b){var j;return i&&(j=i._private[d.field]),j}return f}},removeData:function(a){var b={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return a=d.extend({},b,a),function(b){var c=a,d=this,f=void 0!==d.length,g=f?d:[d];if(e.string(b)){for(var h=b.split(/\s+/),i=h.length,j=0;i>j;j++){var k=h[j];if(!e.emptyString(k)){var l=!c.immutableKeys[k];if(l)for(var m=0,n=g.length;n>m;m++)g[m]._private[c.field][k]=void 0}}c.triggerEvent&&d[c.triggerFnName](c.event)}else if(void 0===b){for(var m=0,n=g.length;n>m;m++)for(var o=g[m]._private[c.field],h=Object.keys(o),j=0;j<h.length;j++){var k=h[j],p=!c.immutableKeys[k];p&&(o[k]=void 0)}c.triggerEvent&&d[c.triggerFnName](c.event)}return d}},event:{regex:/(\w+)(\.(?:\w+|\*))?/,universalNamespace:".*",optionalTypeRegex:/(\w+)?(\.(?:\w+|\*))?/,falseCallback:function(){return!1}},on:function(a){var b={unbindSelfOnTrigger:!1,unbindAllBindersOnTrigger:!1};return a=d.extend({},b,a),function(b,c,d,g){var h=this,i=void 0!==h.length,k=i?h:[h],l=e.string(b),m=a;if(e.plainObject(c)?(g=d,d=c,c=void 0):(e.fn(c)||c===!1)&&(g=c,d=void 0,c=void 0),(e.fn(d)||d===!1)&&(g=d,d=void 0),!e.fn(g)&&g!==!1&&l)return h;if(l){var n={};n[b]=g,b=n}for(var o=Object.keys(b),p=0;p<o.length;p++){var q=o[p];if(g=b[q],g===!1&&(g=j.event.falseCallback),e.fn(g)){q=q.split(/\s+/);for(var r=0;r<q.length;r++){var s=q[r];if(!e.emptyString(s)){var t=s.match(j.event.regex);if(t)for(var u=t[1],v=t[2]?t[2]:void 0,w={callback:g,data:d,delegated:!!c,selector:c,selObj:new f(c),type:u,namespace:v,unbindSelfOnTrigger:m.unbindSelfOnTrigger,unbindAllBindersOnTrigger:m.unbindAllBindersOnTrigger,binders:k},x=0;x<k.length;x++){var y=k[x]._private=k[x]._private||{};y.listeners=y.listeners||[],y.listeners.push(w)}}}}}return h}},eventAliasesOn:function(a){var b=a;b.addListener=b.listen=b.bind=b.on,b.removeListener=b.unlisten=b.unbind=b.off,b.emit=b.trigger,b.pon=b.promiseOn=function(a,b){var c=this,d=Array.prototype.slice.call(arguments,0);return new g(function(a,b){var e=function(b){c.off.apply(c,g),a(b)},f=d.concat([e]),g=f.concat([]);c.on.apply(c,f)})}},off:function(a){var b={};return a=d.extend({},b,a),function(a,b,c){var d=this,f=void 0!==d.length,g=f?d:[d],h=e.string(a);if(0===arguments.length){for(var i=0;i<g.length;i++)g[i]._private=g[i]._private||{},t.listeners=[];return d}if((e.fn(b)||b===!1)&&(c=b,b=void 0),h){var k={};k[a]=c,a=k}for(var l=Object.keys(a),m=0;m<l.length;m++){var n=l[m];c=a[n],c===!1&&(c=j.event.falseCallback),n=n.split(/\s+/);for(var o=0;o<n.length;o++){var p=n[o];if(!e.emptyString(p)){var q=p.match(j.event.optionalTypeRegex);if(q)for(var r=q[1]?q[1]:void 0,s=q[2]?q[2]:void 0,i=0;i<g.length;i++)for(var t=g[i]._private=g[i]._private||{},u=t.listeners=t.listeners||[],v=0;v<u.length;v++){var w=u[v],x=!s||s===w.namespace,y=!r||w.type===r,z=!c||c===w.callback,A=x&&y&&z;A&&(u.splice(v,1),v--)}}}}return d}},trigger:function(a){var b={};return a=d.extend({},b,a),function(b,c,d){var f=this,g=void 0!==f.length,i=g?f:[f],k=e.string(b),l=e.plainObject(b),m=e.event(b),n=this._private=this._private||{},o=n.cy||(e.core(this)?this:null),p=!!o&&o.hasCompoundNodes();if(k){var q=b.split(/\s+/);b=[];for(var r=0;r<q.length;r++){var s=q[r];if(!e.emptyString(s)){var t=s.match(j.event.regex),u=t[1],v=t[2]?t[2]:void 0;b.push({type:u,namespace:v})}}}else if(l){var w=b;b=[w]}c?e.array(c)||(c=[c]):c=[];for(var r=0;r<b.length;r++)for(var x=b[r],y=0;y<i.length;y++){var s,z=i[y],n=z._private=z._private||{},A=n.listeners=n.listeners||[],B=e.element(z),C=B||a.layout;if(m?(s=x,s.cyTarget=s.cyTarget||z,s.cy=s.cy||o):s=new h(x,{cyTarget:z,cy:o,namespace:x.namespace}),x.layout&&(s.layout=x.layout),a.layout&&(s.layout=z),s.cyPosition){var D=s.cyPosition,E=o.zoom(),F=o.pan();s.cyRenderedPosition={x:D.x*E+F.x,y:D.y*E+F.y}}d&&(A=[{namespace:s.namespace,type:s.type,callback:d}]);for(var G=0;G<A.length;G++){var H=A[G],I=!H.namespace||H.namespace===s.namespace||H.namespace===j.event.universalNamespace,J=H.type===s.type,K=!H.delegated||z!==s.cyTarget&&e.element(s.cyTarget)&&H.selObj.matches(s.cyTarget),L=I&&J&&K;if(L){var M=[s];if(M=M.concat(c),H.data?s.data=H.data:s.data=void 0,(H.unbindSelfOnTrigger||H.unbindAllBindersOnTrigger)&&(A.splice(G,1),G--),H.unbindAllBindersOnTrigger)for(var N=H.binders,O=0;O<N.length;O++){var P=N[O];if(P&&P!==z)for(var Q=P._private.listeners,R=0;R<Q.length;R++){var S=Q[R];S===H&&(Q.splice(R,1),R--)}}var T=H.delegated?s.cyTarget:z,U=H.callback.apply(T,M);(U===!1||s.isPropagationStopped())&&(C=!1,U===!1&&(s.stopPropagation(),s.preventDefault()))}}if(C){var V=p?z._private.parent:null,W=null!=V&&0!==V.length;W?(V=V[0],V.trigger(s)):o.trigger(s)}}return f}},animated:function(a){var b={};return a=d.extend({},b,a),function(){var a=this,b=void 0!==a.length,c=b?a:[a],d=this._private.cy||this;if(!d.styleEnabled())return!1;var e=c[0];return e?e._private.animation.current.length>0:void 0}},clearQueue:function(a){var b={};return a=d.extend({},b,a),function(){var a=this,b=void 0!==a.length,c=b?a:[a],d=this._private.cy||this;if(!d.styleEnabled())return this;for(var e=0;e<c.length;e++){var f=c[e];f._private.animation.queue=[]}return this}},delay:function(a){var b={};return a=d.extend({},b,a),function(a,b){var c=this._private.cy||this;return c.styleEnabled()?this.animate({delay:a,duration:a,complete:b}):this}},delayAnimation:function(a){var b={};return a=d.extend({},b,a),function(a,b){var c=this._private.cy||this;return c.styleEnabled()?this.animation({delay:a,duration:a,complete:b}):this}},animation:function(a){var b={};return a=d.extend({},b,a),function(a,b){var c=this,e=void 0!==c.length,f=e?c:[c],g=this._private.cy||this,h=!e,j=!h;if(!g.styleEnabled())return this;var k=g.style();switch(a=d.extend({},a,b),void 0===a.duration&&(a.duration=400),a.duration){case"slow":a.duration=600;break;case"fast":a.duration=200}var l=0===Object.keys(a).length;if(l)return new i(f[0],a);if(j&&(a.style=k.getPropsList(a.style||a.css),a.css=void 0),a.renderedPosition&&j){var m=a.renderedPosition,n=g.pan(),o=g.zoom();a.position={x:(m.x-n.x)/o,y:(m.y-n.y)/o}}if(a.panBy&&h){var p=a.panBy,q=g.pan();a.pan={x:q.x+p.x,y:q.y+p.y}}var r=a.center||a.centre;if(r&&h){var s=g.getCenterPan(r.eles,a.zoom);s&&(a.pan=s)}if(a.fit&&h){var t=a.fit,u=g.getFitViewport(t.eles||t.boundingBox,t.padding);u&&(a.pan=u.pan,a.zoom=u.zoom)}return new i(f[0],a)}},animate:function(a){var b={};return a=d.extend({},b,a),function(a,b){var c=this,e=void 0!==c.length,f=e?c:[c],g=this._private.cy||this;if(!g.styleEnabled())return this;b&&(a=d.extend({},a,b));for(var h=0;h<f.length;h++){var i=f[h],j=i.animated()&&(void 0===a.queue||a.queue),k=i.animation(a,j?{queue:!0}:void 0);k.play()}return this}},stop:function(a){var b={};return a=d.extend({},b,a),function(a,b){var c=this,d=void 0!==c.length,e=d?c:[c],f=this._private.cy||this;if(!f.styleEnabled())return this;for(var g=0;g<e.length;g++){for(var h=e[g],i=h._private,j=i.animation.current,k=0;k<j.length;k++){var l=j[k],m=l._private;b&&(m.duration=0)}a&&(i.animation.queue=[]),b||(i.animation.current=[])}return f.notify({eles:this,type:"draw"}),this}}};b.exports=j},{"./animation":2,"./event":45,"./is":83,"./promise":86,"./selector":87,"./util":100}],45:[function(a,b,c){"use strict";function d(){return!1}function e(){return!0}var f=function(a,b){return this instanceof f?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented?e:d):this.type=a,b&&(this.type=void 0!==b.type?b.type:this.type,this.cy=b.cy,this.cyTarget=b.cyTarget,this.cyPosition=b.cyPosition,this.cyRenderedPosition=b.cyRenderedPosition,this.namespace=b.namespace,this.layout=b.layout,this.data=b.data,this.message=b.message),void(this.timeStamp=a&&a.timeStamp||Date.now())):new f(a,b)};f.prototype={instanceString:function(){return"event"},preventDefault:function(){this.isDefaultPrevented=e;var a=this.originalEvent;a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){this.isPropagationStopped=e;var a=this.originalEvent;a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=e,this.stopPropagation()},isDefaultPrevented:d,isPropagationStopped:d,isImmediatePropagationStopped:d},b.exports=f},{}],46:[function(a,b,c){"use strict";function d(a,b,c){var d=c,f=function(c){h.error("Can not register `"+b+"` for `"+a+"` since `"+c+"` already exists in the prototype and can not be overridden")};if("core"===a){if(k.prototype[b])return f(b);k.prototype[b]=c}else if("collection"===a){if(j.prototype[b])return f(b);j.prototype[b]=c}else if("layout"===a){for(var g=function(a){this.options=a,c.call(this,a),m.plainObject(this._private)||(this._private={}),this._private.cy=a.cy,this._private.listeners=[]},l=g.prototype=Object.create(c.prototype),o=[],p=0;p<o.length;p++){var q=o[p];l[q]=l[q]||function(){return this}}l.start&&!l.run?l.run=function(){return this.start(),this}:!l.start&&l.run&&(l.start=function(){return this.run(),this});var r=c.prototype.stop;l.stop=function(){var a=this.options;if(a&&a.animate){var b=this.animations;if(b)for(var c=0;c<b.length;c++)b[c].stop()}return r?r.call(this):this.trigger("layoutstop"),this},l.destroy||(l.destroy=function(){return this}),l.on=i.on({layout:!0}),l.one=i.on({layout:!0,unbindSelfOnTrigger:!0}),l.once=i.on({layout:!0,unbindAllBindersOnTrigger:!0}),l.off=i.off({layout:!0}),l.trigger=i.trigger({layout:!0}),i.eventAliasesOn(l),d=g}else if("renderer"===a&&"null"!==b&&"base"!==b){var s=e("renderer","base"),t=s.prototype,u=c,v=c.prototype,w=function(){s.apply(this,arguments),u.apply(this,arguments)},x=w.prototype;for(var y in t){var z=t[y],A=null!=v[y];if(A)return f(y);x[y]=z}for(var y in v)x[y]=v[y];t.clientFunctions.forEach(function(a){x[a]=x[a]||function(){h.error("Renderer does not implement `renderer."+a+"()` on its prototype")}}),d=w}return h.setMap({map:n,keys:[a,b],value:d})}function e(a,b){return h.getMap({map:n,keys:[a,b]})}function f(a,b,c,d,e){return h.setMap({map:o,keys:[a,b,c,d],value:e})}function g(a,b,c,d){return h.getMap({map:o,keys:[a,b,c,d]})}var h=a("./util"),i=a("./define"),j=a("./collection"),k=a("./core"),l=a("./extensions"),m=a("./is"),n={},o={},p=function(){return 2===arguments.length?e.apply(null,arguments):3===arguments.length?d.apply(null,arguments):4===arguments.length?g.apply(null,arguments):5===arguments.length?f.apply(null,arguments):void h.error("Invalid extension access syntax")};k.prototype.extension=p,l.forEach(function(a){a.extensions.forEach(function(b){d(a.type,b.name,b.impl)})}),b.exports=p},{"./collection":26,"./core":37,"./define":44,"./extensions":47,"./is":83,"./util":100}],47:[function(a,b,c){"use strict";b.exports=[{type:"layout",extensions:a("./layout")},{type:"renderer",extensions:a("./renderer")}]},{"./layout":53,"./renderer":78}],48:[function(a,b,c){"use strict";function d(a){this.options=e.extend({},h,a)}var e=a("../../util"),f=a("../../math"),g=a("../../is"),h={fit:!0,directed:!1,padding:30,circle:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,roots:void 0,maximalAdjustments:0,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};d.prototype.run=function(){var a,b=this.options,c=b,d=b.cy,e=c.eles,h=e.nodes().not(":parent"),i=e,j=f.makeBoundingBox(c.boundingBox?c.boundingBox:{x1:0,y1:0,w:d.width(),h:d.height()});if(g.elementOrCollection(c.roots))a=c.roots;else if(g.array(c.roots)){for(var k=[],l=0;l<c.roots.length;l++){var m=c.roots[l],n=d.getElementById(m);k.push(n)}a=d.collection(k)}else if(g.string(c.roots))a=d.$(c.roots);else if(c.directed)a=h.roots();else{for(var o=[],p=h;p.length>0;){var q=d.collection();e.bfs({roots:p[0],visit:function(a,b,c,d,e){q=q.add(c)},directed:!1}),p=p.not(q),o.push(q)}a=d.collection();for(var l=0;l<o.length;l++){var r=o[l],s=r.maxDegree(!1),t=r.filter(function(){return this.degree(!1)===s});a=a.add(t)}}var u=[],v={},w={},x={},y={},z={};i.bfs({roots:a,directed:c.directed,visit:function(a,b,c,d,e){var f=this[0],g=f.id();if(u[b]||(u[b]=[]),u[b].push(f),v[g]=!0,w[g]=b,x[g]=e,y[g]=d,e){var h=e.id(),i=z[h]=z[h]||[];i.push(c)}}});for(var A=[],l=0;l<h.length;l++){var n=h[l];v[n.id()]||A.push(n)}for(var B=3*A.length,C=0;0!==A.length&&B>C;){
for(var D=A.shift(),E=D.neighborhood().nodes(),F=!1,l=0;l<E.length;l++){var G=w[E[l].id()];if(void 0!==G){u[G].push(D),F=!0;break}}F||A.push(D),C++}for(;0!==A.length;){var D=A.shift(),F=!1;F||(0===u.length&&u.push([]),u[0].push(D))}var H=function(){for(var a=0;a<u.length;a++)for(var b=u[a],c=0;c<b.length;c++){var d=b[c];d._private.scratch.breadthfirst={depth:a,index:c}}};H();for(var I=function(a){for(var b,c=a.connectedEdges(function(){return this.data("target")===a.id()}),d=a._private.scratch.breadthfirst,e=0,f=0;f<c.length;f++){var g=c[f],h=g.source()[0],i=h._private.scratch.breadthfirst;d.depth<=i.depth&&e<i.depth&&(e=i.depth,b=h)}return b},J=0;J<c.maximalAdjustments;J++){for(var K=u.length,L=[],l=0;K>l;l++)for(var G=u[l],M=G.length,N=0;M>N;N++){var n=G[N],O=n._private.scratch.breadthfirst,P=I(n);P&&(O.intEle=P,L.push(n))}for(var l=0;l<L.length;l++){var n=L[l],O=n._private.scratch.breadthfirst,P=O.intEle,Q=P._private.scratch.breadthfirst;u[O.depth].splice(O.index,1);for(var R=Q.depth+1;R>u.length-1;)u.push([]);u[R].push(n),O.depth=R,O.index=u[R].length-1}H()}var S=0;if(c.avoidOverlap){for(var l=0;l<h.length;l++){var T=h[l],U=T.boundingBox(),V=U.w,W=U.h;S=Math.max(S,V,W)}S*=c.spacingFactor}for(var X={},Y=function(a){if(X[a.id()])return X[a.id()];for(var b=a._private.scratch.breadthfirst.depth,c=a.neighborhood().nodes().not(":parent").intersection(h),d=0,e=0,f=0;f<c.length;f++){var g=c[f],i=g._private.scratch.breadthfirst,j=i.index,k=i.depth,l=u[k].length;(b>k||0===b)&&(d+=j/l,e++)}return e=Math.max(1,e),d/=e,0===e&&(d=void 0),X[a.id()]=d,d},Z=function(a,b){var c=Y(a),d=Y(b);return c-d},$=0;3>$;$++){for(var l=0;l<u.length;l++)u[l]=u[l].sort(Z);H()}for(var _=0,l=0;l<u.length;l++)_=Math.max(u[l].length,_);for(var aa={x:j.x1+j.w/2,y:j.x1+j.h/2},ba=function(a,b){var d=a._private.scratch.breadthfirst,e=d.depth,f=d.index,g=u[e].length,h=Math.max(j.w/(g+1),S),i=Math.max(j.h/(u.length+1),S),k=Math.min(j.w/2/u.length,j.h/2/u.length);if(k=Math.max(k,S),c.circle){if(c.circle){var l=k*e+k-(u.length>0&&u[0].length<=3?k/2:0),m=2*Math.PI/u[e].length*f;return 0===e&&1===u[0].length&&(l=1),{x:aa.x+l*Math.cos(m),y:aa.y+l*Math.sin(m)}}return{x:aa.x+(f+1-(g+1)/2)*h,y:(e+1)*i}}var n={x:aa.x+(f+1-(g+1)/2)*h,y:(e+1)*i};return b?n:n},ca={},l=u.length-1;l>=0;l--)for(var G=u[l],N=0;N<G.length;N++){var D=G[N];ca[D.id()]=ba(D,l===u.length-1)}return h.layoutPositions(this,c,function(){return ca[this.id()]}),this},b.exports=d},{"../../is":83,"../../math":85,"../../util":100}],49:[function(a,b,c){"use strict";function d(a){this.options=e.extend({},h,a)}var e=a("../../util"),f=a("../../math"),g=a("../../is"),h={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};d.prototype.run=function(){var a=this.options,b=a,c=a.cy,d=b.eles,e=void 0!==b.counterclockwise?!b.counterclockwise:b.clockwise,h=d.nodes().not(":parent");b.sort&&(h=h.sort(b.sort));for(var i,j=f.makeBoundingBox(b.boundingBox?b.boundingBox:{x1:0,y1:0,w:c.width(),h:c.height()}),k={x:j.x1+j.w/2,y:j.y1+j.h/2},l=void 0===b.sweep?2*Math.PI-2*Math.PI/h.length:b.sweep,m=l/Math.max(1,h.length-1),n=0,o=0;o<h.length;o++){var p=h[o],q=p.boundingBox(),r=q.w,s=q.h;n=Math.max(n,r,s)}if(i=g.number(b.radius)?b.radius:h.length<=1?0:Math.min(j.h,j.w)/2-n,h.length>1&&b.avoidOverlap){n*=1.75;var t=Math.cos(m)-Math.cos(0),u=Math.sin(m)-Math.sin(0),v=Math.sqrt(n*n/(t*t+u*u));i=Math.max(v,i)}var w=function(a,c){var d=b.startAngle+a*m*(e?1:-1),f=i*Math.cos(d),g=i*Math.sin(d),h={x:k.x+f,y:k.y+g};return h};return h.layoutPositions(this,b,w),this},b.exports=d},{"../../is":83,"../../math":85,"../../util":100}],50:[function(a,b,c){"use strict";function d(a){this.options=e.extend({},g,a)}var e=a("../../util"),f=a("../../math"),g={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,height:void 0,width:void 0,concentric:function(a){return a.degree()},levelWidth:function(a){return a.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};d.prototype.run=function(){for(var a=this.options,b=a,c=void 0!==b.counterclockwise?!b.counterclockwise:b.clockwise,d=a.cy,e=b.eles,g=e.nodes().not(":parent"),h=f.makeBoundingBox(b.boundingBox?b.boundingBox:{x1:0,y1:0,w:d.width(),h:d.height()}),i={x:h.x1+h.w/2,y:h.y1+h.h/2},j=[],k=b.startAngle,l=0,m=0;m<g.length;m++){var n,o=g[m];n=b.concentric.apply(o,[o]),j.push({value:n,node:o}),o._private.scratch.concentric=n}g.updateStyle();for(var m=0;m<g.length;m++){var o=g[m],p=o.boundingBox();l=Math.max(l,p.w,p.h)}j.sort(function(a,b){return b.value-a.value});for(var q=b.levelWidth(g),r=[[]],s=r[0],m=0;m<j.length;m++){var t=j[m];if(s.length>0){var u=Math.abs(s[0].value-t.value);u>=q&&(s=[],r.push(s))}s.push(t)}var v=l+b.minNodeSpacing;if(!b.avoidOverlap){var w=r.length>0&&r[0].length>1,x=Math.min(h.w,h.h)/2-v,y=x/(r.length+w?1:0);v=Math.min(v,y)}for(var z=0,m=0;m<r.length;m++){var A=r[m],B=void 0===b.sweep?2*Math.PI-2*Math.PI/A.length:b.sweep,C=A.dTheta=B/Math.max(1,A.length-1);if(A.length>1&&b.avoidOverlap){var D=Math.cos(C)-Math.cos(0),E=Math.sin(C)-Math.sin(0),F=Math.sqrt(v*v/(D*D+E*E));z=Math.max(F,z)}A.r=z,z+=v}if(b.equidistant){for(var G=0,z=0,m=0;m<r.length;m++){var A=r[m],H=A.r-z;G=Math.max(G,H)}z=0;for(var m=0;m<r.length;m++){var A=r[m];0===m&&(z=A.r),A.r=z,z+=G}}for(var I={},m=0;m<r.length;m++)for(var A=r[m],C=A.dTheta,z=A.r,J=0;J<A.length;J++){var t=A[J],k=b.startAngle+(c?1:-1)*C*J,K={x:i.x+z*Math.cos(k),y:i.y+z*Math.sin(k)};I[t.node.id()]=K}return g.layoutPositions(this,b,function(){var a=this.id();return I[a]}),this},b.exports=d},{"../../math":85,"../../util":100}],51:[function(a,b,c){"use strict";function d(a){this.options=f.extend({},j,a),this.options.layout=this}var e,f=a("../../util"),g=a("../../math"),h=a("../../thread"),i=a("../../is"),j={ready:function(){},stop:function(){},animate:!0,animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,randomize:!1,componentSpacing:100,nodeRepulsion:function(a){return 4e5},nodeOverlap:10,idealEdgeLength:function(a){return 10},edgeElasticity:function(a){return 100},nestingFactor:5,gravity:80,numIter:1e3,initialTemp:200,coolingFactor:.95,minTemp:1,useMultitasking:!0};d.prototype.run=function(){var a=this.options,b=a.cy,c=this,d=this.thread;d&&!d.stopped()||(d=this.thread=h({disabled:!a.useMultitasking})),c.stopped=!1,c.trigger({type:"layoutstart",layout:c}),e=!0===a.debug;var g=k(b,c,a);e&&n(g),a.randomize&&o(g,b);var i=Date.now(),j=!1,l=function(c){c=c||{},j&&!c.next||!c.force&&Date.now()-i<a.animationThreshold||(j=!0,f.requestAnimationFrame(function(){p(g,b,a),!0===a.fit&&b.fit(a.padding),j=!1,c.next&&c.next()}))};d.on("message",function(a){var b=a.message;g.layoutNodes=b,l()}),d.pass({layoutInfo:g,options:{animate:a.animate,refresh:a.refresh,componentSpacing:a.componentSpacing,nodeOverlap:a.nodeOverlap,nestingFactor:a.nestingFactor,gravity:a.gravity,numIter:a.numIter,initialTemp:a.initialTemp,coolingFactor:a.coolingFactor,minTemp:a.minTemp}}).run(function(a){var b,c=a.layoutInfo,d=a.options,e=!1,f=function(a,b,c){g(a,b),k(a,b),l(a,b),m(a,b),n(a,b)},g=function(a,b){for(var c=0;c<a.graphSet.length;c++)for(var d=a.graphSet[c],e=d.length,f=0;e>f;f++)for(var g=a.layoutNodes[a.idToIndex[d[f]]],i=f+1;e>i;i++){var j=a.layoutNodes[a.idToIndex[d[i]]];h(g,j,a,b)}},h=function(a,b,c,d){var e=a.cmptId,f=b.cmptId;if(e===f||c.isCompound){var g=b.positionX-a.positionX,h=b.positionY-a.positionY;if(0!==g||0!==h){var k=i(a,b,g,h);if(k>0)var l=d.nodeOverlap*k,m=Math.sqrt(g*g+h*h),n=l*g/m,o=l*h/m;else var p=j(a,g,h),q=j(b,-1*g,-1*h),r=q.x-p.x,s=q.y-p.y,t=r*r+s*s,m=Math.sqrt(t),l=(a.nodeRepulsion+b.nodeRepulsion)/t,n=l*r/m,o=l*s/m;a.isLocked||(a.offsetX-=n,a.offsetY-=o),b.isLocked||(b.offsetX+=n,b.offsetY+=o)}}},i=function(a,b,c,d){if(c>0)var e=a.maxX-b.minX;else var e=b.maxX-a.minX;if(d>0)var f=a.maxY-b.minY;else var f=b.maxY-a.minY;return e>=0&&f>=0?Math.sqrt(e*e+f*f):0},j=function(a,b,c){var d=a.positionX,e=a.positionY,f=a.height||1,g=a.width||1,h=c/b,i=f/g,j={};do{if(0===b&&c>0){j.x=d,j.y=e+f/2;break}if(0===b&&0>c){j.x=d,j.y=e+f/2;break}if(b>0&&h>=-1*i&&i>=h){j.x=d+g/2,j.y=e+g*c/2/b;break}if(0>b&&h>=-1*i&&i>=h){j.x=d-g/2,j.y=e-g*c/2/b;break}if(c>0&&(-1*i>=h||h>=i)){j.x=d+f*b/2/c,j.y=e+f/2;break}if(0>c&&(-1*i>=h||h>=i)){j.x=d-f*b/2/c,j.y=e-f/2;break}}while(!1);return j},k=function(a,b){for(var c=0;c<a.edgeSize;c++){var d=a.layoutEdges[c],e=a.idToIndex[d.sourceId],f=a.layoutNodes[e],g=a.idToIndex[d.targetId],h=a.layoutNodes[g],i=h.positionX-f.positionX,k=h.positionY-f.positionY;if(0===i&&0===k)return;var l=j(f,i,k),m=j(h,-1*i,-1*k),n=m.x-l.x,o=m.y-l.y,p=Math.sqrt(n*n+o*o),q=Math.pow(d.idealLength-p,2)/d.elasticity;if(0!==p)var r=q*n/p,s=q*o/p;else var r=0,s=0;f.isLocked||(f.offsetX+=r,f.offsetY+=s),h.isLocked||(h.offsetX-=r,h.offsetY-=s)}},l=function(a,b){for(var c=1,d=0;d<a.graphSet.length;d++){var e=a.graphSet[d],f=e.length;if(0===d)var g=a.clientHeight/2,h=a.clientWidth/2;else var i=a.layoutNodes[a.idToIndex[e[0]]],j=a.layoutNodes[a.idToIndex[i.parentId]],g=j.positionX,h=j.positionY;for(var k=0;f>k;k++){var l=a.layoutNodes[a.idToIndex[e[k]]];if(!l.isLocked){var m=g-l.positionX,n=h-l.positionY,o=Math.sqrt(m*m+n*n);if(o>c){var p=b.gravity*m/o,q=b.gravity*n/o;l.offsetX+=p,l.offsetY+=q}}}}},m=function(a,b){var c=[],d=0,e=-1;for(c.push.apply(c,a.graphSet[0]),e+=a.graphSet[0].length;e>=d;){var f=c[d++],g=a.idToIndex[f],h=a.layoutNodes[g],i=h.children;if(0<i.length&&!h.isLocked){for(var j=h.offsetX,k=h.offsetY,l=0;l<i.length;l++){var m=a.layoutNodes[a.idToIndex[i[l]]];m.offsetX+=j,m.offsetY+=k,c[++e]=i[l]}h.offsetX=0,h.offsetY=0}}},n=function(a,b){for(var c=0;c<a.nodeSize;c++){var d=a.layoutNodes[c];0<d.children.length&&(d.maxX=void 0,d.minX=void 0,d.maxY=void 0,d.minY=void 0)}for(var c=0;c<a.nodeSize;c++){var d=a.layoutNodes[c];if(!(0<d.children.length||d.isLocked)){var e=o(d.offsetX,d.offsetY,a.temperature);d.positionX+=e.x,d.positionY+=e.y,d.offsetX=0,d.offsetY=0,d.minX=d.positionX-d.width,d.maxX=d.positionX+d.width,d.minY=d.positionY-d.height,d.maxY=d.positionY+d.height,p(d,a)}}for(var c=0;c<a.nodeSize;c++){var d=a.layoutNodes[c];0<d.children.length&&!d.isLocked&&(d.positionX=(d.maxX+d.minX)/2,d.positionY=(d.maxY+d.minY)/2,d.width=d.maxX-d.minX,d.height=d.maxY-d.minY)}},o=function(a,b,c){var d=Math.sqrt(a*a+b*b);if(d>c)var e={x:c*a/d,y:c*b/d};else var e={x:a,y:b};return e},p=function(a,b){var c=a.parentId;if(null!=c){var d=b.layoutNodes[b.idToIndex[c]],e=!1;return(null==d.maxX||a.maxX+d.padRight>d.maxX)&&(d.maxX=a.maxX+d.padRight,e=!0),(null==d.minX||a.minX-d.padLeft<d.minX)&&(d.minX=a.minX-d.padLeft,e=!0),(null==d.maxY||a.maxY+d.padBottom>d.maxY)&&(d.maxY=a.maxY+d.padBottom,e=!0),(null==d.minY||a.minY-d.padTop<d.minY)&&(d.minY=a.minY-d.padTop,e=!0),e?p(d,b):void 0}},q=function(a,b){for(var d=c.layoutNodes,e=[],f=0;f<d.length;f++){var g=d[f],h=g.cmptId,i=e[h]=e[h]||[];i.push(g)}for(var j=0,f=0;f<e.length;f++){var k=e[f];if(k){k.x1=1/0,k.x2=-(1/0),k.y1=1/0,k.y2=-(1/0);for(var l=0;l<k.length;l++){var m=k[l];k.x1=Math.min(k.x1,m.positionX-m.width/2),k.x2=Math.max(k.x2,m.positionX+m.width/2),k.y1=Math.min(k.y1,m.positionY-m.height/2),k.y2=Math.max(k.y2,m.positionY+m.height/2)}k.w=k.x2-k.x1,k.h=k.y2-k.y1,j+=k.w*k.h}}e.sort(function(a,b){return b.w*b.h-a.w*a.h});for(var n=0,o=0,p=0,q=0,r=Math.sqrt(j)*c.clientWidth/c.clientHeight,f=0;f<e.length;f++){var k=e[f];if(k){for(var l=0;l<k.length;l++){var m=k[l];m.isLocked||(m.positionX+=n,m.positionY+=o)}n+=k.w+b.componentSpacing,p+=k.w+b.componentSpacing,q=Math.max(q,k.h),p>r&&(o+=q+b.componentSpacing,n=0,p=0,q=0)}}},r=function(a){return!e&&(f(c,d,a),c.temperature=c.temperature*d.coolingFactor,!(c.temperature<d.minTemp))},s=0;do{for(var t=0;t<d.refresh&&s<d.numIter;){var b=r(s);if(!b)break;t++,s++}d.animate&&broadcast(c.layoutNodes)}while(b&&s+1<d.numIter);return q(c,d),c}).then(function(a){g.layoutNodes=a.layoutNodes,d.stop(),m()});var m=function(){l({force:!0,next:function(){c.one("layoutstop",a.stop),c.trigger({type:"layoutstop",layout:c})}})};return this},d.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.trigger("layoutstop"),this},d.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var k=function(a,b,c){for(var d=c.eles.edges(),e=c.eles.nodes(),f={isCompound:a.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:e.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:d.size(),temperature:c.initialTemp,clientWidth:a.width(),clientHeight:a.width(),boundingBox:g.makeBoundingBox(c.boundingBox?c.boundingBox:{x1:0,y1:0,w:a.width(),h:a.height()})},h=c.eles.components(),j={},k=0;k<h.length;k++)for(var m=h[k],n=0;n<m.length;n++){var o=m[n];j[o.id()]=k}for(var k=0;k<f.nodeSize;k++){var p=e[k],q=p.boundingBox(),r={};r.isLocked=p.locked(),r.id=p.data("id"),r.parentId=p.data("parent"),r.cmptId=j[p.id()],r.children=[],r.positionX=p.position("x"),r.positionY=p.position("y"),r.offsetX=0,r.offsetY=0,r.height=q.w,r.width=q.h,r.maxX=r.positionX+r.width/2,r.minX=r.positionX-r.width/2,r.maxY=r.positionY+r.height/2,r.minY=r.positionY-r.height/2,r.padLeft=parseFloat(p.style("padding")),r.padRight=parseFloat(p.style("padding")),r.padTop=parseFloat(p.style("padding")),r.padBottom=parseFloat(p.style("padding")),r.nodeRepulsion=i.fn(c.nodeRepulsion)?c.nodeRepulsion.call(p,p):c.nodeRepulsion,f.layoutNodes.push(r),f.idToIndex[r.id]=k}for(var s=[],t=0,u=-1,v=[],k=0;k<f.nodeSize;k++){var p=f.layoutNodes[k],w=p.parentId;null!=w?f.layoutNodes[f.idToIndex[w]].children.push(p.id):(s[++u]=p.id,v.push(p.id))}for(f.graphSet.push(v);u>=t;){var x=s[t++],y=f.idToIndex[x],o=f.layoutNodes[y],z=o.children;if(z.length>0){f.graphSet.push(z);for(var k=0;k<z.length;k++)s[++u]=z[k]}}for(var k=0;k<f.graphSet.length;k++)for(var A=f.graphSet[k],n=0;n<A.length;n++){var B=f.idToIndex[A[n]];f.indexToGraph[B]=k}for(var k=0;k<f.edgeSize;k++){var C=d[k],D={};D.id=C.data("id"),D.sourceId=C.data("source"),D.targetId=C.data("target");var E=i.fn(c.idealEdgeLength)?c.idealEdgeLength.call(C,C):c.idealEdgeLength,F=i.fn(c.edgeElasticity)?c.edgeElasticity.call(C,C):c.edgeElasticity,G=f.idToIndex[D.sourceId],H=f.idToIndex[D.targetId],I=f.indexToGraph[G],J=f.indexToGraph[H];if(I!=J){for(var K=l(D.sourceId,D.targetId,f),L=f.graphSet[K],M=0,r=f.layoutNodes[G];-1===L.indexOf(r.id);)r=f.layoutNodes[f.idToIndex[r.parentId]],M++;for(r=f.layoutNodes[H];-1===L.indexOf(r.id);)r=f.layoutNodes[f.idToIndex[r.parentId]],M++;E*=M*c.nestingFactor}D.idealLength=E,D.elasticity=F,f.layoutEdges.push(D)}return f},l=function(a,b,c){var d=m(a,b,0,c);return 2>d.count?0:d.graph},m=function(a,b,c,d){var e=d.graphSet[c];if(-1<e.indexOf(a)&&-1<e.indexOf(b))return{count:2,graph:c};for(var f=0,g=0;g<e.length;g++){var h=e[g],i=d.idToIndex[h],j=d.layoutNodes[i].children;if(0!==j.length){var k=d.indexToGraph[d.idToIndex[j[0]]],l=m(a,b,k,d);if(0!==l.count){if(1!==l.count)return l;if(f++,2===f)break}}}return{count:f,graph:c}},n=function(a){if(e){console.debug("layoutNodes:");for(var b=0;b<a.nodeSize;b++){var c=a.layoutNodes[b],d="\nindex: "+b+"\nId: "+c.id+"\nChildren: "+c.children.toString()+"\nparentId: "+c.parentId+"\npositionX: "+c.positionX+"\npositionY: "+c.positionY+"\nOffsetX: "+c.offsetX+"\nOffsetY: "+c.offsetY+"\npadLeft: "+c.padLeft+"\npadRight: "+c.padRight+"\npadTop: "+c.padTop+"\npadBottom: "+c.padBottom;console.debug(d)}console.debug("idToIndex");for(var b in a.idToIndex)console.debug("Id: "+b+"\nIndex: "+a.idToIndex[b]);console.debug("Graph Set");for(var f=a.graphSet,b=0;b<f.length;b++)console.debug("Set : "+b+": "+f[b].toString());for(var d="IndexToGraph",b=0;b<a.indexToGraph.length;b++)d+="\nIndex : "+b+" Graph: "+a.indexToGraph[b];console.debug(d),d="Layout Edges";for(var b=0;b<a.layoutEdges.length;b++){var g=a.layoutEdges[b];d+="\nEdge Index: "+b+" ID: "+g.id+" SouceID: "+g.sourceId+" TargetId: "+g.targetId+" Ideal Length: "+g.idealLength}console.debug(d),d="nodeSize: "+a.nodeSize,d+="\nedgeSize: "+a.edgeSize,d+="\ntemperature: "+a.temperature,console.debug(d)}},o=function(a,b){for(var c=a.clientWidth,d=a.clientHeight,e=0;e<a.nodeSize;e++){var f=a.layoutNodes[e];0!==f.children.length||f.isLocked||(f.positionX=Math.random()*c,f.positionY=Math.random()*d)}},p=function(a,b,c){var d=c.layout,e=c.eles.nodes(),f=a.boundingBox,g={x1:1/0,x2:-(1/0),y1:1/0,y2:-(1/0)};c.boundingBox&&(e.forEach(function(b){var c=a.layoutNodes[a.idToIndex[b.data("id")]];g.x1=Math.min(g.x1,c.positionX),g.x2=Math.max(g.x2,c.positionX),g.y1=Math.min(g.y1,c.positionY),g.y2=Math.max(g.y2,c.positionY)}),g.w=g.x2-g.x1,g.h=g.y2-g.y1),e.positions(function(b,d){var e=a.layoutNodes[a.idToIndex[d.data("id")]];if(c.boundingBox){var h=(e.positionX-g.x1)/g.w,i=(e.positionY-g.y1)/g.h;return{x:f.x1+h*f.w,y:f.y1+i*f.h}}return{x:e.positionX,y:e.positionY}}),!0!==a.ready&&(a.ready=!0,d.one("layoutready",c.ready),d.trigger({type:"layoutready",layout:this}))};b.exports=d},{"../../is":83,"../../math":85,"../../thread":98,"../../util":100}],52:[function(a,b,c){"use strict";function d(a){this.options=e.extend({},g,a)}var e=a("../../util"),f=a("../../math"),g={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:function(a){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};d.prototype.run=function(){var a=this.options,b=a,c=a.cy,d=b.eles,e=d.nodes().not(":parent");b.sort&&(e=e.sort(b.sort));var g=f.makeBoundingBox(b.boundingBox?b.boundingBox:{x1:0,y1:0,w:c.width(),h:c.height()});if(0===g.h||0===g.w)e.layoutPositions(this,b,function(){return{x:g.x1,y:g.y1}});else{var h=e.size(),i=Math.sqrt(h*g.h/g.w),j=Math.round(i),k=Math.round(g.w/g.h*i),l=function(a){if(null==a)return Math.min(j,k);var b=Math.min(j,k);b==j?j=a:k=a},m=function(a){if(null==a)return Math.max(j,k);var b=Math.max(j,k);b==j?j=a:k=a},n=b.rows,o=null!=b.cols?b.cols:b.columns;if(null!=n&&null!=o)j=n,k=o;else if(null!=n&&null==o)j=n,k=Math.ceil(h/j);else if(null==n&&null!=o)k=o,j=Math.ceil(h/k);else if(k*j>h){var p=l(),q=m();(p-1)*q>=h?l(p-1):(q-1)*p>=h&&m(q-1)}else for(;h>k*j;){var p=l(),q=m();(q+1)*p>=h?m(q+1):l(p+1)}var r=g.w/k,s=g.h/j;if(b.condense&&(r=0,s=0),b.avoidOverlap)for(var t=0;t<e.length;t++){var u=e[t],v=u._private.position;null!=v.x&&null!=v.y||(v.x=0,v.y=0);var w=u.boundingBox(),x=b.avoidOverlapPadding,y=w.w+x,z=w.h+x;r=Math.max(r,y),s=Math.max(s,z)}for(var A={},B=function(a,b){return!!A["c-"+a+"-"+b]},C=function(a,b){A["c-"+a+"-"+b]=!0},D=0,E=0,F=function(){E++,E>=k&&(E=0,D++)},G={},t=0;t<e.length;t++){var u=e[t],H=b.position(u);if(H&&(void 0!==H.row||void 0!==H.col)){var v={row:H.row,col:H.col};if(void 0===v.col)for(v.col=0;B(v.row,v.col);)v.col++;else if(void 0===v.row)for(v.row=0;B(v.row,v.col);)v.row++;G[u.id()]=v,C(v.row,v.col)}}var I=function(a,b){var c,d;if(b.locked()||b.isParent())return!1;var e=G[b.id()];if(e)c=e.col*r+r/2+g.x1,d=e.row*s+s/2+g.y1;else{for(;B(D,E);)F();c=E*r+r/2+g.x1,d=D*s+s/2+g.y1,C(D,E),F()}return{x:c,y:d}};e.layoutPositions(this,b,I)}return this},b.exports=d},{"../../math":85,"../../util":100}],53:[function(a,b,c){"use strict";b.exports=[{name:"breadthfirst",impl:a("./breadthfirst")},{name:"circle",impl:a("./circle")},{name:"concentric",impl:a("./concentric")},{name:"cose",impl:a("./cose")},{name:"grid",impl:a("./grid")},{name:"null",impl:a("./null")},{name:"preset",impl:a("./preset")},{name:"random",impl:a("./random")}]},{"./breadthfirst":48,"./circle":49,"./concentric":50,"./cose":51,"./grid":52,"./null":54,"./preset":55,"./random":56}],54:[function(a,b,c){"use strict";function d(a){this.options=e.extend({},f,a)}var e=a("../../util"),f={ready:function(){},stop:function(){}};d.prototype.run=function(){var a=this.options,b=a.eles,c=this;return a.cy,c.trigger("layoutstart"),b.nodes().positions(function(){return{x:0,y:0}}),c.one("layoutready",a.ready),c.trigger("layoutready"),c.one("layoutstop",a.stop),c.trigger("layoutstop"),this},d.prototype.stop=function(){return this},b.exports=d},{"../../util":100}],55:[function(a,b,c){"use strict";function d(a){this.options=e.extend({},g,a)}var e=a("../../util"),f=a("../../is"),g={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};d.prototype.run=function(){function a(a){if(null==b.positions)return null;if(e)return b.positions.apply(a,[a]);var c=b.positions[a._private.data.id];return null==c?null:c}var b=this.options,c=b.eles,d=c.nodes(),e=f.fn(b.positions);return d.layoutPositions(this,b,function(b,c){var d=a(c);return!c.locked()&&null!=d&&d}),this},b.exports=d},{"../../is":83,"../../util":100}],56:[function(a,b,c){"use strict";function d(a){this.options=e.extend({},g,a)}var e=a("../../util"),f=a("../../math"),g={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};d.prototype.run=function(){var a=this.options,b=a.cy,c=a.eles,d=c.nodes().not(":parent"),e=f.makeBoundingBox(a.boundingBox?a.boundingBox:{x1:0,y1:0,w:b.width(),h:b.height()}),g=function(a,b){return{x:e.x1+Math.round(Math.random()*e.w),y:e.y1+Math.round(Math.random()*e.h)}};return d.layoutPositions(this,a,g),this},b.exports=d},{"../../math":85,"../../util":100}],57:[function(a,b,c){"use strict";var d=a("../../../math"),e=a("../../../is"),f=a("../../../util"),g={};g.arrowShapeWidth=.3,g.registerArrowShapes=function(){var a=this.arrowShapes={},b=this,c=function(a,b,c,d,e,f){var g=e.x-c/2-f,h=e.x+c/2+f,i=e.y-c/2-f,j=e.y+c/2+f,k=a>=g&&h>=a&&b>=i&&j>=b;return k},g=function(a,b,c,d,e){var f=a*Math.cos(d)-b*Math.sin(d),g=a*Math.sin(d)+b*Math.cos(d),h=f*c,i=g*c,j=h+e.x,k=i+e.y;return{x:j,y:k}},h=function(a,b,c,d){for(var e=[],f=0;f<a.length;f+=2){var h=a[f],i=a[f+1];e.push(g(h,i,b,c,d))}return e},i=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];b.push(d.x,d.y)}return b},j=function(g,j){e.string(j)&&(j=a[j]),a[g]=f.extend({name:g,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(a,b,c,e,f,g){var j=i(h(this.points,c+2*g,e,f)),k=d.pointInsidePolygonPoints(a,b,j);return k},roughCollide:c,draw:function(a,c,d,e){var f=h(this.points,c,d,e);b.arrowShapeImpl("polygon")(a,f)},spacing:function(a){return 0},gap:function(a){return 2*a.pstyle("width").pfValue}},j)};j("none",{collide:f.falsify,roughCollide:f.falsify,draw:f.noop,spacing:f.zeroify,gap:f.zeroify}),j("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),j("arrow","triangle"),j("triangle-backcurve",{points:a.triangle.points,controlPoint:[0,-.15],roughCollide:c,draw:function(a,c,d,e){var f=h(this.points,c,d,e),i=this.controlPoint,j=g(i[0],i[1],c,d,e);b.arrowShapeImpl(this.name)(a,f,j)},gap:function(a){return a.pstyle("width").pfValue}}),j("triangle-tee",{points:[-.15,-.3,0,0,.15,-.3,-.15,-.3],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(a,b,c,e,f,g){var j=i(h(this.points,c+2*g,e,f)),k=i(h(this.pointsTee,c+2*g,e,f)),l=d.pointInsidePolygonPoints(a,b,j)||d.pointInsidePolygonPoints(a,b,k);return l},draw:function(a,c,d,e){var f=h(this.points,c,d,e),g=h(this.pointsTee,c,d,e);b.arrowShapeImpl(this.name)(a,f,g)}}),j("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(a){return a.pstyle("width").pfValue}}),j("circle",{radius:.15,collide:function(a,b,c,d,e,f){var g=e,h=Math.pow(g.x-a,2)+Math.pow(g.y-b,2)<=Math.pow((c+2*f)*this.radius,2);return h},draw:function(a,c,d,e){b.arrowShapeImpl(this.name)(a,e.x,e.y,this.radius*c)},spacing:function(a){return b.getArrowWidth(a.pstyle("width").pfValue)*this.radius}}),j("inhibitor",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(a){return 1},gap:function(a){return 1}}),j("tee","inhibitor"),j("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),j("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(a){return a.pstyle("width").pfValue}})},b.exports=g},{"../../../is":83,"../../../math":85,"../../../util":100}],58:[function(a,b,c){"use strict";function d(a,b,c){for(var d=function(a,b,c,d){return e.qbezierAt(a,b,c,d)},f=b._private,g=f.rstyle.bezierPts,h=0;h<a.bezierProjPcts.length;h++){var i=a.bezierProjPcts[h];g.push({x:d(c[0],c[2],c[4],i),y:d(c[1],c[3],c[5],i)})}}var e=a("../../../math"),f=a("../../../is"),g=a("../../../util"),h=a("../../../collection/zsort"),i={};i.registerCalculationListeners=function(){var a=this.cy,b=a.collection(),c=this,d=function(a,c){b.merge(a);for(var d=0;d<a.length;d++){var e=a[d],f=e._private,g=f.rstyle;g.clean=!1,f.bbCache=null;var h=g.dirtyEvents=g.dirtyEvents||{length:0};h[c.type]||(h[c.type]=!0,h.length++)}};c.binder(a).on("position.* style.* free.*","node",function(b){var c=b.cyTarget;if(d(c,b),d(c.connectedEdges(),b),a.hasCompoundNodes()){var e=c.parents();d(e,b),d(e.connectedEdges(),b)}}).on("add.* background.*","node",function(a){var b=a.cyTarget;d(b,a)}).on("add.* style.*","edge",function(a){var b=a.cyTarget;d(b,a),d(b.parallelEdges(),a)}).on("remove.*","edge",function(a){for(var b=a.cyTarget,c=b.parallelEdges(),e=0;e<c.length;e++){var f=c[e];f.removed()||d(f,a)}});var e=function(d){if(d){var e=c.onUpdateEleCalcsFns;if(e)for(var f=0;f<e.length;f++){var g=e[f];g(d,b)}c.recalculateRenderedStyle(b,!1);for(var f=0;f<b.length;f++)b[f]._private.rstyle.dirtyEvents=null;b=a.collection()}};c.beforeRender(e,c.beforeRenderPriorities.eleCalcs)},i.onUpdateEleCalcs=function(a){var b=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];b.push(a)},i.recalculateRenderedStyle=function(a,b){var c=[],d=[];if(!this.destroyed){void 0===b&&(b=!0);for(var e=0;e<a.length;e++){var f=a[e],g=f._private,h=g.rstyle;b&&h.clean||f.removed()||("nodes"===g.group?d.push(f):c.push(f),h.clean=!0)}for(var e=0;e<d.length;e++){var f=d[e],g=f._private,h=g.rstyle,i=g.position;this.recalculateNodeLabelProjection(f),h.nodeX=i.x,h.nodeY=i.y,h.nodeW=f.pstyle("width").pfValue,h.nodeH=f.pstyle("height").pfValue}this.recalculateEdgeProjections(c);for(var e=0;e<c.length;e++){var f=c[e],g=f._private,h=g.rstyle,j=g.rscratch;this.recalculateEdgeLabelProjections(f),h.srcX=j.arrowStartX,h.srcY=j.arrowStartY,h.tgtX=j.arrowEndX,h.tgtY=j.arrowEndY,h.midX=j.midX,h.midY=j.midY,h.labelAngle=j.labelAngle,h.sourceLabelAngle=j.sourceLabelAngle,h.targetLabelAngle=j.targetLabelAngle}}},i.projectIntoViewport=function(a,b){var c=this.findContainerClientCoords(),d=c[0],e=c[1],f=a-d,g=b-e;return f-=this.cy.pan().x,g-=this.cy.pan().y,f/=this.cy.zoom(),g/=this.cy.zoom(),[f,g]},i.findContainerClientCoords=function(){var a=this.container,b=this.containerBB=this.containerBB||a.getBoundingClientRect();return[b.left,b.top,b.right-b.left,b.bottom-b.top]},i.invalidateContainerClientCoordsCache=function(){this.containerBB=null},i.findNearestElement=function(a,b,c,d){return this.findNearestElements(a,b,c,d)[0]},i.findNearestElements=function(a,b,c,d){function f(a,b){if(a.isNode()){if(m)return;m=a,q.push(a)}if(a.isEdge()&&(null==b||w>b))if(l){if(l.pstyle("z-index").value===a.pstyle("z-index").value)for(var c=0;c<q.length;c++)if(q[c].isEdge()){q[c]=a,l=a,w=null!=b?b:w;break}}else q.push(a),l=a,w=null!=b?b:w}function h(d){var e=d._private;if("no"!==d.pstyle("events").strValue){var g=d.outerWidth()+2*u,h=d.outerHeight()+2*u,i=g/2,j=h/2,k=e.position;if(k.x-i<=a&&a<=k.x+i&&k.y-j<=b&&b<=k.y+j){var l=!c||d.visible()&&!d.transparent();if(c&&!l)return;var m=o.nodeShapes[n.getNodeShape(d)];if(m.checkPoint(a,b,0,g,h,k.x,k.y))return f(d,0),!0}}}function i(d){var g=d._private;if("no"!==d.pstyle("events").strValue){var i,j,k=g.rscratch,l=d.pstyle("width").pfValue/2+t,m=l*l,p=2*l,r=g.source,u=g.target,v=!1,w=function(){if(void 0!==j)return j;if(!c)return j=!0,!0;var a=d.visible()&&!d.transparent();return a?(j=!0,!0):(j=!1,!1)};if("segments"===k.edgeType||"straight"===k.edgeType||"haystack"===k.edgeType){for(var x=k.allpts,y=0;y+3<x.length;y+=2)if((v=e.inLineVicinity(a,b,x[y],x[y+1],x[y+2],x[y+3],p))&&w()&&m>(i=e.sqdistToFiniteLine(a,b,x[y],x[y+1],x[y+2],x[y+3])))return f(d,i),!0}else if("bezier"===k.edgeType||"multibezier"===k.edgeType||"self"===k.edgeType||"compound"===k.edgeType)for(var x=k.allpts,y=0;y+5<k.allpts.length;y+=4)if((v=e.inBezierVicinity(a,b,x[y],x[y+1],x[y+2],x[y+3],x[y+4],x[y+5],p))&&w()&&m>(i=e.sqdistToQuadraticBezier(a,b,x[y],x[y+1],x[y+2],x[y+3],x[y+4],x[y+5])))return f(d,i),!0;if(v&&w())for(var r=r||g.source,u=u||g.target,z=d.pstyle("width").pfValue,A=n.getArrowWidth(z),B=[{name:"source",x:k.arrowStartX,y:k.arrowStartY,angle:k.srcArrowAngle},{name:"target",x:k.arrowEndX,y:k.arrowEndY,angle:k.tgtArrowAngle},{name:"mid-source",x:k.midX,y:k.midY,angle:k.midsrcArrowAngle},{name:"mid-target",x:k.midX,y:k.midY,angle:k.midtgtArrowAngle}],y=0;y<B.length;y++){var C=B[y],D=o.arrowShapes[d.pstyle(C.name+"-arrow-shape").value];if(D.roughCollide(a,b,A,C.angle,{x:C.x,y:C.y},t)&&D.collide(a,b,A,C.angle,{x:C.x,y:C.y},t)){f(d);break}}s&&q.length>0&&(h(r),h(u))}}function j(a,b,c){return g.getPrefixedProperty(a,b,c)}function k(c,d){var g,h=c._private,i=v;g=d?d+"-":"";var k=c.pstyle(g+"label").value,l="yes"===c.pstyle("text-events").strValue;if(l&&k){var m=h.rstyle,n=c.pstyle("text-border-width").pfValue,o=j(m,"labelWidth",d)+n/2+2*i,p=j(m,"labelHeight",d)+n/2+2*i,q=j(m,"labelX",d),r=j(m,"labelY",d),s=j(h.rscratch,"labelAngle",d),t=q-o/2,u=q+o/2,w=r-p/2,x=r+p/2;if(s){var y=Math.cos(s),z=Math.sin(s),A=function(a,b){return a-=q,b-=r,{x:a*y-b*z+q,y:a*z+b*y+r}},B=A(t,w),C=A(t,x),D=A(u,w),E=A(u,x),F=[B.x,B.y,D.x,D.y,E.x,E.y,C.x,C.y];if(e.pointInsidePolygonPoints(a,b,F))return f(c),!0}else{var G={w:o,h:p,x1:t,x2:u,y1:w,y2:x};if(e.inBoundingBox(G,a,b))return f(c),!0}}}for(var l,m,n=this,o=this,p=o.getCachedZSortedEles(),q=[],r=o.cy.zoom(),s=o.cy.hasCompoundNodes(),t=(d?24:8)/r,u=(d?8:2)/r,v=(d?8:2)/r,w=1/0,x=p.length-1;x>=0;x--){var y=p[x];y.isNode()?h(y)||k(y):i(y)||k(y)||k(y,"source")||k(y,"target")}return q},i.getAllInBox=function(a,b,c,d){var f=this.getCachedZSortedEles(),g=f.nodes,h=f.edges,i=[],j=Math.min(a,c),k=Math.max(a,c),l=Math.min(b,d),m=Math.max(b,d);a=j,c=k,b=l,d=m;for(var n=e.makeBoundingBox({x1:a,y1:b,x2:c,y2:d}),o=0;o<g.length;o++){var p=g[o],q=p.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1,includeShadows:!1});e.boundingBoxesIntersect(n,q)&&i.push(g[o])}for(var r=0;r<h.length;r++){var s=h[r],t=s._private,u=t.rscratch;if((null==u.startX||null==u.startY||e.inBoundingBox(n,u.startX,u.startY))&&(null==u.endX||null==u.endY||e.inBoundingBox(n,u.endX,u.endY)))if("bezier"===u.edgeType||"multibezier"===u.edgeType||"self"===u.edgeType||"compound"===u.edgeType||"segments"===u.edgeType||"haystack"===u.edgeType){for(var v=t.rstyle.bezierPts||t.rstyle.linePts||t.rstyle.haystackPts,w=!0,o=0;o<v.length;o++)if(!e.pointInBoundingBox(n,v[o])){w=!1;break}w&&i.push(s)}else"haystack"!==u.edgeType&&"straight"!==u.edgeType||i.push(s)}return i},i.getNodeShape=function(a){var b=this,c=a.pstyle("shape").value;if(a.isParent())return"rectangle"===c||"roundrectangle"===c?c:"rectangle";if("polygon"===c){var d=a.pstyle("shape-polygon-points").value;return b.nodeShapes.makePolygon(d).name}return c},i.updateCachedZSortedEles=function(){this.getCachedZSortedEles(!0)},i.updateCachedGrabbedEles=function(){var a=this.cachedZSortedEles;a.drag=[],a.nondrag=[];for(var b=[],c=0;c<a.length;c++){var d=a[c],e=d._private.rscratch;d.grabbed()&&!d.isParent()?b.push(d):e.inDragLayer?a.drag.push(d):a.nondrag.push(d)}for(var c=0;c<b.length;c++){var d=b[c];a.drag.push(d)}},i.getCachedZSortedEles=function(a){if(a||!this.cachedZSortedEles){var b=this.cy.mutableElements(),c=[];c.nodes=[],c.edges=[];for(var d=0;d<b.length;d++){var e=b[d];(e.animated()||e.visible()&&!e.transparent())&&(c.push(e),e.isNode()?c.nodes.push(e):c.edges.push(e))}c.sort(h),this.cachedZSortedEles=c,this.updateCachedGrabbedEles()}else c=this.cachedZSortedEles;return c},i.projectLines=function(a){var b=a._private,c=b.rscratch,e=c.edgeType;if(b.rstyle.bezierPts=null,b.rstyle.linePts=null,b.rstyle.haystackPts=null,"multibezier"===e||"bezier"===e||"self"===e||"compound"===e)for(var f=(b.rstyle.bezierPts=[],
0);f+5<c.allpts.length;f+=4)d(this,a,c.allpts.slice(f,f+6));else if("segments"===e)for(var g=b.rstyle.linePts=[],f=0;f+1<c.allpts.length;f+=2)g.push({x:c.allpts[f],y:c.allpts[f+1]});else if("haystack"===e){var h=c.haystackPts;b.rstyle.haystackPts=[{x:h[0],y:h[1]},{x:h[2],y:h[3]}]}b.rstyle.arrowWidth=this.getArrowWidth(a.pstyle("width").pfValue)*this.arrowShapeWidth},i.projectBezier=i.projectLines,i.recalculateNodeLabelProjection=function(a){var b=a.pstyle("label").strValue;if(!f.emptyString(b)){var c,d,e=a._private,g=a.width(),h=a.height(),i=a.pstyle("padding").pfValue,j=e.position,k=a.pstyle("text-halign").strValue,l=a.pstyle("text-valign").strValue,m=e.rscratch,n=e.rstyle;switch(k){case"left":c=j.x-g/2-i;break;case"right":c=j.x+g/2+i;break;default:c=j.x}switch(l){case"top":d=j.y-h/2-i;break;case"bottom":d=j.y+h/2+i;break;default:d=j.y}m.labelX=c,m.labelY=d,n.labelX=c,n.labelY=d,this.applyLabelDimensions(a)}},i.recalculateEdgeLabelProjections=function(a){var b,c=a._private,d=c.rscratch,f=this,h={mid:a.pstyle("label").strValue,source:a.pstyle("source-label").strValue,target:a.pstyle("target-label").strValue};if(h.mid||h.source||h.target){b={x:d.midX,y:d.midY};var i=function(a,b,d){g.setPrefixedProperty(c.rscratch,a,b,d),g.setPrefixedProperty(c.rstyle,a,b,d)};i("labelX",null,b.x),i("labelY",null,b.y);var j=function(){function a(a,b,c,d,f){var g=e.dist(b,c),h=a.segments[a.segments.length-1],i={p0:b,p1:c,t0:d,t1:f,startDist:h?h.startDist+h.length:0,length:g};a.segments.push(i),a.length+=g}if(j.cache)return j.cache;for(var b=[],g=0;g+5<d.allpts.length;g+=4){var h={x:d.allpts[g],y:d.allpts[g+1]},i={x:d.allpts[g+2],y:d.allpts[g+3]},k={x:d.allpts[g+4],y:d.allpts[g+5]};b.push({p0:h,p1:i,p2:k,startDist:0,length:0,segments:[]})}for(var l=c.rstyle.bezierPts,m=f.bezierProjPcts.length,g=0;g<b.length;g++){var n=b[g],o=b[g-1];o&&(n.startDist=o.startDist+o.length),a(n,n.p0,l[g*m],0,f.bezierProjPcts[0]);for(var p=0;m-1>p;p++)a(n,l[g*m+p],l[g*m+p+1],f.bezierProjPcts[p],f.bezierProjPcts[p+1]);a(n,l[g*m+m-1],n.p2,f.bezierProjPcts[m-1],1)}return j.cache=b},k=function(c){var f,g="source"===c;if(h[c]){var k=a.pstyle(c+"-text-offset").pfValue,l=function(a,b){var c=b.x-a.x,d=b.y-a.y;return Math.atan(d/c)},m=function(a,b,c,d){var f=e.bound(0,d-.001,1),g=e.bound(0,d+.001,1),h=e.qbezierPtAt(a,b,c,f),i=e.qbezierPtAt(a,b,c,g);return l(h,i)};switch(d.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var n,o=j(),p=0,q=0,r=0;r<o.length;r++){for(var s=o[g?r:o.length-1-r],t=0;t<s.segments.length;t++){var u=s.segments[g?t:s.segments.length-1-t],v=r===o.length-1&&t===s.segments.length-1;if(p=q,q+=u.length,q>=k||v){n={cp:s,segment:u};break}}if(n)break}var s=n.cp,u=n.segment,w=(k-p)/u.length,x=u.t1-u.t0,y=g?u.t0+x*w:u.t1-x*w;y=e.bound(0,y,1),b=e.qbezierPtAt(s.p0,s.p1,s.p2,y),f=m(s.p0,s.p1,s.p2,y,b);break;case"straight":case"segments":case"haystack":for(var z,A,B,C,D=0,E=d.allpts.length,r=0;E>r+3&&(g?(B={x:d.allpts[r],y:d.allpts[r+1]},C={x:d.allpts[r+2],y:d.allpts[r+3]}):(B={x:d.allpts[E-2-r],y:d.allpts[E-1-r]},C={x:d.allpts[E-4-r],y:d.allpts[E-3-r]}),z=e.dist(B,C),A=D,D+=z,!(D>=k));r+=2);var F=k-A,y=F/z;y=e.bound(0,y,1),b=e.lineAt(B,C,y),f=l(B,C)}i("labelX",c,b.x),i("labelY",c,b.y),i("labelAutoAngle",c,f)}};k("source"),k("target"),this.applyLabelDimensions(a)}},i.applyLabelDimensions=function(a){this.applyPrefixedLabelDimensions(a),a.isEdge()&&(this.applyPrefixedLabelDimensions(a,"source"),this.applyPrefixedLabelDimensions(a,"target"))},i.applyPrefixedLabelDimensions=function(a,b){var c=a._private,d=this.getLabelText(a,b),e=this.calculateLabelDimensions(a,d);g.setPrefixedProperty(c.rstyle,"labelWidth",b,e.width),g.setPrefixedProperty(c.rscratch,"labelWidth",b,e.width),g.setPrefixedProperty(c.rstyle,"labelHeight",b,e.height),g.setPrefixedProperty(c.rscratch,"labelHeight",b,e.height)},i.getLabelText=function(a,b){var c=a._private,d=b?b+"-":"",e=a.pstyle(d+"label").strValue,f=a.pstyle("text-transform").value,h=function(a,d){return d?(g.setPrefixedProperty(c.rscratch,a,b,d),d):g.getPrefixedProperty(c.rscratch,a,b)};if("none"==f||("uppercase"==f?e=e.toUpperCase():"lowercase"==f&&(e=e.toLowerCase())),"wrap"===a.pstyle("text-wrap").value){var i=h("labelKey");if(i&&h("labelWrapKey")===i)return h("labelWrapCachedText");for(var j=e.split("\n"),k=a.pstyle("text-max-width").pfValue,l=[],m=0;m<j.length;m++){var n=j[m],o=this.calculateLabelDimensions(a,n,"line="+n),p=o.width;if(p>k){for(var q=n.split(/\s+/),r="",s=0;s<q.length;s++){var t=q[s],u=0===r.length?t:r+" "+t,v=this.calculateLabelDimensions(a,u,"testLine="+u),w=v.width;k>=w?r+=t+" ":(l.push(r),r=t+" ")}r.match(/^\s+$/)||l.push(r)}else l.push(n)}h("labelWrapCachedLines",l),e=h("labelWrapCachedText",l.join("\n")),h("labelWrapKey",i)}return e},i.calculateLabelDimensions=function(a,b,c){var d=this,e=a._private.labelStyleKey+"$@$"+b;c&&(e+="$@$"+c);var f=d.labelDimCache||(d.labelDimCache={});if(f[e])return f[e];var g=1,h=a.pstyle("font-style").strValue,i=g*a.pstyle("font-size").pfValue+"px",j=a.pstyle("font-family").strValue,k=a.pstyle("font-weight").strValue,l=this.labelCalcDiv;l||(l=this.labelCalcDiv=document.createElement("div"),document.body.appendChild(l));var m=l.style;return m.fontFamily=j,m.fontStyle=h,m.fontSize=i,m.fontWeight=k,m.position="absolute",m.left="-9999px",m.top="-9999px",m.zIndex="-1",m.visibility="hidden",m.pointerEvents="none",m.padding="0",m.lineHeight="1","wrap"===a.pstyle("text-wrap").value?m.whiteSpace="pre":m.whiteSpace="normal",l.textContent=b,f[e]={width:Math.ceil(l.clientWidth/g),height:Math.ceil(l.clientHeight/g)},f[e]},i.recalculateEdgeProjections=function(a){this.findEdgeControlPoints(a)},i.findEdgeControlPoints=function(a){if(a&&0!==a.length){for(var b,c=this,d=c.cy,g=d.hasCompoundNodes(),h={},i=[],j=[],k=0;k<a.length;k++){var l=a[k],m=l._private,n=m.data,o=l.pstyle("curve-style").value,p="unbundled-bezier"===o||"segments"===o;if("none"!==l.pstyle("display").value)if("haystack"!==o){var q=n.source,r=n.target;b=q>r?r+"$-$"+q:q+"$-$"+r,p&&(b="unbundled$-$"+n.id),null==h[b]&&(h[b]=[],i.push(b)),h[b].push(l),p&&(h[b].hasUnbundled=!0)}else j.push(l)}for(var s,t,u,v,w,x,y,z,A,B,C,D,E,F,G=0;G<i.length;G++){b=i[G];var H=h[b];if(H.sort(function(a,b){return a.poolIndex()-b.poolIndex()}),s=H[0]._private.source,t=H[0]._private.target,!H.hasUnbundled&&s.id()>t.id()){var I=s;s=t,t=I}if(u=s._private,v=t._private,w=u.position,x=v.position,y=s.outerWidth(),z=s.outerHeight(),A=t.outerWidth(),B=t.outerHeight(),C=c.nodeShapes[this.getNodeShape(s)],D=c.nodeShapes[this.getNodeShape(t)],F=!1,H.length>1&&s!==t||H.hasUnbundled){var J=C.intersectLine(w.x,w.y,y,z,x.x,x.y,0),K=D.intersectLine(x.x,x.y,A,B,w.x,w.y,0),L={x1:J[0],x2:K[0],y1:J[1],y2:K[1]},M={x1:w.x,x2:x.x,y1:w.y,y2:x.y},N=K[1]-J[1],O=K[0]-J[0],P=Math.sqrt(O*O+N*N),Q={x:O,y:N},R={x:Q.x/P,y:Q.y/P};E={x:-R.y,y:R.x},D.checkPoint(J[0],J[1],0,A,B,x.x,x.y)&&C.checkPoint(K[0],K[1],0,y,z,w.x,w.y)&&(E={},F=!0)}for(var l,S,T,k=0;k<H.length;k++){l=H[k],S=l._private,T=S.rscratch;var U=T.lastEdgeIndex,V=k,W=T.lastNumEdges,X=H.length,o=l.pstyle("curve-style").value,Y=l.pstyle("control-point-distances"),Z=l.pstyle("control-point-weights"),$=Y&&Z?Math.min(Y.value.length,Z.value.length):1,_=l.pstyle("control-point-step-size").pfValue,aa=Y?Y.pfValue[0]:void 0,ba=Z.value[0],p="unbundled-bezier"===o||"segments"===o,ca=T.lastSrcCtlPtX,da=w.x,ea=T.lastSrcCtlPtY,fa=w.y,ga=T.lastSrcCtlPtW,ha=s.outerWidth(),ia=T.lastSrcCtlPtH,ja=s.outerHeight(),ka=T.lastTgtCtlPtX,la=x.x,ma=T.lastTgtCtlPtY,na=x.y,oa=T.lastTgtCtlPtW,pa=t.outerWidth(),qa=T.lastTgtCtlPtH,ra=t.outerHeight(),sa=T.lastW,ta=l.pstyle("control-point-step-size").pfValue,ua=l.pstyle("edge-distances").value;if(F?T.badBezier=!0:T.badBezier=!1,ca!==da||ea!==fa||ga!==ha||ia!==ja||ka!==la||ma!==na||oa!==pa||qa!==ra||sa!==ta||!(U===V&&W===X||p)){if(T.lastSrcCtlPtX=da,T.lastSrcCtlPtY=fa,T.lastSrcCtlPtW=ha,T.lastSrcCtlPtH=ja,T.lastTgtCtlPtX=la,T.lastTgtCtlPtY=na,T.lastTgtCtlPtW=pa,T.lastTgtCtlPtH=ra,T.lastEdgeIndex=V,T.lastNumEdges=X,T.lastWidth=ta,s===t){T.edgeType="self";var va=k,wa=_;p&&(va=0,wa=aa),T.ctrlpts=[w.x,w.y-(1+Math.pow(z,1.12)/100)*wa*(va/3+1),w.x-(1+Math.pow(y,1.12)/100)*wa*(va/3+1),w.y]}else if(g&&(s.isParent()||s.isChild()||t.isParent()||t.isChild())&&(s.parents().anySame(t)||t.parents().anySame(s))){T.edgeType="compound",T.badBezier=!1;var va=k,wa=_;p&&(va=0,wa=aa);var xa=50,ya={x:w.x-y/2,y:w.y-z/2},za={x:x.x-A/2,y:x.y-B/2},Aa={x:Math.min(ya.x,za.x),y:Math.min(ya.y,za.y)},Ba=.5,Ca=Math.max(Ba,Math.log(.01*y)),Da=Math.max(Ba,Math.log(.01*A));T.ctrlpts=[Aa.x,Aa.y-(1+Math.pow(xa,1.12)/100)*wa*(va/3+1)*Ca,Aa.x-(1+Math.pow(xa,1.12)/100)*wa*(va/3+1)*Da,Aa.y]}else if("segments"===o){T.edgeType="segments",T.segpts=[];for(var Ea=l.pstyle("segment-weights").pfValue,Fa=l.pstyle("segment-distances").pfValue,Ga=Math.min(Ea.length,Fa.length),Ha=0;Ga>Ha;Ha++){var Ia=Ea[Ha],Ja=Fa[Ha],Ka=1-Ia,La=Ia,Ma="node-position"===ua?M:L,Na={x:Ma.x1*Ka+Ma.x2*La,y:Ma.y1*Ka+Ma.y2*La};T.segpts.push(Na.x+E.x*Ja,Na.y+E.y*Ja)}}else if(H.length%2!==1||k!==Math.floor(H.length/2)||p){var Oa=p;T.edgeType=Oa?"multibezier":"bezier",T.ctrlpts=[];for(var Pa=0;$>Pa;Pa++){var Qa,Ra=(.5-H.length/2+k)*_,Sa=e.signum(Ra);Oa&&(aa=Y?Y.pfValue[Pa]:_,ba=Z.value[Pa]),Qa=p?aa:void 0!==aa?Sa*aa:void 0;var Ta=void 0!==Qa?Qa:Ra,Ka=1-ba,La=ba,Ma="node-position"===ua?M:L,Na={x:Ma.x1*Ka+Ma.x2*La,y:Ma.y1*Ka+Ma.y2*La};T.ctrlpts.push(Na.x+E.x*Ta,Na.y+E.y*Ta)}}else T.edgeType="straight";this.findEndpoints(l);var Ua=!f.number(T.startX)||!f.number(T.startY),Va=!f.number(T.arrowStartX)||!f.number(T.arrowStartY),Wa=!f.number(T.endX)||!f.number(T.endY),Xa=!f.number(T.arrowEndX)||!f.number(T.arrowEndY),Ya=3,Za=this.getArrowWidth(l.pstyle("width").pfValue)*this.arrowShapeWidth,$a=Ya*Za;if("bezier"===T.edgeType){var _a=e.dist({x:T.ctrlpts[0],y:T.ctrlpts[1]},{x:T.startX,y:T.startY}),ab=$a>_a,bb=e.dist({x:T.ctrlpts[0],y:T.ctrlpts[1]},{x:T.endX,y:T.endY}),cb=$a>bb,db=!1;if(Ua||Va||ab){db=!0;var eb={x:T.ctrlpts[0]-w.x,y:T.ctrlpts[1]-w.y},fb=Math.sqrt(eb.x*eb.x+eb.y*eb.y),gb={x:eb.x/fb,y:eb.y/fb},hb=Math.max(y,z),ib={x:T.ctrlpts[0]+2*gb.x*hb,y:T.ctrlpts[1]+2*gb.y*hb},jb=C.intersectLine(w.x,w.y,y,z,ib.x,ib.y,0);ab?(T.ctrlpts[0]=T.ctrlpts[0]+gb.x*($a-_a),T.ctrlpts[1]=T.ctrlpts[1]+gb.y*($a-_a)):(T.ctrlpts[0]=jb[0]+gb.x*$a,T.ctrlpts[1]=jb[1]+gb.y*$a)}if(Wa||Xa||cb){db=!0;var eb={x:T.ctrlpts[0]-x.x,y:T.ctrlpts[1]-x.y},fb=Math.sqrt(eb.x*eb.x+eb.y*eb.y),gb={x:eb.x/fb,y:eb.y/fb},hb=Math.max(y,z),ib={x:T.ctrlpts[0]+2*gb.x*hb,y:T.ctrlpts[1]+2*gb.y*hb},kb=D.intersectLine(x.x,x.y,A,B,ib.x,ib.y,0);cb?(T.ctrlpts[0]=T.ctrlpts[0]+gb.x*($a-bb),T.ctrlpts[1]=T.ctrlpts[1]+gb.y*($a-bb)):(T.ctrlpts[0]=kb[0]+gb.x*$a,T.ctrlpts[1]=kb[1]+gb.y*$a)}db&&this.findEndpoints(l)}if("multibezier"===T.edgeType||"bezier"===T.edgeType||"self"===T.edgeType||"compound"===T.edgeType){T.allpts=[],T.allpts.push(T.startX,T.startY);for(var Pa=0;Pa+1<T.ctrlpts.length;Pa+=2)T.allpts.push(T.ctrlpts[Pa],T.ctrlpts[Pa+1]),Pa+3<T.ctrlpts.length&&T.allpts.push((T.ctrlpts[Pa]+T.ctrlpts[Pa+2])/2,(T.ctrlpts[Pa+1]+T.ctrlpts[Pa+3])/2);T.allpts.push(T.endX,T.endY);var lb,mb;T.ctrlpts.length/2%2===0?(lb=T.allpts.length/2-1,T.midX=T.allpts[lb],T.midY=T.allpts[lb+1]):(lb=T.allpts.length/2-3,mb=.5,T.midX=e.qbezierAt(T.allpts[lb],T.allpts[lb+2],T.allpts[lb+4],mb),T.midY=e.qbezierAt(T.allpts[lb+1],T.allpts[lb+3],T.allpts[lb+5],mb))}else if("straight"===T.edgeType)T.allpts=[T.startX,T.startY,T.endX,T.endY],T.midX=(T.startX+T.endX+T.arrowStartX+T.arrowEndX)/4,T.midY=(T.startY+T.endY+T.arrowStartY+T.arrowEndY)/4;else if("segments"===T.edgeType)if(T.allpts=[],T.allpts.push(T.startX,T.startY),T.allpts.push.apply(T.allpts,T.segpts),T.allpts.push(T.endX,T.endY),T.segpts.length%4===0){var nb=T.segpts.length/2,ob=nb-2;T.midX=(T.segpts[ob]+T.segpts[nb])/2,T.midY=(T.segpts[ob+1]+T.segpts[nb+1])/2}else{var ob=T.segpts.length/2-1;T.midX=T.segpts[ob],T.midY=T.segpts[ob+1]}this.projectLines(l),this.calculateArrowAngles(l),this.recalculateEdgeLabelProjections(l),this.calculateLabelAngles(l)}}}for(var k=0;k<j.length;k++){var l=j[k],m=l._private,pb=m.rscratch,T=pb;if(!pb.haystack){var qb=2*Math.random()*Math.PI;pb.source={x:Math.cos(qb),y:Math.sin(qb)};var qb=2*Math.random()*Math.PI;pb.target={x:Math.cos(qb),y:Math.sin(qb)}}var s=m.source,t=m.target,w=s._private.position,x=t._private.position,y=s.width(),A=t.width(),z=s.height(),B=t.height(),hb=l.pstyle("haystack-radius").value,rb=hb/2;T.haystackPts=T.allpts=[T.source.x*y*rb+w.x,T.source.y*z*rb+w.y,T.target.x*A*rb+x.x,T.target.y*B*rb+x.y],T.midX=(T.allpts[0]+T.allpts[2])/2,T.midY=(T.allpts[1]+T.allpts[3])/2,pb.edgeType="haystack",pb.haystack=!0,this.projectLines(l),this.calculateArrowAngles(l),this.recalculateEdgeLabelProjections(l),this.calculateLabelAngles(l)}return h}};var j=function(a,b){return Math.atan2(b,a)-Math.PI/2};i.calculateArrowAngles=function(a){var b,c,d,f,g,h,i=a._private.rscratch,k="haystack"===i.edgeType,l="multibezier"===i.edgeType,m="segments"===i.edgeType,n="compound"===i.edgeType,o="self"===i.edgeType,p=a._private.source._private.position,q=a._private.target._private.position;k?(d=i.haystackPts[0],f=i.haystackPts[1],g=i.haystackPts[2],h=i.haystackPts[3]):(d=i.arrowStartX,f=i.arrowStartY,g=i.arrowEndX,h=i.arrowEndY),b=p.x-d,c=p.y-f,i.srcArrowAngle=j(b,c);var r=i.midX,s=i.midY;if(k&&(r=(d+g)/2,s=(f+h)/2),b=g-d,c=h-f,o)b=-1,c=1;else if(m){var t=i.allpts;if(t.length/2%2===0){var u=t.length/2,v=u-2;b=t[u]-t[v],c=t[u+1]-t[v+1]}else{var u=t.length/2-1,v=u-2,w=u+2;b=t[u]-t[v],c=t[u+1]-t[v+1]}}else if(l||n){var x,y,z,A,t=i.allpts,B=i.ctrlpts;if(B.length/2%2===0){var C=t.length/2-1,D=C+2,E=D+2;x=e.qbezierAt(t[C],t[D],t[E],0),y=e.qbezierAt(t[C+1],t[D+1],t[E+1],0),z=e.qbezierAt(t[C],t[D],t[E],1e-4),A=e.qbezierAt(t[C+1],t[D+1],t[E+1],1e-4)}else{var D=t.length/2-1,C=D-2,E=D+2;x=e.qbezierAt(t[C],t[D],t[E],.4999),y=e.qbezierAt(t[C+1],t[D+1],t[E+1],.4999),z=e.qbezierAt(t[C],t[D],t[E],.5),A=e.qbezierAt(t[C+1],t[D+1],t[E+1],.5)}b=z-x,c=A-y}if(i.midtgtArrowAngle=j(b,c),i.midDispX=b,i.midDispY=c,b*=-1,c*=-1,m){var t=i.allpts;if(t.length/2%2===0);else{var u=t.length/2-1,w=u+2;b=-(t[w]-t[u]),c=-(t[w+1]-t[u+1])}}i.midsrcArrowAngle=j(b,c),b=q.x-g,c=q.y-h,i.tgtArrowAngle=j(b,c)},i.calculateLabelAngles=function(a){var b=a._private,c=b.rscratch,d=a.isEdge(),e=a.pstyle("text-rotation"),f=e.strValue;"none"===f?c.labelAngle=c.sourceLabelAngle=c.targetLabelAngle=0:d&&"autorotate"===f?(c.labelAngle=Math.atan(c.midDispY/c.midDispX),c.sourceLabelAngle=c.sourceLabelAutoAngle,c.targetLabelAngle=c.targetLabelAutoAngle):"autorotate"===f?c.labelAngle=c.sourceLabelAngle=c.targetLabelAngle=0:c.labelAngle=c.sourceLabelAngle=c.targetLabelAngle=e.pfValue},i.findEndpoints=function(a){var b,c,d,g=this,h=a.source()[0],i=a.target()[0],j=h._private,k=i._private,l=j.position,m=k.position,n=a.pstyle("target-arrow-shape").value,o=a.pstyle("source-arrow-shape").value,p=a._private.rscratch,q=p.edgeType,r="bezier"===q||"multibezier"===q||"self"===q||"compound"===q,s="bezier"!==q,t="straight"===q||"segments"===q,u="segments"===q,v=r||s||t;if(r){var w=[p.ctrlpts[0],p.ctrlpts[1]],x=s?[p.ctrlpts[p.ctrlpts.length-2],p.ctrlpts[p.ctrlpts.length-1]]:w;c=x,d=w}else if(t){var y=u?p.segpts.slice(0,2):[m.x,m.y],z=u?p.segpts.slice(p.segpts.length-2):[l.x,l.y];c=z,d=y}b=g.nodeShapes[this.getNodeShape(i)].intersectLine(m.x,m.y,i.outerWidth(),i.outerHeight(),c[0],c[1],0);var A=e.shortenIntersection(b,c,g.arrowShapes[n].spacing(a)),B=e.shortenIntersection(b,c,g.arrowShapes[n].gap(a));p.endX=B[0],p.endY=B[1],p.arrowEndX=A[0],p.arrowEndY=A[1],b=g.nodeShapes[this.getNodeShape(h)].intersectLine(l.x,l.y,h.outerWidth(),h.outerHeight(),d[0],d[1],0);var C=e.shortenIntersection(b,d,g.arrowShapes[o].spacing(a)),D=e.shortenIntersection(b,d,g.arrowShapes[o].gap(a));p.startX=D[0],p.startY=D[1],p.arrowStartX=C[0],p.arrowStartY=C[1],v&&(f.number(p.startX)&&f.number(p.startY)&&f.number(p.endX)&&f.number(p.endY)?p.badLine=!1:p.badLine=!0)},i.getArrowWidth=i.getArrowHeight=function(a){var b=this.arrowWidthCache=this.arrowWidthCache||{},c=b[a];return c?c:(c=Math.max(Math.pow(13.37*a,.9),29),b[a]=c,c)},b.exports=i},{"../../../collection/zsort":32,"../../../is":83,"../../../math":85,"../../../util":100}],59:[function(a,b,c){"use strict";var d={};d.getCachedImage=function(a,b,c){var d=this,e=d.imageCache=d.imageCache||{},f=e[a];if(f)return f.image.complete||f.image.addEventListener("load",c),f.image;f=e[a]=e[a]||{};var g=f.image=new Image;g.addEventListener("load",c);var h="data:",i=a.substring(0,h.length).toLowerCase()===h;return i||(g.crossOrigin=b),g.src=a,g},b.exports=d},{}],60:[function(a,b,c){"use strict";var d=a("../../../is"),e=a("../../../util"),f=function(a){this.init(a)},g=f,h=g.prototype;h.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],h.init=function(a){var b=this;b.options=a,b.cy=a.cy,b.container=a.cy.container(),b.selection=[void 0,void 0,void 0,void 0,0],b.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],b.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},b.dragData={possibleDragElements:[]},b.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},b.redraws=0,b.showFps=a.showFps,b.hideEdgesOnViewport=a.hideEdgesOnViewport,b.hideLabelsOnViewport=a.hideLabelsOnViewport,b.textureOnViewport=a.textureOnViewport,b.wheelSensitivity=a.wheelSensitivity,b.motionBlurEnabled=a.motionBlur,b.forcedPixelRatio=a.pixelRatio,b.motionBlur=a.motionBlur,b.motionBlurOpacity=a.motionBlurOpacity,b.motionBlurTransparency=1-b.motionBlurOpacity,b.motionBlurPxRatio=1,b.mbPxRBlurry=1,b.minMbLowQualFrames=4,b.fullQualityMb=!1,b.clearedForMotionBlur=[],b.desktopTapThreshold=a.desktopTapThreshold,b.desktopTapThreshold2=a.desktopTapThreshold*a.desktopTapThreshold,b.touchTapThreshold=a.touchTapThreshold,b.touchTapThreshold2=a.touchTapThreshold*a.touchTapThreshold,b.tapholdDuration=500,b.bindings=[],b.beforeRenderCallbacks=[],b.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:100},b.registerNodeShapes(),b.registerArrowShapes(),b.registerCalculationListeners(),b.load()},h.notify=function(a){var b,c=this;if(!this.destroyed){b=d.array(a.type)?a.type:[a.type];for(var e={},f=0;f<b.length;f++){var g=b[f];e[g]=!0}if(e.destroy)return void c.destroy();(e.add||e.remove||e.load||e.style)&&c.updateCachedZSortedEles(),e.viewport&&c.redrawHint("select",!0),(e.load||e.resize)&&(c.invalidateContainerClientCoordsCache(),c.matchCanvasSize(c.container)),c.redrawHint("eles",!0),c.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}},h.destroy=function(){var a=this;a.destroyed=!0,a.cy.stopAnimationLoop();for(var b=0;b<a.bindings.length;b++){var c=a.bindings[b],d=c,e=d.target;(e.off||e.removeEventListener).apply(e,d.args)}if(a.bindings=[],a.beforeRenderCallbacks=[],a.onUpdateEleCalcsFns=[],a.removeObserver&&a.removeObserver.disconnect(),a.styleObserver&&a.styleObserver.disconnect(),a.labelCalcDiv)try{document.body.removeChild(a.labelCalcDiv)}catch(a){}},[a("./arrow-shapes"),a("./coord-ele-math"),a("./images"),a("./load-listeners"),a("./node-shapes"),a("./redraw")].forEach(function(a){e.extend(h,a)}),b.exports=g},{"../../../is":83,"../../../util":100,"./arrow-shapes":57,"./coord-ele-math":58,"./images":59,"./load-listeners":61,"./node-shapes":62,"./redraw":63}],61:[function(a,b,c){"use strict";var d=a("../../../is"),e=a("../../../util"),f=a("../../../math"),g=a("../../../event"),h={};h.registerBinding=function(a,b,c,d){var e=Array.prototype.slice.apply(arguments,[1]),f=this.binder(a);return f.on.apply(f,e)},h.binder=function(a){var b=this,c=function(){var c=arguments;return b.bindings.push({target:a,args:c}),(a.addEventListener||a.on).apply(a,c),this};return{on:c,addEventListener:c,addListener:c,bind:c}},h.nodeIsDraggable=function(a){return a&&a.isNode()&&!a.locked()&&a.grabbable()},h.nodeIsGrabbable=function(a){return this.nodeIsDraggable(a)&&0!==a.pstyle("opacity").value&&"visible"===a.pstyle("visibility").value&&"element"===a.pstyle("display").value},h.load=function(){var a=this,b=function(b,c,d,f){null==b&&(b=a.cy);for(var h=0;h<c.length;h++){var i=c[h],j=new g(d,e.extend({type:i},f));b.trigger(j)}},c=function(a){return a.shiftKey||a.metaKey||a.ctrlKey},h=function(b,c){var d=!0;if(a.cy.hasCompoundNodes()&&b&&b.isEdge())for(var e=0;c&&e<c.length;e++){var b=c[e];if(b.isNode()&&b.isParent()){d=!1;break}}else d=!0;return d},i=function(b){var c;if(b.addToList&&a.cy.hasCompoundNodes()){if(!b.addToList.hasId){b.addToList.hasId={};for(var d=0;d<b.addToList.length;d++){var e=b.addToList[d];b.addToList.hasId[e.id()]=!0}}c=b.addToList.hasId}return c||{}},j=function(a){a[0]._private.grabbed=!0},k=function(a){a[0]._private.grabbed=!1},l=function(a){a[0]._private.rscratch.inDragLayer=!0},m=function(a){a[0]._private.rscratch.inDragLayer=!1},n=function(a){a[0]._private.rscratch.isGrabTarget=!0},o=function(a){a[0]._private.rscratch.isGrabTarget=!1},p=function(a,b){var c=i(b);c[a.id()]||(b.addToList.push(a),c[a.id()]=!0,j(a))},q=function(a,b){if(a.cy().hasCompoundNodes()&&(null!=b.inDragLayer||null!=b.addToList)){var c=a.descendants();b.inDragLayer&&(c.forEach(l),c.connectedEdges().forEach(l)),b.addToList&&c.forEach(function(a){p(a,b)})}},r=function(b,c){c=c||{};var d=b.cy().hasCompoundNodes();c.inDragLayer&&(b.forEach(l),b.neighborhood().stdFilter(function(a){return!d||a.isEdge()}).forEach(l)),c.addToList&&b.forEach(function(a){p(a,c)}),q(b,c),u(b,{inDragLayer:c.inDragLayer}),a.updateCachedGrabbedEles()},s=r,t=function(b){b&&(b.hasId={},a.getCachedZSortedEles().forEach(function(a){k(a),m(a),o(a)}),a.updateCachedGrabbedEles())},u=function(a,b){if((null!=b.inDragLayer||null!=b.addToList)&&a.cy().hasCompoundNodes()){var c=a.ancestors().orphans();if(!c.same(a)){var d=c.descendants().spawnSelf().merge(c).unmerge(a).unmerge(a.descendants()),e=d.connectedEdges();b.inDragLayer&&(e.forEach(l),d.forEach(l)),b.addToList&&d.forEach(function(a){p(a,b)})}}},v="undefined"!=typeof MutationObserver;v?(a.removeObserver=new MutationObserver(function(b){for(var c=0;c<b.length;c++){var d=b[c],e=d.removedNodes;if(e)for(var f=0;f<e.length;f++){var g=e[f];if(g===a.container){a.destroy();break}}}}),a.container.parentNode&&a.removeObserver.observe(a.container.parentNode,{childList:!0})):a.registerBinding(a.container,"DOMNodeRemoved",function(b){a.destroy()});var w=e.debounce(function(){a.cy.invalidateSize(),a.invalidateContainerClientCoordsCache(),a.matchCanvasSize(a.container),a.redrawHint("eles",!0),a.redrawHint("drag",!0),a.redraw()},100);v&&(a.styleObserver=new MutationObserver(w),a.styleObserver.observe(a.container,{attributes:!0})),a.registerBinding(window,"resize",w);for(var x=function(b){a.registerBinding(b,"scroll",function(b){a.invalidateContainerClientCoordsCache()})},y=a.cy.container();x(y),y.parentNode;)y=y.parentNode;a.registerBinding(a.container,"contextmenu",function(a){a.preventDefault()});var z=function(){return 0!==a.selection[4]};a.registerBinding(a.container,"mousedown",function(c){c.preventDefault(),a.hoverData.capture=!0,a.hoverData.which=c.which;var d=a.cy,e=[c.clientX,c.clientY],f=a.projectIntoViewport(e[0],e[1]),h=a.selection,i=a.findNearestElements(f[0],f[1],!0,!1),j=i[0],k=a.dragData.possibleDragElements;a.hoverData.mdownPos=f,a.hoverData.mdownGPos=e;var l=function(){a.hoverData.tapholdCancelled=!1,clearTimeout(a.hoverData.tapholdTimeout),a.hoverData.tapholdTimeout=setTimeout(function(){if(!a.hoverData.tapholdCancelled){var b=a.hoverData.down;b?b.trigger(new g(c,{type:"taphold",cyPosition:{x:f[0],y:f[1]}})):d.trigger(new g(c,{type:"taphold",cyPosition:{x:f[0],y:f[1]}}))}},a.tapholdDuration)};if(3==c.which){a.hoverData.cxtStarted=!0;var m=new g(c,{type:"cxttapstart",cyPosition:{x:f[0],y:f[1]}});j?(j.activate(),j.trigger(m),a.hoverData.down=j):d.trigger(m),a.hoverData.downTime=(new Date).getTime(),a.hoverData.cxtDragged=!1}else if(1==c.which){if(j&&j.activate(),null!=j&&a.nodeIsGrabbable(j)){var o=new g(c,{type:"grab",cyPosition:{x:f[0],y:f[1]}});if(n(j),j.selected()){if(j.selected()){k=a.dragData.possibleDragElements=[];var p=d.$(function(){return this.isNode()&&this.selected()&&a.nodeIsGrabbable(this)});r(p,{addToList:k}),j.trigger(o)}}else k=a.dragData.possibleDragElements=[],s(j,{addToList:k}),j.trigger(o);a.redrawHint("eles",!0),a.redrawHint("drag",!0)}a.hoverData.down=j,a.hoverData.downs=i,a.hoverData.downTime=(new Date).getTime(),b(j,["mousedown","tapstart","vmousedown"],c,{cyPosition:{x:f[0],y:f[1]}}),null==j?(h[4]=1,a.data.bgActivePosistion={x:f[0],y:f[1]},a.redrawHint("select",!0),a.redraw()):j.isEdge()&&(h[4]=1),l()}h[0]=h[2]=f[0],h[1]=h[3]=f[1]},!1),a.registerBinding(window,"mousemove",function(e){var i=!1,j=a.hoverData.capture;if(!j){var k=a.findContainerClientCoords();if(!(e.clientX>k[0]&&e.clientX<k[0]+a.canvasWidth&&e.clientY>k[1]&&e.clientY<k[1]+a.canvasHeight))return;for(var l=a.container,m=e.target,n=m.parentNode,o=!1;n;){if(n===l){o=!0;break}n=n.parentNode}if(!o)return}var p=a.cy,q=p.zoom(),s=[e.clientX,e.clientY],t=a.projectIntoViewport(s[0],s[1]),u=a.hoverData.mdownPos,v=a.hoverData.mdownGPos,w=a.selection,x=null;a.hoverData.draggingEles||a.hoverData.dragging||a.hoverData.selecting||(x=a.findNearestElement(t[0],t[1],!0,!1));var y,z=a.hoverData.last,A=a.hoverData.down,B=[t[0]-w[2],t[1]-w[3]],C=a.dragData.possibleDragElements;if(v){var D=s[0]-v[0],E=D*D,F=s[1]-v[1],G=F*F,H=E+G;y=H>=a.desktopTapThreshold2}var I=c(e);y&&(a.hoverData.tapholdCancelled=!0);var J=function(){var b=a.hoverData.dragDelta=a.hoverData.dragDelta||[];0===b.length?(b.push(B[0]),b.push(B[1])):(b[0]+=B[0],b[1]+=B[1])};if(i=!0,b(x,["mousemove","vmousemove","tapdrag"],e,{cyPosition:{x:t[0],y:t[1]}}),3===a.hoverData.which){if(y){var K=new g(e,{type:"cxtdrag",cyPosition:{x:t[0],y:t[1]}});A?A.trigger(K):p.trigger(K),a.hoverData.cxtDragged=!0,a.hoverData.cxtOver&&x===a.hoverData.cxtOver||(a.hoverData.cxtOver&&a.hoverData.cxtOver.trigger(new g(e,{type:"cxtdragout",cyPosition:{x:t[0],y:t[1]}})),a.hoverData.cxtOver=x,x&&x.trigger(new g(e,{type:"cxtdragover",cyPosition:{x:t[0],y:t[1]}})))}}else if(a.hoverData.dragging){if(i=!0,p.panningEnabled()&&p.userPanningEnabled()){var L;if(a.hoverData.justStartedPan){var M=a.hoverData.mdownPos;L={x:(t[0]-M[0])*q,y:(t[1]-M[1])*q},a.hoverData.justStartedPan=!1}else L={x:B[0]*q,y:B[1]*q};p.panBy(L),a.hoverData.dragged=!0}t=a.projectIntoViewport(e.clientX,e.clientY)}else if(1!=w[4]||null!=A&&!A.isEdge()){if(A&&A.isEdge()&&A.active()&&A.unactivate(),A&&A.grabbed()||x==z||(z&&b(z,["mouseout","tapdragout"],e,{cyPosition:{x:t[0],y:t[1]}}),x&&b(x,["mouseover","tapdragover"],e,{cyPosition:{x:t[0],y:t[1]}}),a.hoverData.last=x),A&&a.nodeIsDraggable(A))if(y){var N=!a.dragData.didDrag;N&&a.redrawHint("eles",!0),a.dragData.didDrag=!0;var O=[];a.hoverData.draggingEles||r(p.collection(C),{inDragLayer:!0});for(var P=0;P<C.length;P++){var Q=C[P];if(a.nodeIsDraggable(Q)&&Q.grabbed()){var R=Q._private.position;if(O.push(Q),d.number(B[0])&&d.number(B[1])){var S=!Q.isParent();if(S&&(R.x+=B[0],R.y+=B[1]),N){var T=a.hoverData.dragDelta;S&&T&&d.number(T[0])&&d.number(T[1])&&(R.x+=T[0],R.y+=T[1])}}}}a.hoverData.draggingEles=!0;var U=p.collection(O);U.updateCompoundBounds(),U.trigger("position drag"),a.redrawHint("drag",!0),a.redraw()}else J();i=!0}else if(y){if(a.hoverData.dragging||!p.boxSelectionEnabled()||!I&&p.panningEnabled()&&p.userPanningEnabled()){if(!a.hoverData.selecting&&p.panningEnabled()&&p.userPanningEnabled()){var V=h(A,a.hoverData.downs);V&&(a.hoverData.dragging=!0,a.hoverData.justStartedPan=!0,w[4]=0,a.data.bgActivePosistion=f.array2point(u),a.redrawHint("select",!0),a.redraw())}}else a.data.bgActivePosistion=void 0,a.hoverData.selecting||p.trigger("boxstart"),a.hoverData.selecting=!0,a.redrawHint("select",!0),a.redraw();A&&A.isEdge()&&A.active()&&A.unactivate()}return w[2]=t[0],w[3]=t[1],i?(e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),!1):void 0},!1),a.registerBinding(window,"mouseup",function(d){var e=a.hoverData.capture;if(e){a.hoverData.capture=!1;var f=a.cy,h=a.projectIntoViewport(d.clientX,d.clientY),i=a.selection,j=a.findNearestElement(h[0],h[1],!0,!1),k=a.dragData.possibleDragElements,l=a.hoverData.down,m=c(d);if(a.data.bgActivePosistion&&(a.redrawHint("select",!0),a.redraw()),a.hoverData.tapholdCancelled=!0,a.data.bgActivePosistion=void 0,l&&l.unactivate(),3===a.hoverData.which){var n=new g(d,{type:"cxttapend",cyPosition:{x:h[0],y:h[1]}});if(l?l.trigger(n):f.trigger(n),!a.hoverData.cxtDragged){var o=new g(d,{type:"cxttap",cyPosition:{x:h[0],y:h[1]}});l?l.trigger(o):f.trigger(o)}a.hoverData.cxtDragged=!1,a.hoverData.which=null}else if(1===a.hoverData.which){if(null!=l||a.dragData.didDrag||a.hoverData.selecting||a.hoverData.dragged||c(d)||(f.$(function(){return this.selected()}).unselect(),k.length>0&&a.redrawHint("eles",!0),a.dragData.possibleDragElements=k=[]),b(j,["mouseup","tapend","vmouseup"],d,{cyPosition:{x:h[0],y:h[1]}}),a.dragData.didDrag||a.hoverData.dragged||a.hoverData.selecting||b(l,["click","tap","vclick"],d,{cyPosition:{x:h[0],y:h[1]}}),j!=l||a.dragData.didDrag||a.hoverData.selecting||null!=j&&j._private.selectable&&(a.hoverData.dragging||("additive"===f.selectionType()||m?j.selected()?j.unselect():j.select():m||(f.$(":selected").unmerge(j).unselect(),j.select())),a.redrawHint("eles",!0)),a.hoverData.selecting){var p=f.collection(a.getAllInBox(i[0],i[1],i[2],i[3]));a.redrawHint("select",!0),p.length>0&&a.redrawHint("eles",!0),f.trigger("boxend");var q=function(a){return a.selectable()&&!a.selected()};"additive"===f.selectionType()?p.trigger("box").stdFilter(q).select().trigger("boxselect"):(m||f.$(":selected").unmerge(p).unselect(),p.trigger("box").stdFilter(q).select().trigger("boxselect")),a.redraw()}if(a.hoverData.dragging&&(a.hoverData.dragging=!1,a.redrawHint("select",!0),a.redrawHint("eles",!0),a.redraw()),!i[4]){a.redrawHint("drag",!0),a.redrawHint("eles",!0);var r=l&&l.grabbed();t(k),r&&l.trigger("free")}}i[4]=0,a.hoverData.down=null,a.hoverData.cxtStarted=!1,a.hoverData.draggingEles=!1,a.hoverData.selecting=!1,a.dragData.didDrag=!1,a.hoverData.dragged=!1,a.hoverData.dragDelta=[],a.hoverData.mdownPos=null,a.hoverData.mdownGPos=null}},!1);var A=function(b){if(!a.scrollingPage){var c=a.cy,d=a.projectIntoViewport(b.clientX,b.clientY),e=[d[0]*c.zoom()+c.pan().x,d[1]*c.zoom()+c.pan().y];if(a.hoverData.draggingEles||a.hoverData.dragging||a.hoverData.cxtStarted||z())return void b.preventDefault();if(c.panningEnabled()&&c.userPanningEnabled()&&c.zoomingEnabled()&&c.userZoomingEnabled()){b.preventDefault(),a.data.wheelZooming=!0,clearTimeout(a.data.wheelTimeout),a.data.wheelTimeout=setTimeout(function(){a.data.wheelZooming=!1,a.redrawHint("eles",!0),a.redraw()},150);var f;f=null!=b.deltaY?b.deltaY/-250:null!=b.wheelDeltaY?b.wheelDeltaY/1e3:b.wheelDelta/1e3,f*=a.wheelSensitivity;var g=1===b.deltaMode;g&&(f*=33),c.zoom({level:c.zoom()*Math.pow(10,f),renderedPosition:{x:e[0],y:e[1]}})}}};a.registerBinding(a.container,"wheel",A,!0),a.registerBinding(window,"scroll",function(b){a.scrollingPage=!0,clearTimeout(a.scrollingPageTimeout),a.scrollingPageTimeout=setTimeout(function(){a.scrollingPage=!1},250)},!0),a.registerBinding(a.container,"mouseout",function(b){var c=a.projectIntoViewport(b.clientX,b.clientY);a.cy.trigger(new g(b,{type:"mouseout",cyPosition:{x:c[0],y:c[1]}}))},!1),a.registerBinding(a.container,"mouseover",function(b){var c=a.projectIntoViewport(b.clientX,b.clientY);a.cy.trigger(new g(b,{type:"mouseover",cyPosition:{x:c[0],y:c[1]}}))},!1);var B,C,D,E,F,G,H,I,J,K,L,M,N,O,P=function(a,b,c,d){return Math.sqrt((c-a)*(c-a)+(d-b)*(d-b))},Q=function(a,b,c,d){return(c-a)*(c-a)+(d-b)*(d-b)};a.registerBinding(a.container,"touchstart",O=function(c){a.touchData.capture=!0,a.data.bgActivePosistion=void 0;var d=a.cy,e=a.touchData.now,f=a.touchData.earlier;if(c.touches[0]){var h=a.projectIntoViewport(c.touches[0].clientX,c.touches[0].clientY);e[0]=h[0],
e[1]=h[1]}if(c.touches[1]){var h=a.projectIntoViewport(c.touches[1].clientX,c.touches[1].clientY);e[2]=h[0],e[3]=h[1]}if(c.touches[2]){var h=a.projectIntoViewport(c.touches[2].clientX,c.touches[2].clientY);e[4]=h[0],e[5]=h[1]}if(c.touches[1]){t(a.dragData.touchDragEles);var i=a.findContainerClientCoords();J=i[0],K=i[1],L=i[2],M=i[3],B=c.touches[0].clientX-J,C=c.touches[0].clientY-K,D=c.touches[1].clientX-J,E=c.touches[1].clientY-K,N=B>=0&&L>=B&&D>=0&&L>=D&&C>=0&&M>=C&&E>=0&&M>=E;var j=d.pan(),k=d.zoom();F=P(B,C,D,E),G=Q(B,C,D,E),H=[(B+D)/2,(C+E)/2],I=[(H[0]-j.x)/k,(H[1]-j.y)/k];var l=200,m=l*l;if(m>G&&!c.touches[2]){var o=a.findNearestElement(e[0],e[1],!0,!0),p=a.findNearestElement(e[2],e[3],!0,!0);return o&&o.isNode()?(o.activate().trigger(new g(c,{type:"cxttapstart",cyPosition:{x:e[0],y:e[1]}})),a.touchData.start=o):p&&p.isNode()?(p.activate().trigger(new g(c,{type:"cxttapstart",cyPosition:{x:e[0],y:e[1]}})),a.touchData.start=p):(d.trigger(new g(c,{type:"cxttapstart",cyPosition:{x:e[0],y:e[1]}})),a.touchData.start=null),a.touchData.start&&(a.touchData.start._private.grabbed=!1),a.touchData.cxt=!0,a.touchData.cxtDragged=!1,a.data.bgActivePosistion=void 0,void a.redraw()}}if(c.touches[2]);else if(c.touches[1]);else if(c.touches[0]){var q=a.findNearestElements(e[0],e[1],!0,!0),u=q[0];if(null!=u&&(u.activate(),a.touchData.start=u,a.touchData.starts=q,a.nodeIsGrabbable(u))){var v=a.dragData.touchDragEles=[];if(a.redrawHint("eles",!0),a.redrawHint("drag",!0),u.selected()){var w=d.$(function(){return this.selected()&&a.nodeIsGrabbable(this)});r(w,{addToList:v})}else s(u,{addToList:v});n(u),u.trigger(new g(c,{type:"grab",cyPosition:{x:e[0],y:e[1]}}))}b(u,["touchstart","tapstart","vmousedown"],c,{cyPosition:{x:e[0],y:e[1]}}),null==u&&(a.data.bgActivePosistion={x:h[0],y:h[1]},a.redrawHint("select",!0),a.redraw()),a.touchData.startPosition=[];for(var x=0;x<e.length;x++)f[x]=e[x],a.touchData.startPosition[x]=e[x];a.touchData.startGPosition=[c.touches[0].clientX,c.touches[0].clientY],a.touchData.singleTouchMoved=!1,a.touchData.singleTouchStartTime=+new Date,clearTimeout(a.touchData.tapholdTimeout),a.touchData.tapholdTimeout=setTimeout(function(){a.touchData.singleTouchMoved!==!1||a.pinching||a.touchData.selecting||(b(a.touchData.start,["taphold"],c,{cyPosition:{x:e[0],y:e[1]}}),a.touchData.start||d.$(":selected").unselect())},a.tapholdDuration)}},!1);var R;a.registerBinding(window,"touchmove",R=function(c){var e=a.selection,i=a.touchData.capture,j=a.cy,k=a.touchData.now,l=a.touchData.earlier,m=j.zoom();if(c.touches[0]){var n=a.projectIntoViewport(c.touches[0].clientX,c.touches[0].clientY);k[0]=n[0],k[1]=n[1]}if(c.touches[1]){var n=a.projectIntoViewport(c.touches[1].clientX,c.touches[1].clientY);k[2]=n[0],k[3]=n[1]}if(c.touches[2]){var n=a.projectIntoViewport(c.touches[2].clientX,c.touches[2].clientY);k[4]=n[0],k[5]=n[1]}var o;if(i&&c.touches[0]){for(var p=[],q=0;q<k.length;q++)p[q]=k[q]-l[q];var s=a.touchData.startGPosition,u=c.touches[0].clientX-s[0],v=u*u,w=c.touches[0].clientY-s[1],x=w*w,y=v+x;o=y>=a.touchTapThreshold2}if(i&&a.touchData.cxt){c.preventDefault();var z=c.touches[0].clientX-J,A=c.touches[0].clientY-K,H=c.touches[1].clientX-J,L=c.touches[1].clientY-K,M=Q(z,A,H,L),O=M/G,R=150,S=R*R,T=1.5,U=T*T;if(O>=U||M>=S){a.touchData.cxt=!1,a.touchData.start&&(a.touchData.start.unactivate(),a.touchData.start=null),a.data.bgActivePosistion=void 0,a.redrawHint("select",!0);var V=new g(c,{type:"cxttapend",cyPosition:{x:k[0],y:k[1]}});a.touchData.start?a.touchData.start.trigger(V):j.trigger(V)}}if(i&&a.touchData.cxt){var V=new g(c,{type:"cxtdrag",cyPosition:{x:k[0],y:k[1]}});a.data.bgActivePosistion=void 0,a.redrawHint("select",!0),a.touchData.start?a.touchData.start.trigger(V):j.trigger(V),a.touchData.start&&(a.touchData.start._private.grabbed=!1),a.touchData.cxtDragged=!0;var W=a.findNearestElement(k[0],k[1],!0,!0);a.touchData.cxtOver&&W===a.touchData.cxtOver||(a.touchData.cxtOver&&a.touchData.cxtOver.trigger(new g(c,{type:"cxtdragout",cyPosition:{x:k[0],y:k[1]}})),a.touchData.cxtOver=W,W&&W.trigger(new g(c,{type:"cxtdragover",cyPosition:{x:k[0],y:k[1]}})))}else if(i&&c.touches[2]&&j.boxSelectionEnabled())c.preventDefault(),a.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,a.touchData.selecting||j.trigger("boxstart"),a.touchData.selecting=!0,a.redrawHint("select",!0),e&&0!==e.length&&void 0!==e[0]?(e[2]=(k[0]+k[2]+k[4])/3,e[3]=(k[1]+k[3]+k[5])/3):(e[0]=(k[0]+k[2]+k[4])/3,e[1]=(k[1]+k[3]+k[5])/3,e[2]=(k[0]+k[2]+k[4])/3+1,e[3]=(k[1]+k[3]+k[5])/3+1),e[4]=1,a.touchData.selecting=!0,a.redraw();else if(i&&c.touches[1]&&j.zoomingEnabled()&&j.panningEnabled()&&j.userZoomingEnabled()&&j.userPanningEnabled()){c.preventDefault(),a.data.bgActivePosistion=void 0,a.redrawHint("select",!0);var X=a.dragData.touchDragEles;if(X){a.redrawHint("drag",!0);for(var Y=0;Y<X.length;Y++)X[Y]._private.grabbed=!1,X[Y]._private.rscratch.inDragLayer=!1}var z=c.touches[0].clientX-J,A=c.touches[0].clientY-K,H=c.touches[1].clientX-J,L=c.touches[1].clientY-K,Z=P(z,A,H,L),$=Z/F;if(1!=$&&N){var _=z-B,aa=A-C,ba=H-D,ca=L-E,da=(_+ba)/2,ea=(aa+ca)/2,fa=j.zoom(),ga=fa*$,ha=j.pan(),ia=I[0]*fa+ha.x,ja=I[1]*fa+ha.y,ka={x:-ga/fa*(ia-ha.x-da)+ia,y:-ga/fa*(ja-ha.y-ea)+ja};if(a.touchData.start){var X=a.dragData.touchDragEles;t(X),a.redrawHint("drag",!0),a.redrawHint("eles",!0),a.touchData.start.trigger("free").unactivate()}j.viewport({zoom:ga,pan:ka,cancelOnFailedZoom:!0}),F=Z,B=z,C=A,D=H,E=L,a.pinching=!0}if(c.touches[0]){var n=a.projectIntoViewport(c.touches[0].clientX,c.touches[0].clientY);k[0]=n[0],k[1]=n[1]}if(c.touches[1]){var n=a.projectIntoViewport(c.touches[1].clientX,c.touches[1].clientY);k[2]=n[0],k[3]=n[1]}if(c.touches[2]){var n=a.projectIntoViewport(c.touches[2].clientX,c.touches[2].clientY);k[4]=n[0],k[5]=n[1]}}else if(c.touches[0]){var W,la=a.touchData.start,ma=a.touchData.last;if(a.hoverData.draggingEles||a.swipePanning||(W=a.findNearestElement(k[0],k[1],!0,!0)),i&&null!=la&&c.preventDefault(),i&&null!=la&&a.nodeIsDraggable(la))if(o){var X=a.dragData.touchDragEles,na=!a.dragData.didDrag;na&&r(j.collection(X),{inDragLayer:!0});for(var oa=0;oa<X.length;oa++){var pa=X[oa];if(a.nodeIsDraggable(pa)&&pa.grabbed()){a.dragData.didDrag=!0;var qa=pa._private.position,ra=!pa.isParent();if(ra&&d.number(p[0])&&d.number(p[1])&&(qa.x+=p[0],qa.y+=p[1]),na){a.redrawHint("eles",!0);var sa=a.touchData.dragDelta;ra&&sa&&d.number(sa[0])&&d.number(sa[1])&&(qa.x+=sa[0],qa.y+=sa[1])}}}var ta=j.collection(X);ta.updateCompoundBounds(),ta.trigger("position drag"),a.hoverData.draggingEles=!0,a.redrawHint("drag",!0),a.touchData.startPosition[0]==l[0]&&a.touchData.startPosition[1]==l[1]&&a.redrawHint("eles",!0),a.redraw()}else{var sa=a.touchData.dragDelta=a.touchData.dragDelta||[];0===sa.length?(sa.push(p[0]),sa.push(p[1])):(sa[0]+=p[0],sa[1]+=p[1])}if(b(la||W,["touchmove","tapdrag","vmousemove"],c,{cyPosition:{x:k[0],y:k[1]}}),la&&la.grabbed()||W==ma||(ma&&ma.trigger(new g(c,{type:"tapdragout",cyPosition:{x:k[0],y:k[1]}})),W&&W.trigger(new g(c,{type:"tapdragover",cyPosition:{x:k[0],y:k[1]}}))),a.touchData.last=W,i)for(var Y=0;Y<k.length;Y++)k[Y]&&a.touchData.startPosition[Y]&&o&&(a.touchData.singleTouchMoved=!0);if(i&&(null==la||la.isEdge())&&j.panningEnabled()&&j.userPanningEnabled()){var ua=h(la,a.touchData.starts);ua&&(c.preventDefault(),a.swipePanning?j.panBy({x:p[0]*m,y:p[1]*m}):o&&(a.swipePanning=!0,j.panBy({x:u*m,y:w*m}),la&&(la.unactivate(),a.data.bgActivePosistion||(a.data.bgActivePosistion=f.array2point(a.touchData.startPosition)),a.redrawHint("select",!0),a.touchData.start=null)));var n=a.projectIntoViewport(c.touches[0].clientX,c.touches[0].clientY);k[0]=n[0],k[1]=n[1]}}for(var q=0;q<k.length;q++)l[q]=k[q]},!1);var S;a.registerBinding(window,"touchcancel",S=function(b){var c=a.touchData.start;a.touchData.capture=!1,c&&c.unactivate()});var T;if(a.registerBinding(window,"touchend",T=function(c){var d=a.touchData.start,e=a.touchData.capture;if(e){a.touchData.capture=!1,c.preventDefault();var f=a.selection;a.swipePanning=!1,a.hoverData.draggingEles=!1;var h=a.cy,i=h.zoom(),j=a.touchData.now,k=a.touchData.earlier;if(c.touches[0]){var l=a.projectIntoViewport(c.touches[0].clientX,c.touches[0].clientY);j[0]=l[0],j[1]=l[1]}if(c.touches[1]){var l=a.projectIntoViewport(c.touches[1].clientX,c.touches[1].clientY);j[2]=l[0],j[3]=l[1]}if(c.touches[2]){var l=a.projectIntoViewport(c.touches[2].clientX,c.touches[2].clientY);j[4]=l[0],j[5]=l[1]}d&&d.unactivate();var m;if(a.touchData.cxt){if(m=new g(c,{type:"cxttapend",cyPosition:{x:j[0],y:j[1]}}),d?d.trigger(m):h.trigger(m),!a.touchData.cxtDragged){var n=new g(c,{type:"cxttap",cyPosition:{x:j[0],y:j[1]}});d?d.trigger(n):h.trigger(n)}return a.touchData.start&&(a.touchData.start._private.grabbed=!1),a.touchData.cxt=!1,a.touchData.start=null,void a.redraw()}if(!c.touches[2]&&h.boxSelectionEnabled()&&a.touchData.selecting){a.touchData.selecting=!1;var o=h.collection(a.getAllInBox(f[0],f[1],f[2],f[3]));f[0]=void 0,f[1]=void 0,f[2]=void 0,f[3]=void 0,f[4]=0,a.redrawHint("select",!0),h.trigger("boxend");var p=function(a){return a.selectable()&&!a.selected()};o.trigger("box").stdFilter(p).select().trigger("boxselect"),o.nonempty()&&a.redrawHint("eles",!0),a.redraw()}if(null!=d&&d.unactivate(),c.touches[2])a.data.bgActivePosistion=void 0,a.redrawHint("select",!0);else if(c.touches[1]);else if(c.touches[0]);else if(!c.touches[0]){a.data.bgActivePosistion=void 0,a.redrawHint("select",!0);var q=a.dragData.touchDragEles;if(null!=d){var r=d._private.grabbed;t(q),a.redrawHint("drag",!0),a.redrawHint("eles",!0),r&&d.trigger("free"),b(d,["touchend","tapend","vmouseup","tapdragout"],c,{cyPosition:{x:j[0],y:j[1]}}),d.unactivate(),a.touchData.start=null}else{var s=a.findNearestElement(j[0],j[1],!0,!0);b(s,["touchend","tapend","vmouseup","tapdragout"],c,{cyPosition:{x:j[0],y:j[1]}})}var u=a.touchData.startPosition[0]-j[0],v=u*u,w=a.touchData.startPosition[1]-j[1],x=w*w,y=v+x,z=y*i*i;null!=d&&!a.dragData.didDrag&&d._private.selectable&&z<a.touchTapThreshold2&&!a.pinching&&("single"===h.selectionType()?(h.$(":selected").unmerge(d).unselect(),d.select()):d.selected()?d.unselect():d.select(),a.redrawHint("eles",!0)),a.touchData.singleTouchMoved||b(d,["tap","vclick"],c,{cyPosition:{x:j[0],y:j[1]}}),a.touchData.singleTouchMoved=!0}for(var A=0;A<j.length;A++)k[A]=j[A];a.dragData.didDrag=!1,0===c.touches.length&&(a.touchData.dragDelta=[],a.touchData.startPosition=null,a.touchData.startGPosition=null),c.touches.length<2&&(a.pinching=!1,a.redrawHint("eles",!0),a.redraw())}},!1),"undefined"==typeof TouchEvent){var U=[],V=function(a){return{clientX:a.clientX,clientY:a.clientY,force:1,identifier:a.pointerId,pageX:a.pageX,pageY:a.pageY,radiusX:a.width/2,radiusY:a.height/2,screenX:a.screenX,screenY:a.screenY,target:a.target}},W=function(a){return{event:a,touch:V(a)}},X=function(a){U.push(W(a))},Y=function(a){for(var b=0;b<U.length;b++){var c=U[b];if(c.event.pointerId===a.pointerId)return void U.splice(b,1)}},Z=function(a){var b=U.filter(function(b){return b.event.pointerId===a.pointerId})[0];b.event=a,b.touch=V(a)},$=function(a){a.touches=U.map(function(a){return a.touch})};a.registerBinding(a.container,"pointerdown",function(a){"mouse"!==a.pointerType&&(a.preventDefault(),X(a),$(a),O(a))}),a.registerBinding(a.container,"pointerup",function(a){"mouse"!==a.pointerType&&(Y(a),$(a),T(a))}),a.registerBinding(a.container,"pointercancel",function(a){"mouse"!==a.pointerType&&(Y(a),$(a),S(a))}),a.registerBinding(a.container,"pointermove",function(a){"mouse"!==a.pointerType&&(a.preventDefault(),Z(a),$(a),R(a))})}},b.exports=h},{"../../../event":45,"../../../is":83,"../../../math":85,"../../../util":100}],62:[function(a,b,c){"use strict";var d=a("../../../math"),e={};e.generatePolygon=function(a,b){return this.nodeShapes[a]={renderer:this,name:a,points:b,draw:function(a,b,c,d,e){this.renderer.nodeShapeImpl("polygon",a,b,c,d,e,this.points)},intersectLine:function(a,b,c,e,f,g,h){return d.polygonIntersectLine(f,g,this.points,a,b,c/2,e/2,h)},checkPoint:function(a,b,c,e,f,g,h){return d.pointInsidePolygon(a,b,this.points,g,h,e,f,[0,-1],c)}}},e.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(a,b,c,d,e){this.renderer.nodeShapeImpl(this.name,a,b,c,d,e)},intersectLine:function(a,b,c,e,f,g,h){return d.intersectLineEllipse(f,g,a,b,c/2+h,e/2+h)},checkPoint:function(a,b,c,d,e,f,g){return a-=f,b-=g,a/=d/2+c,b/=e/2+c,1>=a*a+b*b}}},e.generateRoundRectangle=function(){return this.nodeShapes.roundrectangle={renderer:this,name:"roundrectangle",points:d.generateUnitNgonPointsFitToSquare(4,0),draw:function(a,b,c,d,e){this.renderer.nodeShapeImpl(this.name,a,b,c,d,e)},intersectLine:function(a,b,c,e,f,g,h){return d.roundRectangleIntersectLine(f,g,a,b,c,e,h)},checkPoint:function(a,b,c,e,f,g,h){var i=d.getRoundRectangleRadius(e,f);if(d.pointInsidePolygon(a,b,this.points,g,h,e,f-2*i,[0,-1],c))return!0;if(d.pointInsidePolygon(a,b,this.points,g,h,e-2*i,f,[0,-1],c))return!0;var j=function(a,b,c,d,e,f,g){return a-=c,b-=d,a/=e/2+g,b/=f/2+g,1>=a*a+b*b};return!!j(a,b,g-e/2+i,h-f/2+i,2*i,2*i,c)||(!!j(a,b,g+e/2-i,h-f/2+i,2*i,2*i,c)||(!!j(a,b,g+e/2-i,h+f/2-i,2*i,2*i,c)||!!j(a,b,g-e/2+i,h+f/2-i,2*i,2*i,c)))}}},e.registerNodeShapes=function(){var a=this.nodeShapes={},b=this;this.generateEllipse(),this.generatePolygon("triangle",d.generateUnitNgonPointsFitToSquare(3,0)),this.generatePolygon("rectangle",d.generateUnitNgonPointsFitToSquare(4,0)),a.square=a.rectangle,this.generateRoundRectangle(),this.generatePolygon("diamond",[0,1,1,0,0,-1,-1,0]),this.generatePolygon("pentagon",d.generateUnitNgonPointsFitToSquare(5,0)),this.generatePolygon("hexagon",d.generateUnitNgonPointsFitToSquare(6,0)),this.generatePolygon("heptagon",d.generateUnitNgonPointsFitToSquare(7,0)),this.generatePolygon("octagon",d.generateUnitNgonPointsFitToSquare(8,0));var c=new Array(20),e=d.generateUnitNgonPoints(5,0),f=d.generateUnitNgonPoints(5,Math.PI/5),g=.5*(3-Math.sqrt(5));g*=1.57;for(var h=0;h<f.length/2;h++)f[2*h]*=g,f[2*h+1]*=g;for(var h=0;5>h;h++)c[4*h]=e[2*h],c[4*h+1]=e[2*h+1],c[4*h+2]=f[2*h],c[4*h+3]=f[2*h+1];c=d.fitPolygonToSquare(c),this.generatePolygon("star",c),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),a.makePolygon=function(a){var c,d=a.join("$"),e="polygon-"+d;return(c=this[e])?c:b.generatePolygon(e,a)}},b.exports=e},{"../../../math":85}],63:[function(a,b,c){"use strict";var d=a("../../../util"),e={};e.timeToRender=function(){return this.redrawTotalTime/this.redrawCount},e.redraw=function(a){a=a||d.staticEmptyObject();var b=this;void 0===b.averageRedrawTime&&(b.averageRedrawTime=0),void 0===b.lastRedrawTime&&(b.lastRedrawTime=0),void 0===b.lastDrawTime&&(b.lastDrawTime=0),b.requestedFrame=!0,b.renderOptions=a},e.beforeRender=function(a,b){if(!this.destroyed){b=b||0;var c=this.beforeRenderCallbacks;c.push({fn:a,priority:b}),c.sort(function(a,b){return b.priority-a.priority})}};var f=function(a,b,c){for(var d=a.beforeRenderCallbacks,e=0;e<d.length;e++)d[e].fn(b,c)};e.startRenderLoop=function(){var a=this;if(!a.renderLoopStarted){a.renderLoopStarted=!0;var b=function(c){if(!a.destroyed){if(a.requestedFrame&&!a.skipFrame){f(a,!0,c);var e=d.performanceNow();a.render(a.renderOptions);var g=a.lastDrawTime=d.performanceNow();void 0===a.averageRedrawTime&&(a.averageRedrawTime=g-e),void 0===a.redrawCount&&(a.redrawCount=0),a.redrawCount++,void 0===a.redrawTotalTime&&(a.redrawTotalTime=0);var h=g-e;a.redrawTotalTime+=h,a.lastRedrawTime=h,a.averageRedrawTime=a.averageRedrawTime/2+h/2,a.requestedFrame=!1}else f(a,!1,c);a.skipFrame=!1,d.requestAnimationFrame(b)}};d.requestAnimationFrame(b)}},b.exports=e},{"../../../util":100}],64:[function(a,b,c){"use strict";var d,e={};e.arrowShapeImpl=function(a){return(d||(d={polygon:function(a,b){for(var c=0;c<b.length;c++){var d=b[c];a.lineTo(d.x,d.y)}},"triangle-backcurve":function(a,b,c){for(var d,e=0;e<b.length;e++){var f=b[e];0===e&&(d=f),a.lineTo(f.x,f.y)}a.quadraticCurveTo(c.x,c.y,d.x,d.y)},"triangle-tee":function(a,b,c){a.beginPath&&a.beginPath();for(var d=b,e=0;e<d.length;e++){var f=d[e];a.lineTo(f.x,f.y)}a.closePath&&a.closePath(),a.beginPath&&a.beginPath();var g=c,h=c[0];a.moveTo(h.x,h.y);for(var e=0;e<g.length;e++){var f=g[e];a.lineTo(f.x,f.y)}a.closePath&&a.closePath()},circle:function(a,b,c,d){a.arc(b,c,d,0,2*Math.PI,!1)}}))[a]},b.exports=e},{}],65:[function(a,b,c){"use strict";var d={};d.drawEdge=function(a,b,c,d,e){var f=b._private.rscratch,g=this.usePaths();if(!f.badLine&&!isNaN(f.allpts[0])&&b.visible()){var h;c&&(h=c,a.translate(-h.x1,-h.y1));var i=b.pstyle("overlay-padding").pfValue,j=b.pstyle("overlay-opacity").value,k=b.pstyle("overlay-color").value;if(e){if(0===j)return;this.strokeStyle(a,k[0],k[1],k[2],j),a.lineCap="round","self"!=f.edgeType||g||(a.lineCap="butt")}else{var l=b.pstyle("line-color").value;this.strokeStyle(a,l[0],l[1],l[2],b.pstyle("opacity").value),a.lineCap="butt"}a.lineJoin="round";var m=b.pstyle("width").pfValue+(e?2*i:0),n=e?"solid":b.pstyle("line-style").value;a.lineWidth=m;var o=b.pstyle("shadow-blur").pfValue,p=b.pstyle("shadow-opacity").value,q=b.pstyle("shadow-color").value,r=b.pstyle("shadow-offset-x").pfValue,s=b.pstyle("shadow-offset-y").pfValue;this.shadowStyle(a,q,e?0:p,o,r,s),this.drawEdgePath(b,a,f.allpts,n,m),this.drawArrowheads(a,b,e),this.shadowStyle(a,"transparent",0),e||this.drawEdge(a,b,!1,d,!0),this.drawElementText(a,b,d),c&&a.translate(h.x1,h.y1)}},d.drawEdgePath=function(a,b,c,d,e){var f,g=a._private.rscratch,h=b,i=!1,j=this.usePaths();if(j){var k=c.join("$"),l=g.pathCacheKey&&g.pathCacheKey===k;l?(f=b=g.pathCache,i=!0):(f=b=new Path2D,g.pathCacheKey=k,g.pathCache=f)}if(h.setLineDash)switch(d){case"dotted":h.setLineDash([1,1]);break;case"dashed":h.setLineDash([6,3]);break;case"solid":h.setLineDash([])}if(!i&&!g.badLine)switch(b.beginPath&&b.beginPath(),b.moveTo(c[0],c[1]),g.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var m=2;m+3<c.length;m+=4)b.quadraticCurveTo(c[m],c[m+1],c[m+2],c[m+3]);break;case"straight":case"segments":case"haystack":for(var m=2;m+1<c.length;m+=2)b.lineTo(c[m],c[m+1])}b=h,j?b.stroke(f):b.stroke(),b.setLineDash&&b.setLineDash([])},d.drawArrowheads=function(a,b,c){if(!c){var d=b._private.rscratch,e="haystack"===d.edgeType;e||this.drawArrowhead(a,b,"source",d.arrowStartX,d.arrowStartY,d.srcArrowAngle),this.drawArrowhead(a,b,"mid-target",d.midX,d.midY,d.midtgtArrowAngle),this.drawArrowhead(a,b,"mid-source",d.midX,d.midY,d.midsrcArrowAngle),e||this.drawArrowhead(a,b,"target",d.arrowEndX,d.arrowEndY,d.tgtArrowAngle)}},d.drawArrowhead=function(a,b,c,d,e,f){if(!(isNaN(d)||null==d||isNaN(e)||null==e||isNaN(f)||null==f)){var g=this,h=b.pstyle(c+"-arrow-shape").value;if("none"!==h){var i=a.globalCompositeOperation,j="hollow"===b.pstyle(c+"-arrow-fill").value?"both":"filled",k=b.pstyle(c+"-arrow-fill").value,l=b.pstyle("opacity").value;"half-triangle-overshot"===h&&(k="hollow",j="hollow"),1===l&&"hollow"!==k||(a.globalCompositeOperation="destination-out",g.fillStyle(a,255,255,255,1),g.strokeStyle(a,255,255,255,1),g.drawArrowShape(b,c,a,j,b.pstyle("width").pfValue,b.pstyle(c+"-arrow-shape").value,d,e,f),a.globalCompositeOperation=i);var m=b.pstyle(c+"-arrow-color").value;g.fillStyle(a,m[0],m[1],m[2],l),g.strokeStyle(a,m[0],m[1],m[2],l),g.drawArrowShape(b,c,a,k,b.pstyle("width").pfValue,b.pstyle(c+"-arrow-shape").value,d,e,f)}}},d.drawArrowShape=function(a,b,c,d,e,f,g,h,i){var j,k=this,l=this.usePaths(),m=a._private.rscratch,n=!1,o=c,p={x:g,y:h},q=this.getArrowWidth(e),r=k.arrowShapes[f];if(l){var s=q+"$"+f+"$"+i+"$"+g+"$"+h;m.arrowPathCacheKey=m.arrowPathCacheKey||{},m.arrowPathCache=m.arrowPathCache||{};var t=m.arrowPathCacheKey[b]===s;t?(j=c=m.arrowPathCache[b],n=!0):(j=c=new Path2D,m.arrowPathCacheKey[b]=s,m.arrowPathCache[b]=j)}c.beginPath&&c.beginPath(),n||r.draw(c,q,i,p),!r.leavePathOpen&&c.closePath&&c.closePath(),c=o,"filled"!==d&&"both"!==d||(l?c.fill(j):c.fill()),"hollow"!==d&&"both"!==d||(c.lineWidth=r.matchEdgeWidth?e:1,c.lineJoin="miter",l?c.stroke(j):c.stroke())},b.exports=d},{}],66:[function(a,b,c){"use strict";var d=a("../../../math"),e={};e.drawElement=function(a,b,c,d){var e=this;b.isNode()?e.drawNode(a,b,c,d):e.drawEdge(a,b,c,d)},e.drawCachedElement=function(a,b,c,e){var f=this,g=b.boundingBox();if(0!==g.w&&0!==g.h&&(!e||d.boundingBoxesIntersect(g,e))){var h=f.data.eleTxrCache.getElement(b,g,c);h?a.drawImage(h.texture.canvas,h.x,0,h.width,h.height,g.x1,g.y1,g.w,g.h):f.drawElement(a,b)}},e.drawElements=function(a,b){for(var c=this,d=0;d<b.length;d++){var e=b[d];c.drawElement(a,e)}},e.drawCachedElements=function(a,b,c,d){for(var e=this,f=0;f<b.length;f++){var g=b[f];e.drawCachedElement(a,g,c,d)}},e.drawCachedNodes=function(a,b,c,d){for(var e=this,f=0;f<b.length;f++){var g=b[f];g.isNode()&&e.drawCachedElement(a,g,c,d)}},e.drawLayeredElements=function(a,b,c,d){var e=this,f=e.data.lyrTxrCache.getLayers(b,c);if(f)for(var g=0;g<f.length;g++){var h=f[g],i=h.bb;0!==i.w&&0!==i.h&&a.drawImage(h.canvas,i.x1,i.y1,i.w,i.h)}else e.drawCachedElements(a,b,c,d)},b.exports=e},{"../../../math":85}],67:[function(a,b,c){"use strict";var d={};d.safeDrawImage=function(a,b,c,d,e,f,g,h,i,j){var k=this;try{a.drawImage(b,c,d,e,f,g,h,i,j)}catch(a){k.redrawHint("eles",!0),k.redrawHint("drag",!0),k.drawingImage=!0,k.redraw()}},d.drawInscribedImage=function(a,b,c){var d=this,e=c._private.position.x,f=c._private.position.y,g=c.pstyle("background-fit").value,h=c.pstyle("background-position-x"),i=c.pstyle("background-position-y"),j=c.pstyle("background-repeat").value,k=c.width(),l=c.height(),m=c._private.rscratch,n=c.pstyle("background-clip").value,o="node"===n,p=c.pstyle("background-image-opacity").value,q=b.width||b.cachedW,r=b.height||b.cachedH;null!=q&&null!=r||(document.body.appendChild(b),q=b.cachedW=b.width||b.offsetWidth,r=b.cachedH=b.height||b.offsetHeight,document.body.removeChild(b));var s=q,t=r,u=c.pstyle("background-width");"auto"!==u.value&&(s="%"===u.units?u.value/100*k:u.pfValue);var v=c.pstyle("background-height");if("auto"!==v.value&&(t="%"===v.units?v.value/100*l:v.pfValue),0!==s&&0!==t){if("contain"===g){var w=Math.min(k/s,l/t);s*=w,t*=w}else if("cover"===g){var w=Math.max(k/s,l/t);s*=w,t*=w}var x=e-k/2;x+="%"===h.units?(k-s)*h.value/100:h.pfValue;var y=f-l/2;y+="%"===i.units?(l-t)*i.value/100:i.pfValue,m.pathCache&&(x-=e,y-=f,e=0,f=0);var z=a.globalAlpha;if(a.globalAlpha=p,"no-repeat"===j)o&&(a.save(),m.pathCache?a.clip(m.pathCache):(d.nodeShapes[d.getNodeShape(c)].draw(a,e,f,k,l),a.clip())),d.safeDrawImage(a,b,0,0,q,r,x,y,s,t),o&&a.restore();else{var A=a.createPattern(b,j);a.fillStyle=A,d.nodeShapes[d.getNodeShape(c)].draw(a,e,f,k,l),a.translate(x,y),a.fill(),a.translate(-x,-y)}a.globalAlpha=z}},b.exports=d},{}],68:[function(a,b,c){"use strict";function d(a,b,c,d,e,f){var f=f||5;a.beginPath(),a.moveTo(b+f,c),a.lineTo(b+d-f,c),a.quadraticCurveTo(b+d,c,b+d,c+f),a.lineTo(b+d,c+e-f),a.quadraticCurveTo(b+d,c+e,b+d-f,c+e),a.lineTo(b+f,c+e),a.quadraticCurveTo(b,c+e,b,c+e-f),a.lineTo(b,c+f),a.quadraticCurveTo(b,c,b+f,c),a.closePath(),a.fill()}var e=a("../../../util"),f=a("../../../math"),g={};g.eleTextBiggerThanMin=function(a,b){if(!b){var c=a.cy().zoom(),d=this.getPixelRatio(),e=Math.ceil(f.log2(c*d));b=Math.pow(2,e)}var g=a.pstyle("font-size").pfValue*b,h=a.pstyle("min-zoomed-font-size").pfValue;return!(h>g)},g.drawElementText=function(a,b,c){var d=this;if(void 0===c){if(!d.eleTextBiggerThanMin(b))return}else if(!c)return;if(b.isNode()){var e=b.pstyle("label");if(!e||!e.value)return;var f=b.pstyle("text-halign").strValue;switch(b.pstyle("text-valign").strValue,f){case"left":a.textAlign="right";break;case"right":a.textAlign="left";break;default:a.textAlign="center"}a.textBaseline="bottom"}else{var e=b.pstyle("label"),g=b.pstyle("source-label"),h=b.pstyle("target-label");if(!(e&&e.value||g&&g.value||h&&h.value))return;a.textAlign="center",a.textBaseline="bottom"}d.drawText(a,b),b.isEdge()&&(d.drawText(a,b,"source"),d.drawText(a,b,"target"))},g.drawNodeText=g.drawEdgeText=g.drawElementText,g.getFontCache=function(a){var b;this.fontCaches=this.fontCaches||[];for(var c=0;c<this.fontCaches.length;c++)if(b=this.fontCaches[c],b.context===a)return b;return b={context:a},this.fontCaches.push(b),b},g.setupTextStyle=function(a,b){var c=b.effectiveOpacity(),d=b.pstyle("font-style").strValue,e=b.pstyle("font-size").pfValue+"px",f=b.pstyle("font-family").strValue,g=b.pstyle("font-weight").strValue,h=b.pstyle("text-opacity").value*b.pstyle("opacity").value*c,i=b.pstyle("text-outline-opacity").value*h,j=b.pstyle("color").value,k=b.pstyle("text-outline-color").value,l=b.pstyle("text-shadow-blur").pfValue,m=b.pstyle("text-shadow-opacity").value,n=b.pstyle("text-shadow-color").value,o=b.pstyle("text-shadow-offset-x").pfValue,p=b.pstyle("text-shadow-offset-y").pfValue,q=b._private.fontKey,r=this.getFontCache(a);r.key!==q&&(a.font=d+" "+g+" "+e+" "+f,r.key=q),a.lineJoin="round",this.fillStyle(a,j[0],j[1],j[2],h),this.strokeStyle(a,k[0],k[1],k[2],i),this.shadowStyle(a,n,m,l,o,p)},g.drawText=function(a,b,c){var f=b._private,g=f.rscratch,h=b.effectiveOpacity();if(0!==h&&0!==b.pstyle("text-opacity").value){var i=e.getPrefixedProperty(g,"labelX",c),j=e.getPrefixedProperty(g,"labelY",c),k=this.getLabelText(b,c);if(null!=k&&""!==k&&!isNaN(i)&&!isNaN(j)){this.setupTextStyle(a,b);var l=c?c+"-":"",m=e.getPrefixedProperty(g,"labelWidth",c),n=e.getPrefixedProperty(g,"labelHeight",c),o=e.getPrefixedProperty(g,"labelAngle",c),p=b.pstyle(l+"text-margin-x").pfValue,q=b.pstyle(l+"text-margin-y").pfValue,r=b.isEdge(),s=(b.isNode(),b.pstyle("text-halign").value),t=b.pstyle("text-valign").value;r&&(s="center",t="center"),i+=p,j+=q;var u,v=b.pstyle("text-rotation");if(u="autorotate"===v.strValue?r?o:0:"none"===v.strValue?0:v.pfValue,0!==u){var w=i,x=j;a.translate(w,x),a.rotate(u),i=0,j=0}switch(t){case"top":break;case"center":j+=n/2;break;case"bottom":j+=n}var y=b.pstyle("text-background-opacity").value,z=b.pstyle("text-border-opacity").value,A=b.pstyle("text-border-width").pfValue;if(y>0||A>0&&z>0){var B=i;switch(s){case"left":B-=m;break;case"center":B-=m/2;break;case"right":}var C=j-n;if(y>0){var D=a.fillStyle,E=b.pstyle("text-background-color").value;a.fillStyle="rgba("+E[0]+","+E[1]+","+E[2]+","+y*h+")";var F=b.pstyle("text-background-shape").strValue;"roundrectangle"==F?d(a,B,C,m,n,2):a.fillRect(B,C,m,n),a.fillStyle=D}if(A>0&&z>0){var G=a.strokeStyle,H=a.lineWidth,I=b.pstyle("text-border-color").value,J=b.pstyle("text-border-style").value;if(a.strokeStyle="rgba("+I[0]+","+I[1]+","+I[2]+","+z*h+")",a.lineWidth=A,a.setLineDash)switch(J){case"dotted":a.setLineDash([1,1]);break;case"dashed":a.setLineDash([4,2]);break;case"double":a.lineWidth=A/4,a.setLineDash([]);break;case"solid":a.setLineDash([])}if(a.strokeRect(B,C,m,n),"double"===J){var K=A/2;a.strokeRect(B+K,C+K,m-2*K,n-2*K)}a.setLineDash&&a.setLineDash([]),a.lineWidth=H,a.strokeStyle=G}}var L=2*b.pstyle("text-outline-width").pfValue;if(L>0&&(a.lineWidth=L),"wrap"===b.pstyle("text-wrap").value){var M=g.labelWrapCachedLines,N=n/M.length;switch(t){case"top":j-=(M.length-1)*N;break;case"center":case"bottom":j-=(M.length-1)*N}for(var O=0;O<M.length;O++)L>0&&a.strokeText(M[O],i,j),a.fillText(M[O],i,j),j+=N}else L>0&&a.strokeText(k,i,j),a.fillText(k,i,j);0!==u&&(a.rotate(-u),a.translate(-w,-x)),this.shadowStyle(a,"transparent",0)}}},b.exports=g},{"../../../math":85,"../../../util":100}],69:[function(a,b,c){"use strict";var d=a("../../../is"),e={};e.drawNode=function(a,b,c,e){var f,g,h=this,i=b._private.rscratch,j=b._private,k=k||j.position;if(d.number(k.x)&&d.number(k.y)&&b.visible()){var l,m=b.effectiveOpacity(),n=this.usePaths(),o=!1,p=b.pstyle("padding").pfValue;f=b.width()+2*p,g=b.height()+2*p,a.lineWidth=b.pstyle("border-width").pfValue;var q;c&&(q=c,a.translate(-q.x1,-q.y1));var r,s=b.pstyle("background-image"),t=s.value[2]||s.value[1];if(void 0!==t){var u=b.pstyle("background-image-crossorigin");r=this.getCachedImage(t,u,function(){b.trigger("background"),h.redrawHint("eles",!0),h.redrawHint("drag",!0),h.drawingImage=!0,h.redraw()});var v=j.backgrounding;j.backgrounding=!r.complete,v!==j.backgrounding&&b.updateStyle(!1)}var w=b.pstyle("background-color").value,x=b.pstyle("border-color").value,y=b.pstyle("border-style").value;this.fillStyle(a,w[0],w[1],w[2],b.pstyle("background-opacity").value*m),this.strokeStyle(a,x[0],x[1],x[2],b.pstyle("border-opacity").value*m);var z=b.pstyle("shadow-blur").pfValue,A=b.pstyle("shadow-opacity").value,B=b.pstyle("shadow-color").value,C=b.pstyle("shadow-offset-x").pfValue,D=b.pstyle("shadow-offset-y").pfValue;if(this.shadowStyle(a,B,A,z,C,D),a.lineJoin="miter",a.setLineDash)switch(y){case"dotted":a.setLineDash([1,1]);break;case"dashed":a.setLineDash([4,2]);break;case"solid":case"double":a.setLineDash([])}var E=b.pstyle("shape").strValue,F=b.pstyle("shape-polygon-points").pfValue;if(n){var G=E+"$"+f+"$"+g+("polygon"===E?"$"+F.join("$"):"");a.translate(k.x,k.y),i.pathCacheKey===G?(l=i.pathCache,o=!0):(l=new Path2D,i.pathCacheKey=G,i.pathCache=l)}if(!o){var H=k;n&&(H={x:0,y:0}),h.nodeShapes[this.getNodeShape(b)].draw(l||a,H.x,H.y,f,g)}n?a.fill(l):a.fill(),this.shadowStyle(a,"transparent",0),void 0!==t&&r.complete&&this.drawInscribedImage(a,r,b);var I=b.pstyle("background-blacken").value,J=b.pstyle("border-width").pfValue;if(this.hasPie(b)&&(this.drawPie(a,b,m),0===I&&0===J||n||h.nodeShapes[this.getNodeShape(b)].draw(a,k.x,k.y,f,g)),I>0?(this.fillStyle(a,0,0,0,I),n?a.fill(l):a.fill()):0>I&&(this.fillStyle(a,255,255,255,-I),n?a.fill(l):a.fill()),J>0&&(n?a.stroke(l):a.stroke(),"double"===y)){a.lineWidth=b.pstyle("border-width").pfValue/3;var K=a.globalCompositeOperation;a.globalCompositeOperation="destination-out",n?a.stroke(l):a.stroke(),a.globalCompositeOperation=K}n&&a.translate(-k.x,-k.y),a.setLineDash&&a.setLineDash([]),h.drawElementText(a,b,e);var L=b.pstyle("overlay-padding").pfValue,M=b.pstyle("overlay-opacity").value,N=b.pstyle("overlay-color").value;M>0&&(this.fillStyle(a,N[0],N[1],N[2],M),h.nodeShapes.roundrectangle.draw(a,b._private.position.x,b._private.position.y,f+2*L,g+2*L),a.fill()),c&&a.translate(q.x1,q.y1)}},e.hasPie=function(a){return a=a[0],a._private.hasPie},e.drawPie=function(a,b,c,d){b=b[0];var e=b._private,f=b.cy().style(),g=b.pstyle("pie-size"),h=b.width(),i=b.height(),d=d||e.position,j=d.x,k=d.y,l=Math.min(h,i)/2,m=0,n=this.usePaths();n&&(j=0,k=0),"%"===g.units?l=l*g.value/100:void 0!==g.pfValue&&(l=g.pfValue/2);for(var o=1;o<=f.pieBackgroundN;o++){var p=b.pstyle("pie-"+o+"-background-size").value,q=b.pstyle("pie-"+o+"-background-color").value,r=b.pstyle("pie-"+o+"-background-opacity").value*c,s=p/100;s+m>1&&(s=1-m);var t=1.5*Math.PI+2*Math.PI*m,u=2*Math.PI*s,v=t+u;0===p||m>=1||m+s>1||(a.beginPath(),a.moveTo(j,k),a.arc(j,k,l,t,v),a.closePath(),this.fillStyle(a,q[0],q[1],q[2],r),a.fill(),m+=s)}},b.exports=e},{"../../../is":83}],70:[function(a,b,c){"use strict";var d={},e=a("../../../util"),f=100;d.getPixelRatio=function(){var a=this.data.contexts[0];if(null!=this.forcedPixelRatio)return this.forcedPixelRatio;var b=a.backingStorePixelRatio||a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/b},d.paintCache=function(a){for(var b,c=this.paintCaches=this.paintCaches||[],d=!0,e=0;e<c.length;e++)if(b=c[e],b.context===a){d=!1;break}return d&&(b={context:a},c.push(b)),b},d.fillStyle=function(a,b,c,d,e){a.fillStyle="rgba("+b+","+c+","+d+","+e+")"},d.strokeStyle=function(a,b,c,d,e){a.strokeStyle="rgba("+b+","+c+","+d+","+e+")"},d.shadowStyle=function(a,b,c,d,e,f){var g=this.cy.zoom();c>0?(a.shadowBlur=d*g,a.shadowColor="rgba("+b[0]+","+b[1]+","+b[2]+","+c+")",a.shadowOffsetX=e*g,a.shadowOffsetY=f*g):(a.shadowBlur=0,a.shadowColor="transparent",a.shadowOffsetX=0,a.shadowOffsetY=0)},d.matchCanvasSize=function(a){var b=this,c=b.data,d=a.clientWidth,e=a.clientHeight,f=b.getPixelRatio(),g=b.motionBlurPxRatio;
a!==b.data.bufferCanvases[b.MOTIONBLUR_BUFFER_NODE]&&a!==b.data.bufferCanvases[b.MOTIONBLUR_BUFFER_DRAG]||(f=g);var h,i=d*f,j=e*f;if(i!==b.canvasWidth||j!==b.canvasHeight){b.fontCaches=null;var k=c.canvasContainer;k.style.width=d+"px",k.style.height=e+"px";for(var l=0;l<b.CANVAS_LAYERS;l++)h=c.canvases[l],h.width===i&&h.height===j||(h.width=i,h.height=j,h.style.width=d+"px",h.style.height=e+"px");for(var l=0;l<b.BUFFER_COUNT;l++)h=c.bufferCanvases[l],h.width===i&&h.height===j||(h.width=i,h.height=j,h.style.width=d+"px",h.style.height=e+"px");b.textureMult=1,1>=f&&(h=c.bufferCanvases[b.TEXTURE_BUFFER],b.textureMult=2,h.width=i*b.textureMult,h.height=j*b.textureMult),b.canvasWidth=i,b.canvasHeight=j}},d.renderTo=function(a,b,c,d){this.render({forcedContext:a,forcedZoom:b,forcedPan:c,drawAllLayers:!0,forcedPxRatio:d})},d.render=function(a){function b(a,b,c,d,e){var f=a.globalCompositeOperation;a.globalCompositeOperation="destination-out",k.fillStyle(a,255,255,255,k.motionBlurTransparency),a.fillRect(b,c,d,e),a.globalCompositeOperation=f}function c(a,c){var e,f,h,l;k.clearingMotionBlur||a!==n.bufferContexts[k.MOTIONBLUR_BUFFER_NODE]&&a!==n.bufferContexts[k.MOTIONBLUR_BUFFER_DRAG]?(e=A,f=y,h=k.canvasWidth,l=k.canvasHeight):(e={x:z.x*r,y:z.y*r},f=x*r,h=k.canvasWidth*r,l=k.canvasHeight*r),a.setTransform(1,0,0,1,0,0),"motionBlur"===c?b(a,0,0,h,l):d||void 0!==c&&!c||a.clearRect(0,0,h,l),g||(a.translate(e.x,e.y),a.scale(f,f)),j&&a.translate(j.x,j.y),i&&a.scale(i,i)}a=a||e.staticEmptyObject();var d=a.forcedContext,g=a.drawAllLayers,h=a.drawOnlyNodeLayer,i=a.forcedZoom,j=a.forcedPan,k=this,l=void 0===a.forcedPxRatio?this.getPixelRatio():a.forcedPxRatio,m=k.cy,n=k.data,o=n.canvasNeedsRedraw,p=k.textureOnViewport&&!d&&(k.pinching||k.hoverData.dragging||k.swipePanning||k.data.wheelZooming),q=void 0!==a.motionBlur?a.motionBlur:k.motionBlur,r=k.motionBlurPxRatio,s=m.hasCompoundNodes(),t=k.hoverData.draggingEles,u=!(!k.hoverData.selecting&&!k.touchData.selecting);q=q&&!d&&k.motionBlurEnabled&&!u;var v=q;d||(k.prevPxRatio!==l&&(k.invalidateContainerClientCoordsCache(),k.matchCanvasSize(k.container),k.redrawHint("eles",!0),k.redrawHint("drag",!0)),k.prevPxRatio=l),!d&&k.motionBlurTimeout&&clearTimeout(k.motionBlurTimeout),q&&(null==k.mbFrames&&(k.mbFrames=0),k.drawingImage||k.mbFrames++,k.mbFrames<3&&(v=!1),k.mbFrames>k.minMbLowQualFrames&&(k.motionBlurPxRatio=k.mbPxRBlurry)),k.clearingMotionBlur&&(k.motionBlurPxRatio=1),k.textureDrawLastFrame&&!p&&(o[k.NODE]=!0,o[k.SELECT_BOX]=!0);var w=m.style()._private.coreStyle,x=m.zoom(),y=void 0!==i?i:x,z=m.pan(),A={x:z.x,y:z.y},B={zoom:x,pan:{x:z.x,y:z.y}},C=k.prevViewport,D=void 0===C||B.zoom!==C.zoom||B.pan.x!==C.pan.x||B.pan.y!==C.pan.y;D||t&&!s||(k.motionBlurPxRatio=1),j&&(A=j),y*=l,A.x*=l,A.y*=l;var E=k.getCachedZSortedEles();if(p||(k.textureDrawLastFrame=!1),p){k.textureDrawLastFrame=!0;var F;if(!k.textureCache){k.textureCache={},F=k.textureCache.bb=m.mutableElements().boundingBox(),k.textureCache.texture=k.data.bufferCanvases[k.TEXTURE_BUFFER];var G=k.data.bufferContexts[k.TEXTURE_BUFFER];G.setTransform(1,0,0,1,0,0),G.clearRect(0,0,k.canvasWidth*k.textureMult,k.canvasHeight*k.textureMult),k.render({forcedContext:G,drawOnlyNodeLayer:!0,forcedPxRatio:l*k.textureMult});var B=k.textureCache.viewport={zoom:m.zoom(),pan:m.pan(),width:k.canvasWidth,height:k.canvasHeight};B.mpan={x:(0-B.pan.x)/B.zoom,y:(0-B.pan.y)/B.zoom}}o[k.DRAG]=!1,o[k.NODE]=!1;var H=n.contexts[k.NODE],I=k.textureCache.texture,B=k.textureCache.viewport;F=k.textureCache.bb,H.setTransform(1,0,0,1,0,0),q?b(H,0,0,B.width,B.height):H.clearRect(0,0,B.width,B.height);var J=w["outside-texture-bg-color"].value,K=w["outside-texture-bg-opacity"].value;k.fillStyle(H,J[0],J[1],J[2],K),H.fillRect(0,0,B.width,B.height);var x=m.zoom();c(H,!1),H.clearRect(B.mpan.x,B.mpan.y,B.width/B.zoom/l,B.height/B.zoom/l),H.drawImage(I,B.mpan.x,B.mpan.y,B.width/B.zoom/l,B.height/B.zoom/l)}else k.textureOnViewport&&!d&&(k.textureCache=null);var L=m.extent(),M=k.pinching||k.hoverData.dragging||k.swipePanning||k.data.wheelZooming||k.hoverData.draggingEles,N=k.hideEdgesOnViewport&&M,O=[];if(O[k.NODE]=!o[k.NODE]&&q&&!k.clearedForMotionBlur[k.NODE]||k.clearingMotionBlur,O[k.NODE]&&(k.clearedForMotionBlur[k.NODE]=!0),O[k.DRAG]=!o[k.DRAG]&&q&&!k.clearedForMotionBlur[k.DRAG]||k.clearingMotionBlur,O[k.DRAG]&&(k.clearedForMotionBlur[k.DRAG]=!0),o[k.NODE]||g||h||O[k.NODE]){var P=q&&!O[k.NODE]&&1!==r,H=d||(P?k.data.bufferContexts[k.MOTIONBLUR_BUFFER_NODE]:n.contexts[k.NODE]),Q=q&&!P?"motionBlur":void 0;c(H,Q),N?k.drawCachedNodes(H,E.nondrag,l,L):k.drawLayeredElements(H,E.nondrag,l,L),g||q||(o[k.NODE]=!1)}if(!h&&(o[k.DRAG]||g||O[k.DRAG])){var P=q&&!O[k.DRAG]&&1!==r,H=d||(P?k.data.bufferContexts[k.MOTIONBLUR_BUFFER_DRAG]:n.contexts[k.DRAG]);c(H,q&&!P?"motionBlur":void 0),N?k.drawCachedNodes(H,E.drag,l,L):k.drawCachedElements(H,E.drag,l,L),g||q||(o[k.DRAG]=!1)}if(k.showFps||!h&&o[k.SELECT_BOX]&&!g){var H=d||n.contexts[k.SELECT_BOX];if(c(H),1==k.selection[4]&&(k.hoverData.selecting||k.touchData.selecting)){var x=k.cy.zoom(),R=w["selection-box-border-width"].value/x;H.lineWidth=R,H.fillStyle="rgba("+w["selection-box-color"].value[0]+","+w["selection-box-color"].value[1]+","+w["selection-box-color"].value[2]+","+w["selection-box-opacity"].value+")",H.fillRect(k.selection[0],k.selection[1],k.selection[2]-k.selection[0],k.selection[3]-k.selection[1]),R>0&&(H.strokeStyle="rgba("+w["selection-box-border-color"].value[0]+","+w["selection-box-border-color"].value[1]+","+w["selection-box-border-color"].value[2]+","+w["selection-box-opacity"].value+")",H.strokeRect(k.selection[0],k.selection[1],k.selection[2]-k.selection[0],k.selection[3]-k.selection[1]))}if(n.bgActivePosistion&&!k.hoverData.selecting){var x=k.cy.zoom(),S=n.bgActivePosistion;H.fillStyle="rgba("+w["active-bg-color"].value[0]+","+w["active-bg-color"].value[1]+","+w["active-bg-color"].value[2]+","+w["active-bg-opacity"].value+")",H.beginPath(),H.arc(S.x,S.y,w["active-bg-size"].pfValue/x,0,2*Math.PI),H.fill()}var T=k.lastRedrawTime;if(k.showFps&&T){T=Math.round(T);var U=Math.round(1e3/T);H.setTransform(1,0,0,1,0,0),H.fillStyle="rgba(255, 0, 0, 0.75)",H.strokeStyle="rgba(255, 0, 0, 0.75)",H.lineWidth=1,H.fillText("1 frame = "+T+" ms = "+U+" fps",0,20);var V=60;H.strokeRect(0,30,250,20),H.fillRect(0,30,250*Math.min(U/V,1),20)}g||(o[k.SELECT_BOX]=!1)}if(q&&1!==r){var W=n.contexts[k.NODE],X=k.data.bufferCanvases[k.MOTIONBLUR_BUFFER_NODE],Y=n.contexts[k.DRAG],Z=k.data.bufferCanvases[k.MOTIONBLUR_BUFFER_DRAG],$=function(a,c,d){a.setTransform(1,0,0,1,0,0),d||!v?a.clearRect(0,0,k.canvasWidth,k.canvasHeight):b(a,0,0,k.canvasWidth,k.canvasHeight);var e=r;a.drawImage(c,0,0,k.canvasWidth*e,k.canvasHeight*e,0,0,k.canvasWidth,k.canvasHeight)};(o[k.NODE]||O[k.NODE])&&($(W,X,O[k.NODE]),o[k.NODE]=!1),(o[k.DRAG]||O[k.DRAG])&&($(Y,Z,O[k.DRAG]),o[k.DRAG]=!1)}k.prevViewport=B,k.clearingMotionBlur&&(k.clearingMotionBlur=!1,k.motionBlurCleared=!0,k.motionBlur=!0),q&&(k.motionBlurTimeout=setTimeout(function(){k.motionBlurTimeout=null,k.clearedForMotionBlur[k.NODE]=!1,k.clearedForMotionBlur[k.DRAG]=!1,k.motionBlur=!1,k.clearingMotionBlur=!p,k.mbFrames=0,o[k.NODE]=!0,o[k.DRAG]=!0,k.redraw()},f)),k.drawingImage=!1,d||k.initrender||(k.initrender=!0,m.trigger("initrender")),d||m.trigger("render")},b.exports=d},{"../../../util":100}],71:[function(a,b,c){"use strict";var d=a("../../../math"),e={};e.drawPolygonPath=function(a,b,c,d,e,f){var g=d/2,h=e/2;a.beginPath&&a.beginPath(),a.moveTo(b+g*f[0],c+h*f[1]);for(var i=1;i<f.length/2;i++)a.lineTo(b+g*f[2*i],c+h*f[2*i+1]);a.closePath()},e.drawRoundRectanglePath=function(a,b,c,e,f){var g=e/2,h=f/2,i=d.getRoundRectangleRadius(e,f);a.beginPath&&a.beginPath(),a.moveTo(b,c-h),a.arcTo(b+g,c-h,b+g,c,i),a.arcTo(b+g,c+h,b,c+h,i),a.arcTo(b-g,c+h,b-g,c,i),a.arcTo(b-g,c-h,b,c-h,i),a.lineTo(b,c-h),a.closePath()};for(var f=Math.sin(0),g=Math.cos(0),h={},i={},j=Math.PI/40,k=0*Math.PI;k<2*Math.PI;k+=j)h[k]=Math.sin(k),i[k]=Math.cos(k);e.drawEllipsePath=function(a,b,c,d,e){if(a.beginPath&&a.beginPath(),a.ellipse)a.ellipse(b,c,d/2,e/2,0,0,2*Math.PI);else for(var k,l,m=d/2,n=e/2,o=0*Math.PI;o<2*Math.PI;o+=j)k=b-m*h[o]*f+m*i[o]*g,l=c+n*i[o]*f+n*h[o]*g,0===o?a.moveTo(k,l):a.lineTo(k,l);a.closePath()},b.exports=e},{"../../../math":85}],72:[function(a,b,c){"use strict";var d=a("../../../math"),e=a("../../../util"),f=a("../../../heap"),g=a("./texture-cache-defs"),h=25,i=50,j=-4,k=2,l=3.99,m=8,n=1024,o=1024,p=1024,q=.5,r=.8,s=10,t=!1,u=!1,v=.15,w=.1,x=.9,y=.9,z=100,A=1,B={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},C=function(a){var b=this;b.renderer=a,b.onDequeues=[],b.setupDequeueing()},D=C.prototype;D.reasons=B,D.getTextureQueue=function(a){var b=this;return b.eleImgCaches=b.eleImgCaches||{},b.eleImgCaches[a]=b.eleImgCaches[a]||[]},D.getRetiredTextureQueue=function(a){var b=this,c=b.eleImgCaches.retired=b.eleImgCaches.retired||{},d=c[a]=c[a]||[];return d},D.getElementQueue=function(){var a=this,b=a.eleCacheQueue=a.eleCacheQueue||new f(function(a,b){return b.reqs-a.reqs});return b},D.getElementIdToQueue=function(){var a=this,b=a.eleIdToCacheQueue=a.eleIdToCacheQueue||{};return b},D.getElement=function(a,b,c,e,f){var g=this,n=this.renderer,q=a._private.rscratch,r=n.cy.zoom();if(0===b.w||0===b.h)return null;if(null==e&&(e=Math.ceil(d.log2(r*c))),j>e)e=j;else if(r>=l||e>k)return null;var s=Math.pow(2,e),v=b.h*s,w=b.w*s,x=q.imgCaches=q.imgCaches||{},y=x[e];if(y)return y;var z;if(z=h>=v?h:i>=v?i:Math.ceil(v/i)*i,v>p||w>o||!t&&a.isEdge()||!u&&a.isParent())return null;var A=g.getTextureQueue(z),C=A[A.length-2],D=function(){return g.recycleTexture(z,w)||g.addTexture(z,w)};C||(C=A[A.length-1]),C||(C=D()),C.width-C.usedWidth<w&&(C=D());for(var E,F=n.eleTextBiggerThanMin(a,s),G=function(a){return a&&a.scaledLabelShown===F},H=f&&f===B.dequeue,I=f&&f===B.highQuality,J=f&&f===B.downscale,K=e+1;k>=K;K++){var L=x[K];if(L){E=L;break}}var M=E&&E.level===e+1?E:null,N=function(){C.context.drawImage(M.texture.canvas,M.x,0,M.width,M.height,C.usedWidth,0,w,v)};if(G(M))N();else if(G(E)){if(!I)return g.queueElement(a,b,E.level-1),E;for(var K=E.level;K>e;K--)M=g.getElement(a,b,c,K,B.downscale);N()}else{var O;if(!H&&!I&&!J)for(var K=e-1;K>=j;K--){var L=x[K];if(L){O=L;break}}if(G(O))return g.queueElement(a,b,e),O;C.context.translate(C.usedWidth,0),C.context.scale(s,s),n.drawElement(C.context,a,b,F),C.context.scale(1/s,1/s),C.context.translate(-C.usedWidth,0)}return y=x[e]={ele:a,x:C.usedWidth,texture:C,level:e,scale:s,width:w,height:v,scaledLabelShown:F},C.usedWidth+=Math.ceil(w+m),C.eleCaches.push(y),g.checkTextureFullness(C),y},D.invalidateElement=function(a){var b=this,c=a._private.rscratch.imgCaches;if(c)for(var d=j;k>=d;d++){var f=c[d];if(f){var g=f.texture;g.invalidatedWidth+=f.width,c[d]=null,e.removeFromArray(g.eleCaches,f),b.checkTextureUtility(g)}}},D.checkTextureUtility=function(a){a.invalidatedWidth>=q*a.width&&this.retireTexture(a)},D.checkTextureFullness=function(a){var b=this,c=b.getTextureQueue(a.height);a.usedWidth/a.width>r&&a.fullnessChecks>=s?e.removeFromArray(c,a):a.fullnessChecks++},D.retireTexture=function(a){var b=this,c=a.height,d=b.getTextureQueue(c);e.removeFromArray(d,a),a.retired=!0;for(var f=a.eleCaches,g=0;g<f.length;g++){var h=f[g],i=h.ele,j=h.level,k=i._private.rscratch.imgCaches;k&&(k[j]=null)}e.clearArray(f);var l=b.getRetiredTextureQueue(c);l.push(a)},D.addTexture=function(a,b){var c=this,d=c.getTextureQueue(a),e={};return d.push(e),e.eleCaches=[],e.height=a,e.width=Math.max(n,b),e.usedWidth=0,e.invalidatedWidth=0,e.fullnessChecks=0,e.canvas=document.createElement("canvas"),e.canvas.width=e.width,e.canvas.height=e.height,e.context=e.canvas.getContext("2d"),e},D.recycleTexture=function(a,b){for(var c=this,d=c.getTextureQueue(a),f=c.getRetiredTextureQueue(a),g=0;g<f.length;g++){var h=f[g];if(h.width>=b)return h.retired=!1,h.usedWidth=0,h.invalidatedWidth=0,h.fullnessChecks=0,e.clearArray(h.eleCaches),h.context.clearRect(0,0,h.width,h.height),e.removeFromArray(f,h),d.push(h),h}},D.queueElement=function(a,b,c){var e=this,f=e.getElementQueue(),g=e.getElementIdToQueue(),h=a.id(),i=g[h];if(i)i.level=Math.max(i.level,c),i.reqs++,f.updateItem(i);else{var j={ele:a,bb:b,position:d.copyPosition(a.position()),level:c,reqs:1};a.isEdge()&&(j.positions={source:d.copyPosition(a.source().position()),target:d.copyPosition(a.target().position())}),f.push(j),g[h]=j}},D.dequeue=function(a,b){for(var c=this,e=c.getElementQueue(),f=c.getElementIdToQueue(),g=[],h=0;A>h&&e.size()>0;h++){var i=e.pop();f[i.ele.id()]=null,g.push(i);var j,k=i.ele;j=(!k.isEdge()||d.arePositionsSame(k.source().position(),i.positions.source)&&d.arePositionsSame(k.target().position(),i.positions.target))&&d.arePositionsSame(k.position(),i.position)?i.bb:k.boundingBox(),c.getElement(i.ele,j,a,i.level,B.dequeue)}return g},D.onDequeue=function(a){this.onDequeues.push(a)},D.offDequeue=function(a){e.removeFromArray(this.onDequeues,a)},D.setupDequeueing=g.setupDequeueing({deqRedrawThreshold:z,deqCost:v,deqAvgCost:w,deqNoDrawCost:x,deqFastCost:y,deq:function(a,b,c){return a.dequeue(b,c)},onDeqd:function(a,b){for(var c=0;c<a.onDequeues.length;c++){var d=a.onDequeues[c];d(b)}},shouldRedraw:function(a,b,c,e){for(var f=0;f<b.length;f++){var g=b[f].bb;if(d.boundingBoxesIntersect(g,e))return!0}return!1},priority:function(a){return a.renderer.beforeRenderPriorities.eleTxrDeq}}),b.exports=C},{"../../../heap":81,"../../../math":85,"../../../util":100,"./texture-cache-defs":77}],73:[function(a,b,c){"use strict";var d=a("../../../is"),e={};e.createBuffer=function(a,b){var c=document.createElement("canvas");return c.width=a,c.height=b,[c,c.getContext("2d")]},e.bufferCanvasImage=function(a){var b=this.cy,c=b.mutableElements(),e=c.boundingBox(),f=a.full?Math.ceil(e.w):this.container.clientWidth,g=a.full?Math.ceil(e.h):this.container.clientHeight,h=d.number(a.maxWidth)||d.number(a.maxHeight),i=this.getPixelRatio(),j=1;if(void 0!==a.scale)f*=a.scale,g*=a.scale,j=a.scale;else if(h){var k=1/0,l=1/0;d.number(a.maxWidth)&&(k=j*a.maxWidth/f),d.number(a.maxHeight)&&(l=j*a.maxHeight/g),j=Math.min(k,l),f*=j,g*=j}h||(f*=i,g*=i,j*=i);var m=document.createElement("canvas");m.width=f,m.height=g,m.style.width=f+"px",m.style.height=g+"px";var n=m.getContext("2d");if(f>0&&g>0){n.clearRect(0,0,f,g),a.bg&&(n.fillStyle=a.bg,n.rect(0,0,f,g),n.fill()),n.globalCompositeOperation="source-over";var o=this.getCachedZSortedEles();if(a.full)n.translate(-e.x1*j,-e.y1*j),n.scale(j,j),this.drawElements(n,o);else{var p=b.pan(),q={x:p.x*j,y:p.y*j};j*=b.zoom(),n.translate(q.x,q.y),n.scale(j,j),this.drawElements(n,o)}}return m},e.png=function(a){return this.bufferCanvasImage(a).toDataURL("image/png")},e.jpg=function(a){return this.bufferCanvasImage(a).toDataURL("image/jpeg")},b.exports=e},{"../../../is":83}],74:[function(a,b,c){"use strict";function d(a){var b=this;b.data={canvases:new Array(j.CANVAS_LAYERS),contexts:new Array(j.CANVAS_LAYERS),canvasNeedsRedraw:new Array(j.CANVAS_LAYERS),bufferCanvases:new Array(j.BUFFER_COUNT),bufferContexts:new Array(j.CANVAS_LAYERS)},b.data.canvasContainer=document.createElement("div");var c=b.data.canvasContainer.style;b.data.canvasContainer.setAttribute("style","-webkit-tap-highlight-color: rgba(0,0,0,0);"),c.position="relative",c.zIndex="0",c.overflow="hidden";var d=a.cy.container();d.appendChild(b.data.canvasContainer),d.setAttribute("style",(d.getAttribute("style")||"")+"-webkit-tap-highlight-color: rgba(0,0,0,0);");for(var e=0;e<j.CANVAS_LAYERS;e++){var i=b.data.canvases[e]=document.createElement("canvas");b.data.contexts[e]=i.getContext("2d"),i.setAttribute("style","-webkit-user-select: none; -moz-user-select: -moz-none; user-select: none; -webkit-tap-highlight-color: rgba(0,0,0,0); outline-style: none;"+(f.ms()?" -ms-touch-action: none; touch-action: none; ":"")),i.style.position="absolute",i.setAttribute("data-id","layer"+e),i.style.zIndex=String(j.CANVAS_LAYERS-e),b.data.canvasContainer.appendChild(i),b.data.canvasNeedsRedraw[e]=!1}b.data.topCanvas=b.data.canvases[0],b.data.canvases[j.NODE].setAttribute("data-id","layer"+j.NODE+"-node"),b.data.canvases[j.SELECT_BOX].setAttribute("data-id","layer"+j.SELECT_BOX+"-selectbox"),b.data.canvases[j.DRAG].setAttribute("data-id","layer"+j.DRAG+"-drag");for(var e=0;e<j.BUFFER_COUNT;e++)b.data.bufferCanvases[e]=document.createElement("canvas"),b.data.bufferContexts[e]=b.data.bufferCanvases[e].getContext("2d"),b.data.bufferCanvases[e].style.position="absolute",b.data.bufferCanvases[e].setAttribute("data-id","buffer"+e),b.data.bufferCanvases[e].style.zIndex=String(-e-1),b.data.bufferCanvases[e].style.visibility="hidden";b.pathsEnabled=!0,b.data.eleTxrCache=new g(b),b.data.lyrTxrCache=new h(b,b.data.eleTxrCache),b.onUpdateEleCalcs(function(a,c){for(var d=0;d<c.length;d++){var e=c[d],f=e._private.rstyle,g=f.dirtyEvents;e.isNode()&&g&&1===g.length&&g.position||b.data.eleTxrCache.invalidateElement(e)}c.length>0&&b.data.lyrTxrCache.invalidateElements(c)})}var e=a("../../../util"),f=a("../../../is"),g=a("./ele-texture-cache"),h=a("./layered-texture-cache"),i=d,j=d.prototype;j.CANVAS_LAYERS=3,j.SELECT_BOX=0,j.DRAG=1,j.NODE=2,j.BUFFER_COUNT=3,j.TEXTURE_BUFFER=0,j.MOTIONBLUR_BUFFER_NODE=1,j.MOTIONBLUR_BUFFER_DRAG=2,j.redrawHint=function(a,b){var c=this;switch(a){case"eles":c.data.canvasNeedsRedraw[j.NODE]=b;break;case"drag":c.data.canvasNeedsRedraw[j.DRAG]=b;break;case"select":c.data.canvasNeedsRedraw[j.SELECT_BOX]=b}};var k="undefined"!=typeof Path2D;j.path2dEnabled=function(a){return void 0===a?this.pathsEnabled:void(this.pathsEnabled=!!a)},j.usePaths=function(){return k&&this.pathsEnabled},[a("./arrow-shapes"),a("./drawing-elements"),a("./drawing-edges"),a("./drawing-images"),a("./drawing-label-text"),a("./drawing-nodes"),a("./drawing-redraw"),a("./drawing-shapes"),a("./export-image"),a("./node-shapes")].forEach(function(a){e.extend(j,a)}),b.exports=i},{"../../../is":83,"../../../util":100,"./arrow-shapes":64,"./drawing-edges":65,"./drawing-elements":66,"./drawing-images":67,"./drawing-label-text":68,"./drawing-nodes":69,"./drawing-redraw":70,"./drawing-shapes":71,"./ele-texture-cache":72,"./export-image":73,"./layered-texture-cache":75,"./node-shapes":76}],75:[function(a,b,c){"use strict";function d(a,b){null!=a.imageSmoothingEnabled?a.imageSmoothingEnabled=b:(a.webkitImageSmoothingEnabled=b,a.mozImageSmoothingEnabled=b,a.msImageSmoothingEnabled=b)}var e=a("../../../util"),f=a("../../../math"),g=a("../../../heap"),h=a("../../../is"),i=a("./texture-cache-defs"),j=1,k=-4,l=2,m=3.99,n=50,o=50,p=!0,q=.15,r=.1,s=.9,t=.9,u=1,v=250,w=16e6,x=!0,y=!0,z=!0,A=function(a,b){var c=this,d=c.renderer=a;c.layersByLevel={},c.firstGet=!0,c.lastInvalidationTime=e.performanceNow()-2*v,c.skipping=!1,d.beforeRender(function(a,b){b-c.lastInvalidationTime<=v?c.skipping=!0:c.skipping=!1});var f=function(a,b){return b.reqs-a.reqs};c.layersQueue=new g(f),c.eleTxrCache=b,c.setupEleCacheInvalidation(),c.setupDequeueing()},B=A.prototype,C=0,D=Math.pow(2,53)-1;B.makeLayer=function(a,b){var c=Math.pow(2,b),d=Math.ceil(a.w*c),e=Math.ceil(a.h*c),f=document.createElement("canvas");f.width=d,f.height=e;var g={id:C=++C%D,bb:a,level:b,width:d,height:e,canvas:f,context:f.getContext("2d"),eles:[],elesQueue:[],reqs:0},h=g.context,i=-g.bb.x1,j=-g.bb.y1;return h.scale(c,c),h.translate(i,j),g},B.getLayers=function(a,b,c){var d=this,g=d.renderer,h=g.cy,i=h.zoom(),n=d.firstGet;if(d.firstGet=!1,null==c)if(c=Math.ceil(f.log2(i*b)),k>c)c=k;else if(i>=m||c>l)return null;d.validateLayersElesOrdering(c,a);var o,p,q=d.layersByLevel,r=Math.pow(2,c),s=q[c]=q[c]||[],t=d.levelIsComplete(c,a),u=function(){var b=function(b){return d.validateLayersElesOrdering(b,a),d.levelIsComplete(b,a)?(p=q[b],!0):void 0},f=function(a){if(!p)for(var d=c+a;d>=k&&l>=d&&!b(d);d+=a);};f(1),f(-1);for(var g=s.length-1;g>=0;g--){var h=s[g];h.invalid&&e.removeFromArray(s,h)}};if(t)return s;u();var v=function(){if(!o){o=f.makeBoundingBox();for(var b=0;b<a.length;b++)f.updateBoundingBox(o,a[b].boundingBox())}return o},y=function(a){a=a||{};var b=a.after;v();var e=o.w*r*(o.h*r);if(e>w)return null;var f=d.makeLayer(o,c);if(null!=b){var g=s.indexOf(b)+1;s.splice(g,0,f)}else(void 0===a.insert||a.insert)&&s.unshift(f);return f};if(d.skipping&&!n)return null;for(var z=null,A=a.length/j,B=x&&!n,C=0;C<a.length;C++){var D=a[C],E=D._private.rscratch,F=E.imgLayerCaches=E.imgLayerCaches||{},G=F[c];if(G)z=G;else{if((!z||z.eles.length>=A||!f.boundingBoxInBoundingBox(z.bb,D.boundingBox()))&&(z=y({insert:!0,after:z}),!z))return null;p||B?d.queueLayer(z,D):d.drawEleInLayer(z,D,c,b),z.eles.push(D),F[c]=z}}return p?p:B?null:s},B.getEleLevelForLayerLevel=function(a,b){return a},B.drawEleInLayer=function(a,b,c,e){var f=this,g=this.renderer,h=a.context,i=b.boundingBox();if(0!==i.w&&0!==i.h){var j=f.eleTxrCache,k=y?j.reasons.highQuality:void 0;c=f.getEleLevelForLayerLevel(c,e);var l=z?j.getElement(b,i,null,c,k):null;l?(p&&d(h,!1),h.drawImage(l.texture.canvas,l.x,0,l.width,l.height,i.x1,i.y1,i.w,i.h),p&&d(h,!0)):g.drawElement(h,b)}},B.levelIsComplete=function(a,b){var c=this,d=c.layersByLevel[a];if(!d||0===d.length)return!1;for(var e=0,f=0;f<d.length;f++){var g=d[f];if(g.reqs>0)return!1;if(g.invalid)return!1;e+=g.eles.length}return e===b.length},B.validateLayersElesOrdering=function(a,b){var c=this.layersByLevel[a];if(c)for(var d=0;d<c.length;d++){for(var e=c[d],f=-1,g=0;g<b.length;g++)if(e.eles[0]===b[g]){f=g;break}if(0>f)this.invalidateLayer(e);else for(var h=f,g=0;g<e.eles.length;g++)if(e.eles[g]!==b[h+g]){this.invalidateLayer(e);break}}},B.updateElementsInLayers=function(a,b){for(var c=this,d=h.element(a[0]),e=0;e<a.length;e++)for(var f=d?null:a[e],g=d?a[e]:a[e].ele,i=g._private.rscratch,j=i.imgLayerCaches=i.imgLayerCaches||{},m=k;l>=m;m++){var n=j[m];n&&(f&&c.getEleLevelForLayerLevel(n.level)!==f.level||b(n,g,f))}},B.haveLayers=function(){for(var a=this,b=!1,c=k;l>=c;c++){var d=a.layersByLevel[c];if(d&&d.length>0){b=!0;break}}return b},B.invalidateElements=function(a){var b=this;b.lastInvalidationTime=e.performanceNow(),0!==a.length&&b.haveLayers()&&b.updateElementsInLayers(a,function(a,c,d){b.invalidateLayer(a)})},B.invalidateLayer=function(a){if(this.lastInvalidationTime=e.performanceNow(),!a.invalid){var b=a.level,c=a.eles,d=this.layersByLevel[b];e.removeFromArray(d,a),a.elesQueue=[],a.invalid=!0,a.replacement&&(a.replacement.invalid=!0);for(var f=0;f<c.length;f++){var g=c[f]._private.rscratch.imgLayerCaches;g&&(g[b]=null)}}},B.refineElementTextures=function(a){var b=this;b.updateElementsInLayers(a,function(a,c,d){var e=a.replacement;if(e||(e=a.replacement=b.makeLayer(a.bb,a.level),e.replaces=a,e.eles=a.eles),!e.reqs)for(var f=0;f<e.eles.length;f++)b.queueLayer(e,e.eles[f])})},B.setupEleCacheInvalidation=function(){var a=this,b=[];if(z){var c=e.debounce(function(){a.refineElementTextures(b),b=[]},o);a.eleTxrCache.onDequeue(function(a){for(var d=0;d<a.length;d++)b.push(a[d]);c()})}},B.queueLayer=function(a,b){var c=this,d=c.layersQueue,e=a.elesQueue,f=e.hasId=e.hasId||{};if(!a.replacement){if(b){if(f[b.id()])return;e.push(b),f[b.id()]=!0}a.reqs?(a.reqs++,d.updateItem(a)):(a.reqs=1,d.push(a))}},B.dequeue=function(a){for(var b=this,c=b.layersQueue,d=[],e=0;u>e&&0!==c.size();){var f=c.peek();if(f.replacement)c.pop();else if(f.replaces&&f!==f.replaces.replacement)c.pop();else if(f.invalid)c.pop();else{var g=f.elesQueue.shift();g&&(b.drawEleInLayer(f,g,f.level,a),e++),0===d.length&&d.push(!0),0===f.elesQueue.length&&(c.pop(),f.reqs=0,f.replaces&&b.applyLayerReplacement(f),b.requestRedraw())}}return d},B.applyLayerReplacement=function(a){var b=this,c=b.layersByLevel[a.level],d=a.replaces,e=c.indexOf(d);if(!(0>e||d.invalid)){c[e]=a;for(var f=0;f<a.eles.length;f++){var g=a.eles[f]._private,h=g.imgLayerCaches=g.imgLayerCaches||{};h&&(h[a.level]=a)}b.requestRedraw()}},B.requestRedraw=e.debounce(function(){var a=this.renderer;a.redrawHint("eles",!0),a.redrawHint("drag",!0),a.redraw()},100),B.setupDequeueing=i.setupDequeueing({deqRedrawThreshold:n,deqCost:q,deqAvgCost:r,deqNoDrawCost:s,deqFastCost:t,deq:function(a,b){return a.dequeue(b)},onDeqd:e.noop,shouldRedraw:e.trueify,priority:function(a){return a.renderer.beforeRenderPriorities.lyrTxrDeq}}),b.exports=A},{"../../../heap":81,"../../../is":83,"../../../math":85,"../../../util":100,"./texture-cache-defs":77}],76:[function(a,b,c){"use strict";var d={};d.nodeShapeImpl=function(a,b,c,d,e,f,g){switch(a){case"ellipse":return this.drawEllipsePath(b,c,d,e,f);case"polygon":return this.drawPolygonPath(b,c,d,e,f,g);case"roundrectangle":return this.drawRoundRectanglePath(b,c,d,e,f)}},b.exports=d},{}],77:[function(a,b,c){"use strict";var d=a("../../../util"),e=1e3/60;b.exports={setupDequeueing:function(a){return function(){var b=this,c=this.renderer;if(!b.dequeueingSetup){b.dequeueingSetup=!0;var f=d.debounce(function(){c.redrawHint("eles",!0),c.redrawHint("drag",!0),c.redraw()},a.deqRedrawThreshold),g=function(g,h){for(var i=d.performanceNow(),j=c.averageRedrawTime,k=c.lastRedrawTime,l=[],m=c.cy.extent(),n=c.getPixelRatio();;){var o=d.performanceNow(),p=o-i,q=o-h;if(e>k){var r=e-(g?j:0);if(q>=a.deqFastCost*r)break}else if(g){if(p>=a.deqCost*k||p>=a.deqAvgCost*j)break}else if(q>=a.deqNoDrawCost*e)break;var s=a.deq(b,n,m);if(!(s.length>0))break;for(var t=0;t<s.length;t++)l.push(s[t])}l.length>0&&(a.onDeqd(b,l),!g&&a.shouldRedraw(b,l,n,m)&&f())},h=a.priority||d.noop;c.beforeRender(g,h(b))}}}}},{"../../../util":100}],78:[function(a,b,c){"use strict";b.exports=[{name:"null",impl:a("./null")},{name:"base",impl:a("./base")},{name:"canvas",impl:a("./canvas")}]},{"./base":60,"./canvas":74,"./null":79}],79:[function(a,b,c){"use strict";function d(a){this.options=a,this.notifications=0}var e=function(){};d.prototype={recalculateRenderedStyle:e,notify:function(){this.notifications++},init:e},b.exports=d},{}],80:[function(a,b,c){"use strict";var d=a("./is"),e=a("./util"),f=a("./thread"),g=a("./promise"),h=a("./define"),i=function(b){if(!(this instanceof i))return new i(b);this._private={pass:[]};var c=4;if(d.number(b),"undefined"!=typeof navigator&&null!=navigator.hardwareConcurrency)b=navigator.hardwareConcurrency;else try{b=a("os").cpus().length}catch(a){b=c}for(var e=0;b>e;e++)this[e]=new f;this.length=b},j=i.prototype;e.extend(j,{instanceString:function(){return"fabric"},require:function(a,b){for(var c=0;c<this.length;c++){var d=this[c];d.require(a,b)}return this},random:function(){var a=Math.round((this.length-1)*Math.random()),b=this[a];return b},run:function(a){var b=this._private.pass.shift();return this.random().pass(b).run(a)},message:function(a){return this.random().message(a)},broadcast:function(a){for(var b=0;b<this.length;b++){var c=this[b];c.message(a)}return this},stop:function(){for(var a=0;a<this.length;a++){var b=this[a];b.stop()}return this},pass:function(a){var b=this._private.pass;if(!d.array(a))throw"Only arrays may be used with fabric.pass()";return b.push(a),this},spreadSize:function(){var a=Math.ceil(this._private.pass[0].length/this.length);return a=Math.max(1,a)},spread:function(a){for(var b=this,c=b._private,d=b.spreadSize(),e=c.pass.shift().concat([]),f=[],h=0;h<this.length;h++){var i=this[h],j=e.splice(0,d),k=i.pass(j).run(a);f.push(k);var l=0===e.length;if(l)break}return g.all(f).then(function(a){for(var b=[],c=0,d=0;d<a.length;d++)for(var e=a[d],f=0;f<e.length;f++){var g=e[f];b[c++]=g}return b})},map:function(a){var b=this;return b.require(a,"_$_$_fabmap"),b.spread(function(a){var b=[],c=resolve;resolve=function(a){b.push(a)};for(var d=0;d<a.length;d++){var e=b.length,f=_$_$_fabmap(a[d]),g=e===b.length;g&&b.push(f)}return resolve=c,b})},filter:function(a){var b=this._private,c=b.pass[0];return this.map(a).then(function(a){for(var b=[],d=0;d<c.length;d++){var e=c[d],f=a[d];f&&b.push(e)}return b})},sort:function(a){var b=this,c=this._private.pass[0].length,d=this.spreadSize();return a=a||function(a,b){return b>a?-1:a>b?1:0},b.require(a,"_$_$_cmp"),b.spread(function(a){var b=a.sort(_$_$_cmp);resolve(b)}).then(function(b){for(var e=function(d,e,f){e=Math.min(e,c),f=Math.min(f,c);for(var g=d,h=e,i=[],j=g;f>j;j++){var k=b[d],l=b[e];h>d&&(e>=f||a(k,l)<=0)?(i.push(k),d++):(i.push(l),e++)}for(var j=0;j<i.length;j++){var m=g+j;b[m]=i[j]}},f=d;c>f;f*=2)for(var g=0;c>g;g+=2*f)e(g,g+f,g+2*f);return b})}});var k=function(a){return a=a||{},function(b,c){var d=this._private.pass.shift();return this.random().pass(d)[a.threadFn](b,c)}};e.extend(j,{randomMap:k({threadFn:"map"}),reduce:k({threadFn:"reduce"}),reduceRight:k({threadFn:"reduceRight"})});var l=j;l.promise=l.run,l.terminate=l.halt=l.stop,l.include=l.require,e.extend(j,{on:h.on(),one:h.on({unbindSelfOnTrigger:!0}),off:h.off(),trigger:h.trigger()}),h.eventAliasesOn(j),b.exports=i},{"./define":44,"./is":83,"./promise":86,"./thread":98,"./util":100,os:void 0}],81:[function(a,b,c){"use strict";var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;f=Math.floor,m=Math.min,e=function(a,b){return b>a?-1:a>b?1:0},l=function(a,b,c,d,g){var h;if(null==c&&(c=0),null==g&&(g=e),0>c)throw new Error("lo must be non-negative");for(null==d&&(d=a.length);d>c;)h=f((c+d)/2),g(b,a[h])<0?d=h:c=h+1;return[].splice.apply(a,[c,c-c].concat(b)),b},i=function(a,b,c){return null==c&&(c=e),a.push(b),q(a,0,a.length-1,c)},h=function(a,b){var c,d;return null==b&&(b=e),c=a.pop(),a.length?(d=a[0],a[0]=c,r(a,0,b)):d=c,d},k=function(a,b,c){var d;return null==c&&(c=e),d=a[0],a[0]=b,r(a,0,c),d},j=function(a,b,c){var d;return null==c&&(c=e),a.length&&c(a[0],b)<0&&(d=[a[0],b],b=d[0],a[0]=d[1],r(a,0,c)),b},g=function(a,b){var c,d,g,h,i,j;for(null==b&&(b=e),h=function(){j=[];for(var b=0,c=f(a.length/2);c>=0?c>b:b>c;c>=0?b++:b--)j.push(b);return j}.apply(this).reverse(),i=[],d=0,g=h.length;g>d;d++)c=h[d],i.push(r(a,c,b));return i},p=function(a,b,c){var d;return null==c&&(c=e),d=a.indexOf(b),-1!==d?(q(a,0,d,c),r(a,d,c)):void 0},n=function(a,b,c){var d,f,h,i,k;if(null==c&&(c=e),f=a.slice(0,b),!f.length)return f;for(g(f,c),k=a.slice(b),h=0,i=k.length;i>h;h++)d=k[h],j(f,d,c);return f.sort(c).reverse()},o=function(a,b,c){var d,f,i,j,k,n,o,p,q,r;if(null==c&&(c=e),10*b<=a.length){if(j=a.slice(0,b).sort(c),!j.length)return j;for(i=j[j.length-1],p=a.slice(b),k=0,o=p.length;o>k;k++)d=p[k],c(d,i)<0&&(l(j,d,0,null,c),j.pop(),i=j[j.length-1]);return j}for(g(a,c),r=[],f=n=0,q=m(b,a.length);q>=0?q>n:n>q;f=q>=0?++n:--n)r.push(h(a,c));return r},q=function(a,b,c,d){var f,g,h;for(null==d&&(d=e),f=a[c];c>b&&(h=c-1>>1,g=a[h],d(f,g)<0);)a[c]=g,c=h;return a[c]=f},r=function(a,b,c){var d,f,g,h,i;for(null==c&&(c=e),f=a.length,i=b,g=a[b],d=2*b+1;f>d;)h=d+1,f>h&&!(c(a[d],a[h])<0)&&(d=h),a[b]=a[d],b=d,d=2*b+1;return a[b]=g,q(a,i,b,c)},d=function(){function a(a){this.cmp=null!=a?a:e,this.nodes=[]}return a.push=i,a.pop=h,a.replace=k,a.pushpop=j,a.heapify=g,a.updateItem=p,a.nlargest=n,a.nsmallest=o,a.prototype.push=function(a){return i(this.nodes,a,this.cmp)},a.prototype.pop=function(){return h(this.nodes,this.cmp)},a.prototype.peek=function(){return this.nodes[0]},a.prototype.contains=function(a){return-1!==this.nodes.indexOf(a)},a.prototype.replace=function(a){return k(this.nodes,a,this.cmp)},a.prototype.pushpop=function(a){return j(this.nodes,a,this.cmp)},a.prototype.heapify=function(){return g(this.nodes,this.cmp)},a.prototype.updateItem=function(a){return p(this.nodes,a,this.cmp)},a.prototype.clear=function(){return this.nodes=[]},a.prototype.empty=function(){return 0===this.nodes.length},a.prototype.size=function(){return this.nodes.length},a.prototype.clone=function(){var b;return b=new a,b.nodes=this.nodes.slice(0),b},a.prototype.toArray=function(){return this.nodes.slice(0)},a.prototype.insert=a.prototype.push,a.prototype.top=a.prototype.peek,a.prototype.front=a.prototype.peek,a.prototype.has=a.prototype.contains,a.prototype.copy=a.prototype.clone,a}(),b.exports=d},{}],82:[function(a,b,c){"use strict";a("./-preamble");var d=a("./window"),e=a("./is"),f=a("./core"),g=a("./extension"),h=a("./jquery-plugin"),i=a("./stylesheet"),j=a("./thread"),k=a("./fabric"),l=function(a){return void 0===a&&(a={}),
e.plainObject(a)?new f(a):e.string(a)?g.apply(g,arguments):void 0};l.version=a("./version.json"),d&&d.jQuery&&h(d.jQuery,l),l.registerJquery=function(a){h(a,l)},l.stylesheet=l.Stylesheet=i,l.thread=l.Thread=j,l.fabric=l.Fabric=k,b.exports=l},{"./-preamble":1,"./core":37,"./extension":46,"./fabric":80,"./is":83,"./jquery-plugin":84,"./stylesheet":97,"./thread":98,"./version.json":106,"./window":107}],83:[function(a,b,c){"use strict";var d=a("./window"),e=d?d.navigator:null,f=d?d.document:null,g="string",h=typeof{},i="function",j=typeof HTMLElement,k=function(a){return a&&a.instanceString&&l.fn(a.instanceString)?a.instanceString():null},l={defined:function(a){return null!=a},string:function(a){return null!=a&&typeof a==g},fn:function(a){return null!=a&&typeof a===i},array:function(a){return Array.isArray?Array.isArray(a):null!=a&&a instanceof Array},plainObject:function(a){return null!=a&&typeof a===h&&!l.array(a)&&a.constructor===Object},object:function(a){return null!=a&&typeof a===h},number:function(a){return null!=a&&"number"==typeof a&&!isNaN(a)},integer:function(a){return l.number(a)&&Math.floor(a)===a},bool:function(a){return null!=a&&typeof a==typeof!0},htmlElement:function(a){return"undefined"===j?void 0:null!=a&&a instanceof HTMLElement},elementOrCollection:function(a){return l.element(a)||l.collection(a)},element:function(a){return"collection"===k(a)&&a._private.single},collection:function(a){return"collection"===k(a)&&!a._private.single},core:function(a){return"core"===k(a)},style:function(a){return"style"===k(a)},stylesheet:function(a){return"stylesheet"===k(a)},event:function(a){return"event"===k(a)},thread:function(a){return"thread"===k(a)},fabric:function(a){return"fabric"===k(a)},emptyString:function(a){return void 0===a||null===a||!(""!==a&&!a.match(/^\s+$/))},nonemptyString:function(a){return!(!a||!l.string(a)||""===a||a.match(/^\s+$/))},domElement:function(a){return"undefined"!=typeof HTMLElement&&a instanceof HTMLElement},boundingBox:function(a){return l.plainObject(a)&&l.number(a.x1)&&l.number(a.x2)&&l.number(a.y1)&&l.number(a.y2)},promise:function(a){return l.object(a)&&l.fn(a.then)},touch:function(){return d&&("ontouchstart"in d||d.DocumentTouch&&f instanceof DocumentTouch)},gecko:function(){return d&&("undefined"!=typeof InstallTrigger||"MozAppearance"in f.documentElement.style)},webkit:function(){return d&&("undefined"!=typeof webkitURL||"WebkitAppearance"in f.documentElement.style)},chromium:function(){return d&&"undefined"!=typeof chrome},khtml:function(){return e&&e.vendor.match(/kde/i)},khtmlEtc:function(){return l.khtml()||l.webkit()||l.chromium()},ms:function(){return e&&e.userAgent.match(/msie|trident|edge/i)},windows:function(){return e&&e.appVersion.match(/Win/i)},mac:function(){return e&&e.appVersion.match(/Mac/i)},linux:function(){return e&&e.appVersion.match(/Linux/i)},unix:function(){return e&&e.appVersion.match(/X11/i)}};b.exports=l},{"./window":107}],84:[function(a,b,c){"use strict";var d=a("./is"),e=function(a){var b=a[0]._cyreg=a[0]._cyreg||{};return b},f=function(a,b){a&&(a.fn.cytoscape||(a.fn.cytoscape=function(c){var f=a(this);if("get"===c)return e(f).cy;if(d.fn(c)){var g=c,h=e(f).cy;if(h&&h.isReady())h.trigger("ready",[],g);else{var i=e(f),j=i.readies=i.readies||[];j.push(g)}}else if(d.plainObject(c))return f.each(function(){var d=a.extend({},c,{container:a(this)[0]});b(d)})},a.cytoscape=b,null==a.fn.cy&&null==a.cy&&(a.fn.cy=a.fn.cytoscape,a.cy=a.cytoscape)))};b.exports=f},{"./is":83}],85:[function(a,b,c){"use strict";var d={};d.arePositionsSame=function(a,b){return a.x===b.x&&a.y===b.y},d.copyPosition=function(a){return{x:a.x,y:a.y}},d.array2point=function(a){return{x:a[0],y:a[1]}},d.deg2rad=function(a){return Math.PI*a/180},d.log2=Math.log2||function(a){return Math.log(a)/Math.log(2)},d.signum=function(a){return a>0?1:0>a?-1:0},d.dist=function(a,b){return Math.sqrt(d.sqdist(a,b))},d.sqdist=function(a,b){var c=b.x-a.x,d=b.y-a.y;return c*c+d*d},d.qbezierAt=function(a,b,c,d){return(1-d)*(1-d)*a+2*(1-d)*d*b+d*d*c},d.qbezierPtAt=function(a,b,c,e){return{x:d.qbezierAt(a.x,b.x,c.x,e),y:d.qbezierAt(a.y,b.y,c.y,e)}},d.lineAt=function(a,b,c,e){var f={x:b.x-a.x,y:b.y-a.y},g=d.dist(a,b),h={x:f.x/g,y:f.y/g};c=null==c?0:c;var e=null!=e?e:c*g;return{x:a.x+h.x*e,y:a.y+h.y*e}},d.lineAtDist=function(a,b,c){return d.lineAt(a,b,void 0,c)},d.triangleAngle=function(a,b,c){var e=d.dist(b,c),f=d.dist(a,c),g=d.dist(a,b);return Math.acos((e*e+f*f-g*g)/(2*e*f))},d.bound=function(a,b,c){return Math.max(a,Math.min(c,b))},d.makeBoundingBox=function(a){if(null==a)return{x1:1/0,y1:1/0,x2:-(1/0),y2:-(1/0),w:0,h:0};if(null!=a.x1&&null!=a.y1){if(null!=a.x2&&null!=a.y2&&a.x2>=a.x1&&a.y2>=a.y1)return{x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2,w:a.x2-a.x1,h:a.y2-a.y1};if(null!=a.w&&null!=a.h&&a.w>=0&&a.h>=0)return{x1:a.x1,y1:a.y1,x2:a.x1+a.w,y2:a.y1+a.h,w:a.w,h:a.h}}},d.updateBoundingBox=function(a,b){a.x1=Math.min(a.x1,b.x1),a.x2=Math.max(a.x2,b.x2),a.w=a.x2-a.x1,a.y1=Math.min(a.y1,b.y1),a.y2=Math.max(a.y2,b.y2),a.h=a.y2-a.y1},d.expandBoundingBox=function(a,b){return a.x1-=b,a.x2+=b,a.y1-=b,a.y2+=b,a.w=a.x2-a.x1,a.h=a.y2-a.y1,a},d.boundingBoxesIntersect=function(a,b){return!(a.x1>b.x2)&&(!(b.x1>a.x2)&&(!(a.x2<b.x1)&&(!(b.x2<a.x1)&&(!(a.y2<b.y1)&&(!(b.y2<a.y1)&&(!(a.y1>b.y2)&&!(b.y1>a.y2)))))))},d.inBoundingBox=function(a,b,c){return a.x1<=b&&b<=a.x2&&a.y1<=c&&c<=a.y2},d.pointInBoundingBox=function(a,b){return this.inBoundingBox(a,b.x,b.y)},d.boundingBoxInBoundingBox=function(a,b){return d.inBoundingBox(a,b.x1,b.y1)&&d.inBoundingBox(a,b.x2,b.y2)},d.roundRectangleIntersectLine=function(a,b,c,d,e,f,g){var h,i=this.getRoundRectangleRadius(e,f),j=e/2,k=f/2,l=c-j+i-g,m=d-k-g,n=c+j-i+g,o=m;if(h=this.finiteLinesIntersect(a,b,c,d,l,m,n,o,!1),h.length>0)return h;var p=c+j+g,q=d-k+i-g,r=p,s=d+k-i+g;if(h=this.finiteLinesIntersect(a,b,c,d,p,q,r,s,!1),h.length>0)return h;var t=c-j+i-g,u=d+k+g,v=c+j-i+g,w=u;if(h=this.finiteLinesIntersect(a,b,c,d,t,u,v,w,!1),h.length>0)return h;var x=c-j-g,y=d-k+i-g,z=x,A=d+k-i+g;if(h=this.finiteLinesIntersect(a,b,c,d,x,y,z,A,!1),h.length>0)return h;var B,C=c-j+i,D=d-k+i;if(B=this.intersectLineCircle(a,b,c,d,C,D,i+g),B.length>0&&B[0]<=C&&B[1]<=D)return[B[0],B[1]];var E=c+j-i,F=d-k+i;if(B=this.intersectLineCircle(a,b,c,d,E,F,i+g),B.length>0&&B[0]>=E&&B[1]<=F)return[B[0],B[1]];var G=c+j-i,H=d+k-i;if(B=this.intersectLineCircle(a,b,c,d,G,H,i+g),B.length>0&&B[0]>=G&&B[1]>=H)return[B[0],B[1]];var I=c-j+i,J=d+k-i;return B=this.intersectLineCircle(a,b,c,d,I,J,i+g),B.length>0&&B[0]<=I&&B[1]>=J?[B[0],B[1]]:[]},d.inLineVicinity=function(a,b,c,d,e,f,g){var h=g,i=Math.min(c,e),j=Math.max(c,e),k=Math.min(d,f),l=Math.max(d,f);return a>=i-h&&j+h>=a&&b>=k-h&&l+h>=b},d.inBezierVicinity=function(a,b,c,d,e,f,g,h,i){var j={x1:Math.min(c,g,e)-i,x2:Math.max(c,g,e)+i,y1:Math.min(d,h,f)-i,y2:Math.max(d,h,f)+i};return!(a<j.x1||a>j.x2||b<j.y1||b>j.y2)},d.solveCubic=function(a,b,c,d,e){b/=a,c/=a,d/=a;var f,g,h,i,j,k,l,m;return g=(3*c-b*b)/9,h=-(27*d)+b*(9*c-2*(b*b)),h/=54,f=g*g*g+h*h,e[1]=0,l=b/3,f>0?(j=h+Math.sqrt(f),j=0>j?-Math.pow(-j,1/3):Math.pow(j,1/3),k=h-Math.sqrt(f),k=0>k?-Math.pow(-k,1/3):Math.pow(k,1/3),e[0]=-l+j+k,l+=(j+k)/2,e[4]=e[2]=-l,l=Math.sqrt(3)*(-k+j)/2,e[3]=l,void(e[5]=-l)):(e[5]=e[3]=0,0===f?(m=0>h?-Math.pow(-h,1/3):Math.pow(h,1/3),e[0]=-l+2*m,void(e[4]=e[2]=-(m+l))):(g=-g,i=g*g*g,i=Math.acos(h/Math.sqrt(i)),m=2*Math.sqrt(g),e[0]=-l+m*Math.cos(i/3),e[2]=-l+m*Math.cos((i+2*Math.PI)/3),void(e[4]=-l+m*Math.cos((i+4*Math.PI)/3))))},d.sqdistToQuadraticBezier=function(a,b,c,d,e,f,g,h){var i=1*c*c-4*c*e+2*c*g+4*e*e-4*e*g+g*g+d*d-4*d*f+2*d*h+4*f*f-4*f*h+h*h,j=9*c*e-3*c*c-3*c*g-6*e*e+3*e*g+9*d*f-3*d*d-3*d*h-6*f*f+3*f*h,k=3*c*c-6*c*e+c*g-c*a+2*e*e+2*e*a-g*a+3*d*d-6*d*f+d*h-d*b+2*f*f+2*f*b-h*b,l=1*c*e-c*c+c*a-e*a+d*f-d*d+d*b-f*b,m=[];this.solveCubic(i,j,k,l,m);for(var n=1e-7,o=[],p=0;6>p;p+=2)Math.abs(m[p+1])<n&&m[p]>=0&&m[p]<=1&&o.push(m[p]);o.push(1),o.push(0);for(var q,r,s,t,u=-1,v=0;v<o.length;v++)r=Math.pow(1-o[v],2)*c+2*(1-o[v])*o[v]*e+o[v]*o[v]*g,s=Math.pow(1-o[v],2)*d+2*(1-o[v])*o[v]*f+o[v]*o[v]*h,t=Math.pow(r-a,2)+Math.pow(s-b,2),u>=0?u>t&&(u=t,q=o[v]):(u=t,q=o[v]);return u},d.sqdistToFiniteLine=function(a,b,c,d,e,f){var g=[a-c,b-d],h=[e-c,f-d],i=h[0]*h[0]+h[1]*h[1],j=g[0]*g[0]+g[1]*g[1],k=g[0]*h[0]+g[1]*h[1],l=k*k/i;return 0>k?j:l>i?(a-e)*(a-e)+(b-f)*(b-f):j-l},d.pointInsidePolygonPoints=function(a,b,c){for(var d,e,f,g,h,i=0,j=0,k=0;k<c.length/2;k++)if(d=c[2*k],e=c[2*k+1],k+1<c.length/2?(f=c[2*(k+1)],g=c[2*(k+1)+1]):(f=c[2*(k+1-c.length/2)],g=c[2*(k+1-c.length/2)+1]),d==a&&f==a);else{if(!(d>=a&&a>=f||a>=d&&f>=a))continue;h=(a-d)/(f-d)*(g-e)+e,h>b&&i++,b>h&&j++}return i%2!==0},d.pointInsidePolygon=function(a,b,c,e,f,g,h,i,j){var k,l=new Array(c.length);null!=i[0]?(k=Math.atan(i[1]/i[0]),i[0]<0?k+=Math.PI/2:k=-k-Math.PI/2):k=i;for(var m=Math.cos(-k),n=Math.sin(-k),o=0;o<l.length/2;o++)l[2*o]=g/2*(c[2*o]*m-c[2*o+1]*n),l[2*o+1]=h/2*(c[2*o+1]*m+c[2*o]*n),l[2*o]+=e,l[2*o+1]+=f;var p;if(j>0){var q=this.expandPolygon(l,-j);p=this.joinLines(q)}else p=l;return d.pointInsidePolygonPoints(a,b,p)},d.joinLines=function(a){for(var b,c,d,e,f,g,h,i,j=new Array(a.length/2),k=0;k<a.length/4;k++){b=a[4*k],c=a[4*k+1],d=a[4*k+2],e=a[4*k+3],k<a.length/4-1?(f=a[4*(k+1)],g=a[4*(k+1)+1],h=a[4*(k+1)+2],i=a[4*(k+1)+3]):(f=a[0],g=a[1],h=a[2],i=a[3]);var l=this.finiteLinesIntersect(b,c,d,e,f,g,h,i,!0);j[2*k]=l[0],j[2*k+1]=l[1]}return j},d.expandPolygon=function(a,b){for(var c,d,e,f,g=new Array(2*a.length),h=0;h<a.length/2;h++){c=a[2*h],d=a[2*h+1],h<a.length/2-1?(e=a[2*(h+1)],f=a[2*(h+1)+1]):(e=a[0],f=a[1]);var i=f-d,j=-(e-c),k=Math.sqrt(i*i+j*j),l=i/k,m=j/k;g[4*h]=c+l*b,g[4*h+1]=d+m*b,g[4*h+2]=e+l*b,g[4*h+3]=f+m*b}return g},d.intersectLineEllipse=function(a,b,c,d,e,f){var g=c-a,h=d-b;g/=e,h/=f;var i=Math.sqrt(g*g+h*h),j=i-1;if(0>j)return[];var k=j/i;return[(c-a)*k+a,(d-b)*k+b]},d.intersectLineCircle=function(a,b,c,d,e,f,g){var h=[c-a,d-b],i=[e,f],j=[a-e,b-f],k=h[0]*h[0]+h[1]*h[1],l=2*(j[0]*h[0]+j[1]*h[1]),i=j[0]*j[0]+j[1]*j[1]-g*g,m=l*l-4*k*i;if(0>m)return[];var n=(-l+Math.sqrt(m))/(2*k),o=(-l-Math.sqrt(m))/(2*k),p=Math.min(n,o),q=Math.max(n,o),r=[];if(p>=0&&1>=p&&r.push(p),q>=0&&1>=q&&r.push(q),0===r.length)return[];var s=r[0]*h[0]+a,t=r[0]*h[1]+b;if(r.length>1){if(r[0]==r[1])return[s,t];var u=r[1]*h[0]+a,v=r[1]*h[1]+b;return[s,t,u,v]}return[s,t]},d.findCircleNearPoint=function(a,b,c,d,e){var f=d-a,g=e-b,h=Math.sqrt(f*f+g*g),i=f/h,j=g/h;return[a+i*c,b+j*c]},d.findMaxSqDistanceToOrigin=function(a){for(var b,c=1e-6,d=0;d<a.length/2;d++)b=a[2*d]*a[2*d]+a[2*d+1]*a[2*d+1],b>c&&(c=b);return c},d.midOfThree=function(a,b,c){return a>=b&&c>=a||a>=c&&b>=a?a:b>=a&&c>=b||b>=c&&a>=b?b:c},d.finiteLinesIntersect=function(a,b,c,d,e,f,g,h,i){var j=a-e,k=c-a,l=g-e,m=b-f,n=d-b,o=h-f,p=l*m-o*j,q=k*m-n*j,r=o*k-l*n;if(0!==r){var s=p/r,t=q/r,u=.001,v=0-u,w=1+u;return s>=v&&w>=s&&t>=v&&w>=t?[a+s*k,b+s*n]:i?[a+s*k,b+s*n]:[]}return 0===p||0===q?this.midOfThree(a,c,g)===g?[g,h]:this.midOfThree(a,c,e)===e?[e,f]:this.midOfThree(e,g,c)===c?[c,d]:[]:[]},d.polygonIntersectLine=function(a,b,c,e,f,g,h,i){for(var j,k=[],l=new Array(c.length),m=0;m<l.length/2;m++)l[2*m]=c[2*m]*g+e,l[2*m+1]=c[2*m+1]*h+f;var n;if(i>0){var o=d.expandPolygon(l,-i);n=d.joinLines(o)}else n=l;for(var p,q,r,s,m=0;m<n.length/2;m++)p=n[2*m],q=n[2*m+1],m<n.length/2-1?(r=n[2*(m+1)],s=n[2*(m+1)+1]):(r=n[0],s=n[1]),j=this.finiteLinesIntersect(a,b,e,f,p,q,r,s),0!==j.length&&k.push(j[0],j[1]);return k},d.shortenIntersection=function(a,b,c){var d=[a[0]-b[0],a[1]-b[1]],e=Math.sqrt(d[0]*d[0]+d[1]*d[1]),f=(e-c)/e;return 0>f&&(f=1e-5),[b[0]+f*d[0],b[1]+f*d[1]]},d.generateUnitNgonPointsFitToSquare=function(a,b){var c=d.generateUnitNgonPoints(a,b);return c=d.fitPolygonToSquare(c)},d.fitPolygonToSquare=function(a){for(var b,c,d=a.length/2,e=1/0,f=1/0,g=-(1/0),h=-(1/0),i=0;d>i;i++)b=a[2*i],c=a[2*i+1],e=Math.min(e,b),g=Math.max(g,b),f=Math.min(f,c),h=Math.max(h,c);for(var j=2/(g-e),k=2/(h-f),i=0;d>i;i++)b=a[2*i]=a[2*i]*j,c=a[2*i+1]=a[2*i+1]*k,e=Math.min(e,b),g=Math.max(g,b),f=Math.min(f,c),h=Math.max(h,c);if(-1>f)for(var i=0;d>i;i++)c=a[2*i+1]=a[2*i+1]+(-1-f);return a},d.generateUnitNgonPoints=function(a,b){var c=1/a*2*Math.PI,d=a%2===0?Math.PI/2+c/2:Math.PI/2;d+=b;for(var e,f,g,h=new Array(2*a),i=0;a>i;i++)e=i*c+d,f=h[2*i]=Math.cos(e),g=h[2*i+1]=Math.sin(-e);return h},d.getRoundRectangleRadius=function(a,b){return Math.min(a/4,b/4,8)},b.exports=d},{}],86:[function(a,b,c){"use strict";var d=0,e=1,f=2,g=function(a){return this instanceof g?(this.id="Thenable/1.0.7",this.state=d,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},void("function"==typeof a&&a.call(this,this.fulfill.bind(this),this.reject.bind(this)))):new g(a)};g.prototype={fulfill:function(a){return h(this,e,"fulfillValue",a)},reject:function(a){return h(this,f,"rejectReason",a)},then:function(a,b){var c=this,d=new g;return c.onFulfilled.push(k(a,d,"fulfill")),c.onRejected.push(k(b,d,"reject")),i(c),d.proxy}};var h=function(a,b,c,e){return a.state===d&&(a.state=b,a[c]=e,i(a)),a},i=function(a){a.state===e?j(a,"onFulfilled",a.fulfillValue):a.state===f&&j(a,"onRejected",a.rejectReason)},j=function(a,b,c){if(0!==a[b].length){var d=a[b];a[b]=[];var e=function(){for(var a=0;a<d.length;a++)d[a](c)};"function"==typeof setImmediate?setImmediate(e):setTimeout(e,0)}},k=function(a,b,c){return function(d){if("function"!=typeof a)b[c].call(b,d);else{var e;try{e=a(d)}catch(a){return void b.reject(a)}l(b,e)}}},l=function(a,b){if(a===b||a.proxy===b)return void a.reject(new TypeError("cannot resolve promise with itself"));var c;if("object"==typeof b&&null!==b||"function"==typeof b)try{c=b.then}catch(b){return void a.reject(b)}if("function"!=typeof c)a.fulfill(b);else{var d=!1;try{c.call(b,function(c){d||(d=!0,c===b?a.reject(new TypeError("circular thenable chain")):l(a,c))},function(b){d||(d=!0,a.reject(b))})}catch(b){d||a.reject(b)}}};g.all=function(a){return new g(function(b,c){for(var d=new Array(a.length),e=0,f=function(c,f){d[c]=f,e++,e===a.length&&b(d)},g=0;g<a.length;g++)!function(b){var d=a[b],e=null!=d&&null!=d.then;if(e)d.then(function(a){f(b,a)},function(a){c(a)});else{var g=d;f(b,g)}}(g)})},g.resolve=function(a){return new g(function(b,c){b(a)})},g.reject=function(a){return new g(function(b,c){c(a)})},b.exports="undefined"!=typeof Promise?Promise:g},{}],87:[function(a,b,c){"use strict";var d=a("./is"),e=a("./util"),f=function(a){if(!(this instanceof f))return new f(a);var b=this;b._private={selectorText:null,invalid:!0};var c=function(){return{classes:[],colonSelectors:[],data:[],group:null,ids:[],meta:[],collection:null,filter:null,parent:null,ancestor:null,subject:null,child:null,descendant:null}};if(!a||d.string(a)&&a.match(/^\s*$/))b.length=0;else if("*"===a||"edge"===a||"node"===a)b[0]=c(),b[0].group="*"===a?a:a+"s",b[0].groupOnly=!0,b._private.invalid=!1,b._private.selectorText=a,b.length=1;else if(d.elementOrCollection(a)){var g=a.collection();b[0]=c(),b[0].collection=g,b.length=1}else if(d.fn(a))b[0]=c(),b[0].filter=a,b.length=1;else{if(!d.string(a))return void e.error("A selector must be created from a string; found "+a);var h=null,i={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:'"(?:\\\\"|[^"])+"|'+"'(?:\\\\'|[^'])+'",number:e.regex.number,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$"};i.variable="(?:[\\w-]|(?:\\\\"+i.metaChar+"))+",i.value=i.string+"|"+i.number,i.className=i.variable,i.id=i.variable;for(var j=function(a){return a.replace(new RegExp("\\\\("+i.metaChar+")","g"),function(a,b,c,d){return b})},k=i.comparatorOp.split("|"),l=0;l<k.length;l++){var m=k[l];i.comparatorOp+="|@"+m}for(var k=i.comparatorOp.split("|"),l=0;l<k.length;l++){var m=k[l];m.indexOf("!")>=0||"="!==m&&(i.comparatorOp+="|\\!"+m)}var n=[{name:"group",query:!0,regex:"(node|edge|\\*)",populate:function(a){this.group="*"===a?a:a+"s"}},{name:"state",query:!0,regex:"(:selected|:unselected|:locked|:unlocked|:visible|:hidden|:transparent|:grabbed|:free|:removed|:inside|:grabbable|:ungrabbable|:animated|:unanimated|:selectable|:unselectable|:orphan|:nonorphan|:parent|:child|:loop|:simple|:active|:inactive|:touch|:backgrounding|:nonbackgrounding)",populate:function(a){this.colonSelectors.push(a)}},{name:"id",query:!0,regex:"\\#("+i.id+")",populate:function(a){this.ids.push(j(a))}},{name:"className",query:!0,regex:"\\.("+i.className+")",populate:function(a){this.classes.push(j(a))}},{name:"dataExists",query:!0,regex:"\\[\\s*("+i.variable+")\\s*\\]",populate:function(a){this.data.push({field:j(a)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+i.variable+")\\s*("+i.comparatorOp+")\\s*("+i.value+")\\s*\\]",populate:function(a,b,c){var d=null!=new RegExp("^"+i.string+"$").exec(c);c=d?c.substring(1,c.length-1):parseFloat(c),this.data.push({field:j(a),operator:b,value:c})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+i.boolOp+")\\s*("+i.variable+")\\s*\\]",populate:function(a,b){this.data.push({field:j(b),operator:a})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+i.meta+")\\s*("+i.comparatorOp+")\\s*("+i.number+")\\s*\\]\\]",populate:function(a,b,c){this.meta.push({field:j(a),operator:b,value:parseFloat(c)})}},{name:"nextQuery",separator:!0,regex:i.separator,populate:function(){b[++l]=c(),h=null}},{name:"child",separator:!0,regex:i.child,populate:function(){var a=c();a.parent=this,a.subject=h,b[l]=a}},{name:"descendant",separator:!0,regex:i.descendant,populate:function(){var a=c();a.ancestor=this,a.subject=h,b[l]=a}},{name:"subject",modifier:!0,regex:i.subject,populate:function(){return null!=h&&this.subject!=this?(e.error("Redefinition of subject in selector `"+a+"`"),!1):(h=this,void(this.subject=this))}}];b._private.selectorText=a;var o=a,l=0,p=function(a){for(var b,c,e,f=0;f<n.length;f++){var g=n[f],h=g.name;if(!d.fn(a)||a(h,g)){var i=o.match(new RegExp("^"+g.regex));if(null!=i){c=i,b=g,e=h;var j=i[0];o=o.substring(j.length);break}}}return{expr:b,match:c,name:e}},q=function(){var a=o.match(/^\s+/);if(a){var b=a[0];o=o.substring(b.length)}};for(b[0]=c(),q();;){var r=p();if(null==r.expr)return void e.error("The selector `"+a+"`is invalid");for(var s=[],t=1;t<r.match.length;t++)s.push(r.match[t]);var u=r.expr.populate.apply(b[l],s);if(u===!1)return;if(o.match(/^\s*$/))break}b.length=l+1;for(var t=0;t<b.length;t++){var v=b[t];if(null!=v.subject){for(;v.subject!=v;)if(null!=v.parent){var w=v.parent,x=v;x.parent=null,w.child=x,v=w}else{if(null==v.ancestor){e.error("When adjusting references for the selector `"+v+"`, neither parent nor ancestor was found");break}var y=v.ancestor,z=v;z.ancestor=null,y.descendant=z,v=y}b[t]=v.subject}}}b._private.invalid=!1},g=f.prototype;g.size=function(){return this.length},g.eq=function(a){return this[a]};var h=function(a,b){var c=b._private;if(a.groupOnly)return"*"===a.group||a.group===c.group;if(null!=a.group&&"*"!=a.group&&a.group!=c.group)return!1;for(var e=b.cy(),f=!0,g=0;g<a.colonSelectors.length;g++){var i=a.colonSelectors[g];switch(i){case":selected":f=b.selected();break;case":unselected":f=!b.selected();break;case":selectable":f=b.selectable();break;case":unselectable":f=!b.selectable();break;case":locked":f=b.locked();break;case":unlocked":f=!b.locked();break;case":visible":f=b.visible();break;case":hidden":f=!b.visible();break;case":transparent":f=b.transparent();break;case":grabbed":f=b.grabbed();break;case":free":f=!b.grabbed();break;case":removed":f=b.removed();break;case":inside":f=!b.removed();break;case":grabbable":f=b.grabbable();break;case":ungrabbable":f=!b.grabbable();break;case":animated":f=b.animated();break;case":unanimated":f=!b.animated();break;case":parent":f=b.isNode()&&b.children().nonempty();break;case":child":case":nonorphan":f=b.isNode()&&b.parent().nonempty();break;case":orphan":f=b.isNode()&&b.parent().empty();break;case":loop":f=b.isEdge()&&b.data("source")===b.data("target");break;case":simple":f=b.isEdge()&&b.data("source")!==b.data("target");break;case":active":f=b.active();break;case":inactive":f=!b.active();break;case":touch":f=d.touch();break;case":backgrounding":f=b.backgrounding();break;case":nonbackgrounding":f=!b.backgrounding()}if(!f)break}if(!f)return!1;for(var j=!0,g=0;g<a.ids.length;g++){var k=a.ids[g],l=c.data.id;if(j=j&&k==l,!j)break}if(!j)return!1;for(var m=!0,g=0;g<a.classes.length;g++){var n=a.classes[g];if(m=m&&b.hasClass(n),!m)break}if(!m)return!1;var o=function(b){for(var c=!0,e=0;e<a[b.name].length;e++){var f,g=a[b.name][e],h=g.operator,i=g.value,j=g.field;if(null!=h&&null!=i){var k=b.fieldValue(j),l=d.string(k)||d.number(k)?""+k:"",m=""+i,n=!1;h.indexOf("@")>=0&&(l=l.toLowerCase(),m=m.toLowerCase(),h=h.replace("@",""),n=!0);var o=!1;h.indexOf("!")>=0&&(h=h.replace("!",""),o=!0),n&&(i=m.toLowerCase(),k=l.toLowerCase());var p=!1;switch(h){case"*=":f=l.indexOf(m)>=0;break;case"$=":f=l.indexOf(m,l.length-m.length)>=0;break;case"^=":f=0===l.indexOf(m);break;case"=":f=k===i;break;case">":p=!0,f=k>i;break;case">=":p=!0,f=k>=i;break;case"<":p=!0,f=i>k;break;case"<=":p=!0,f=i>=k;break;default:f=!1}!o||null==k&&p||(f=!f)}else if(null!=h)switch(h){case"?":f=b.fieldTruthy(j);break;case"!":f=!b.fieldTruthy(j);break;case"^":f=b.fieldUndefined(j)}else f=!b.fieldUndefined(j);if(!f){c=!1;break}}return c},p=o({name:"data",fieldValue:function(a){return c.data[a]},fieldUndefined:function(a){return void 0===c.data[a]},fieldTruthy:function(a){return!!c.data[a]}});if(!p)return!1;var q=o({name:"meta",fieldValue:function(a){return b[a]()},fieldUndefined:function(a){return null==b[a]()},fieldTruthy:function(a){return!!b[a]()}});if(!q)return!1;if(null!=a.collection){var r=a.collection.hasElementWithId(b.id());if(!r)return!1}if(null!=a.filter&&0===b.collection().filter(a.filter).size())return!1;var s=function(a,b){if(null!=a){var c=!1;if(!e.hasCompoundNodes())return!1;b=b();for(var d=0;d<b.length;d++)if(h(a,b[d])){c=!0;break}return c}return!0};return!!(s(a.parent,function(){return b.parent()})&&s(a.ancestor,function(){return b.parents()})&&s(a.child,function(){return b.children()}))&&!!s(a.descendant,function(){return b.descendants()})};g.filter=function(a){var b=this,c=a.cy();if(b._private.invalid)return c.collection();var d=function(a,c){for(var d=0;d<b.length;d++){var e=b[d];if(h(e,c))return!0}return!1};null==b._private.selectorText&&(d=function(){return!0});var e=a.filter(d);return e},g.matches=function(a){var b=this;if(b._private.invalid)return!1;for(var c=0;c<b.length;c++){var d=b[c];if(h(d,a))return!0}return!1},g.toString=g.selector=function(){for(var a="",b=function(a){return null==a?"":a},c=function(a){return d.string(a)?'"'+a+'"':b(a)},e=function(a){return" "+a+" "},f=function(a){var d="";a.subject===a&&(d+="$");var h=b(a.group);d+=h.substring(0,h.length-1);for(var i=0;i<a.data.length;i++){var j=a.data[i];d+=j.value?"["+j.field+e(b(j.operator))+c(j.value)+"]":"["+b(j.operator)+j.field+"]"}for(var i=0;i<a.meta.length;i++){var k=a.meta[i];d+="[["+k.field+e(b(k.operator))+c(k.value)+"]]"}for(var i=0;i<a.colonSelectors.length;i++){var l=a.colonSelectors[g];d+=l}for(var i=0;i<a.ids.length;i++){var l="#"+a.ids[g];d+=l}for(var i=0;i<a.classes.length;i++){var l="."+a.classes[i];d+=l}return null!=a.parent&&(d=f(a.parent)+" > "+d),null!=a.ancestor&&(d=f(a.ancestor)+" "+d),null!=a.child&&(d+=" > "+f(a.child)),null!=a.descendant&&(d+=" "+f(a.descendant)),d},g=0;g<this.length;g++){var h=this[g];a+=f(h),this.length>1&&g<this.length-1&&(a+=", ")}return a},b.exports=f},{"./is":83,"./util":100}],88:[function(a,b,c){"use strict";var d=a("../util"),e=a("../is"),f={};f.apply=function(a){var b=this,c=b._private;c.newStyle&&(c.contextStyles={},c.propDiffs={},b.cleanElements(a,!0));for(var d=0;d<a.length;d++){var e=a[d],f=b.getContextMeta(e),g=b.getContextStyle(f),h=b.applyContextStyle(f,g,e);b.updateTransitions(e,h.diffProps),b.updateStyleHints(e)}c.newStyle=!1},f.getPropertiesDiff=function(a,b){var c=this,d=c._private.propDiffs=c._private.propDiffs||{},e=a+"-"+b,f=d[e];if(f)return f;for(var g=[],h={},i=0;i<c.length;i++){var j=c[i],k="t"===a[i],l="t"===b[i],m=k!==l,n=j.mappedProperties.length>0;if(m||n){var o;m&&n?o=j.properties:m?o=j.properties:n&&(o=j.mappedProperties);for(var p=0;p<o.length;p++){for(var q=o[p],r=q.name,s=!1,t=i+1;t<c.length;t++){var u=c[t],v="t"===b[t];if(v&&(s=null!=u.properties[q.name]))break}h[r]||s||(h[r]=!0,g.push(r))}}}return d[e]=g,g},f.getContextMeta=function(a){var b,c=this,d="",e=a._private.styleCxtKey||"";c._private.newStyle&&(e="");for(var f=0;f<c.length;f++){var g=c[f],h=g.selector&&g.selector.matches(a);d+=h?"t":"f"}return b=c.getPropertiesDiff(e,d),a._private.styleCxtKey=d,{key:d,diffPropNames:b}},f.getContextStyle=function(a){var b=a.key,c=this,d=this._private.contextStyles=this._private.contextStyles||{};if(d[b])return d[b];for(var e={_private:{key:b}},f=0;f<c.length;f++){var g=c[f],h="t"===b[f];if(h)for(var i=0;i<g.properties.length;i++){var j=g.properties[i],k=e[j.name]=j;k.context=g}}return d[b]=e,e},f.applyContextStyle=function(a,b,c){for(var d=this,e=a.diffPropNames,f={},g=0;g<e.length;g++){var h=e[g],i=b[h],j=c.pstyle(h);if(!i){if(!j)continue;i=j.bypass?{name:h,deleteBypassed:!0}:{name:h,delete:!0}}if(j!==i){var k=f[h]={prev:j};d.applyParsedProperty(c,i),k.next=c.pstyle(h),k.next&&k.next.bypass&&(k.next=k.next.bypassed)}}return{diffProps:f}},f.updateStyleHints=function(a){var b=a._private,c=this;if(!a.removed()){var d=!1;if("nodes"===b.group)for(var e=1;e<=c.pieBackgroundN;e++){var f=a.pstyle("pie-"+e+"-background-size").value;if(f>0){d=!0;break}}b.hasPie=d;var g=a.pstyle("text-transform").strValue,h=a.pstyle("label").strValue,i=a.pstyle("source-label").strValue,j=a.pstyle("target-label").strValue,k=a.pstyle("font-style").strValue,f=a.pstyle("font-size").pfValue+"px",l=a.pstyle("font-family").strValue,m=a.pstyle("font-weight").strValue,n=a.pstyle("text-valign").strValue,o=a.pstyle("text-valign").strValue,p=a.pstyle("text-outline-width").pfValue,q=a.pstyle("text-wrap").strValue,r=a.pstyle("text-max-width").pfValue,s=k+"$"+f+"$"+l+"$"+m+"$"+g+"$"+n+"$"+o+"$"+p+"$"+q+"$"+r;b.labelStyleKey=s,b.sourceLabelKey=s+"$"+i,b.targetLabelKey=s+"$"+j,b.labelKey=s+"$"+h,b.fontKey=k+"$"+m+"$"+f+"$"+l,b.styleKey=Date.now()}},f.applyParsedProperty=function(a,b){var c,f,g=this,h=b,i=a._private.style,j=g.types,k=g.properties[h.name].type,l=h.bypass,m=i[h.name],n=m&&m.bypass,o=a._private;if("curve-style"===b.name&&"haystack"===b.value&&a.isEdge()&&(a.isLoop()||a.source().isParent()||a.target().isParent())&&(h=b=this.parse(b.name,"bezier",l)),h.delete)return i[h.name]=void 0,!0;if(h.deleteBypassed)return!m||!!m.bypass&&(m.bypassed=void 0,!0);if(h.deleteBypass)return!m||!!m.bypass&&(i[h.name]=m.bypassed,!0);var p=function(){d.error("Do not assign mappings to elements without corresponding data (e.g. ele `"+a.id()+"` for property `"+h.name+"` with data field `"+h.field+"`); try a `["+h.field+"]` selector to limit scope to elements with `"+h.field+"` defined")};switch(h.mapped){case j.mapData:case j.mapLayoutData:case j.mapScratch:var c,q=h.mapped===j.mapLayoutData,r=h.mapped===j.mapScratch,s=h.field.split(".");c=r||q?o.scratch:o.data;for(var t=0;t<s.length&&c;t++){var u=s[t];c=c[u]}var v;if(v=e.number(c)?(c-h.fieldMin)/(h.fieldMax-h.fieldMin):0,0>v?v=0:v>1&&(v=1),k.color){var w=h.valueMin[0],x=h.valueMax[0],y=h.valueMin[1],z=h.valueMax[1],A=h.valueMin[2],B=h.valueMax[2],C=null==h.valueMin[3]?1:h.valueMin[3],D=null==h.valueMax[3]?1:h.valueMax[3],E=[Math.round(w+(x-w)*v),Math.round(y+(z-y)*v),Math.round(A+(B-A)*v),Math.round(C+(D-C)*v)];f={bypass:h.bypass,name:h.name,value:E,strValue:"rgb("+E[0]+", "+E[1]+", "+E[2]+")"}}else{if(!k.number)return!1;var F=h.valueMin+(h.valueMax-h.valueMin)*v;f=this.parse(h.name,F,h.bypass,!0)}f||(f=this.parse(h.name,m.strValue,h.bypass,!0)),f||p(),f.mapping=h,h=f;break;case j.data:case j.layoutData:case j.scratch:var c,q=h.mapped===j.layoutData,r=h.mapped===j.scratch,s=h.field.split(".");if(c=r||q?o.scratch:o.data)for(var t=0;t<s.length;t++){var u=s[t];c=c[u]}if(f=this.parse(h.name,c,h.bypass,!0),!f){var G=m?m.strValue:"";f=this.parse(h.name,G,h.bypass,!0)}f||p(),f.mapping=h,h=f;break;case j.fn:var H=h.value,I=H(a);f=this.parse(h.name,I,h.bypass,!0),f.mapping=h,h=f;break;case void 0:break;default:return!1}return l?(n?h.bypassed=m.bypassed:h.bypassed=m,i[h.name]=h):n?m.bypassed=h:i[h.name]=h,!0},f.cleanElements=function(a,b){for(var c=this,d=c.properties,e=0;e<a.length;e++){var f=a[e];if(b)for(var g=f._private.style,h=0;h<d.length;h++){var i=d[h],j=g[i.name];j&&(j.bypass?j.bypassed=null:g[i.name]=null)}else f._private.style={}}},f.update=function(){var a=this._private.cy,b=a.mutableElements();b.updateStyle()},f.updateMappers=function(a){for(var b=this,c=0;c<a.length;c++){for(var d=a[c],e=d._private.style,f=0;f<b.properties.length;f++){var g=b.properties[f],h=e[g.name];if(h&&h.mapping){var i=h.mapping;this.applyParsedProperty(d,i)}}this.updateStyleHints(d)}},f.updateTransitions=function(a,b,c){var d=this,f=a._private,g=a.pstyle("transition-property").value,h=a.pstyle("transition-duration").pfValue,i=a.pstyle("transition-delay").pfValue;if(g.length>0&&h>0){for(var j={},k=!1,l=0;l<g.length;l++){var m=g[l],n=a.pstyle(m),o=b[m];if(o){var p,q=o.prev,r=q,s=null!=o.next?o.next:n,t=!1,u=1e-6;r&&(e.number(r.pfValue)&&e.number(s.pfValue)?(t=s.pfValue-r.pfValue,p=r.pfValue+u*t):e.number(r.value)&&e.number(s.value)?(t=s.value-r.value,p=r.value+u*t):e.array(r.value)&&e.array(s.value)&&(t=r.value[0]!==s.value[0]||r.value[1]!==s.value[1]||r.value[2]!==s.value[2],p=r.strValue),t&&(j[m]=s.strValue,this.applyBypass(a,m,p),k=!0))}}if(!k)return;f.transitioning=!0,a.stop(),i>0&&a.delay(i),a.animate({css:j},{duration:h,easing:a.pstyle("transition-timing-function").value,queue:!1,complete:function(){c||d.removeBypasses(a,g),f.transitioning=!1}})}else f.transitioning&&(a.stop(),this.removeBypasses(a,g),f.transitioning=!1)},b.exports=f},{"../is":83,"../util":100}],89:[function(a,b,c){"use strict";var d=a("../is"),e=a("../util"),f={};f.applyBypass=function(a,b,c,f){var g=this,h=[],i=!0;if("*"===b||"**"===b){if(void 0!==c)for(var j=0;j<g.properties.length;j++){var k=g.properties[j],b=k.name,l=this.parse(b,c,!0);l&&h.push(l)}}else if(d.string(b)){var l=this.parse(b,c,!0);l&&h.push(l)}else{if(!d.plainObject(b))return!1;var m=b;f=c;for(var j=0;j<g.properties.length;j++){var k=g.properties[j],b=k.name,c=m[b];if(void 0===c&&(c=m[e.dash2camel(b)]),void 0!==c){var l=this.parse(b,c,!0);l&&h.push(l)}}}if(0===h.length)return!1;for(var n=!1,j=0;j<a.length;j++){for(var o,p=a[j],q={},r=0;r<h.length;r++){var k=h[r];if(f){var s=p.pstyle(k.name);o=q[k.name]={prev:s}}n=this.applyParsedProperty(p,k)||n,f&&(o.next=p.pstyle(k.name))}n&&this.updateStyleHints(p),f&&this.updateTransitions(p,q,i)}return n},f.overrideBypass=function(a,b,c){b=e.camel2dash(b);for(var d=0;d<a.length;d++){var f=a[d],g=f._private.style[b],h=this.properties[b].type,i=h.color,j=h.mutiple;g&&g.bypass?(g.value=c,null!=g.pfValue&&(g.pfValue=c),i?g.strValue="rgb("+c.join(",")+")":j?g.strValue=c.join(" "):g.strValue=""+c):this.applyBypass(f,b,c)}},f.removeAllBypasses=function(a,b){return this.removeBypasses(a,this.propertyNames,b)},f.removeBypasses=function(a,b,c){for(var d=!0,e=0;e<a.length;e++){for(var f=a[e],g={},h=0;h<b.length;h++){var i=b[h],j=this.properties[i],k=f.pstyle(j.name);if(k&&k.bypass){var l="",m=this.parse(i,l,!0),n=g[j.name]={prev:k};this.applyParsedProperty(f,m),n.next=f.pstyle(j.name)}}this.updateStyleHints(f),c&&this.updateTransitions(f,g,d)}},b.exports=f},{"../is":83,"../util":100}],90:[function(a,b,c){"use strict";var d=a("../window"),e={};e.getEmSizeInPixels=function(){var a=this.containerCss("font-size");return null!=a?parseFloat(a):1},e.containerCss=function(a){var b=this._private.cy,c=b.container();return d&&c&&d.getComputedStyle?d.getComputedStyle(c).getPropertyValue(a):void 0},b.exports=e},{"../window":107}],91:[function(a,b,c){"use strict";
var d=a("../util"),e=a("../is"),f={};f.getRenderedStyle=function(a){return this.getRawStyle(a,!0)},f.getRawStyle=function(a,b){var c=this,a=a[0];if(a){for(var e={},f=0;f<c.properties.length;f++){var g=c.properties[f],h=c.getStylePropertyValue(a,g.name,b);h&&(e[g.name]=h,e[d.dash2camel(g.name)]=h)}return e}},f.getStylePropertyValue=function(a,b,c){var d=this,a=a[0];if(a){var e=d.properties[b];e.alias&&(e=e.pointsTo);var f=e.type,g=a.pstyle(e.name),h=a.cy().zoom();if(g){var i=g.units?f.implicitUnits||"px":null,j=i?[].concat(g.pfValue).map(function(a){return a*(c?h:1)+i}).join(" "):g.strValue;return j}}},f.getAnimationStartStyle=function(a,b){for(var c={},d=0;d<b.length;d++){var f=b[d],g=f.name,h=a.pstyle(g);void 0!==h&&(h=e.plainObject(h)?this.parse(g,h.strValue):this.parse(g,h)),h&&(c[g]=h)}return c},f.getPropsList=function(a){var b=this,c=[],e=a,f=b.properties;if(e)for(var g=Object.keys(e),h=0;h<g.length;h++){var i=g[h],j=e[i],k=f[i]||f[d.camel2dash(i)],l=this.parse(k.name,j);c.push(l)}return c},b.exports=f},{"../is":83,"../util":100}],92:[function(a,b,c){"use strict";var d=a("../is"),e=a("../util"),f=a("../selector"),g=function(a){return this instanceof g?d.core(a)?(this._private={cy:a,coreStyle:{}},this.length=0,void this.resetToDefault()):void e.error("A style must have a core reference"):new g(a)},h=g.prototype;h.instanceString=function(){return"style"},h.clear=function(){for(var a=0;a<this.length;a++)this[a]=void 0;this.length=0;var b=this._private;return b.newStyle=!0,this},h.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},h.core=function(){return this._private.coreStyle},h.selector=function(a){var b="core"===a?null:new f(a),c=this.length++;return this[c]={selector:b,properties:[],mappedProperties:[],index:c},this},h.css=function(){var a=this,b=arguments;switch(b.length){case 1:for(var c=b[0],d=0;d<a.properties.length;d++){var f=a.properties[d],g=c[f.name];void 0===g&&(g=c[e.dash2camel(f.name)]),void 0!==g&&this.cssRule(f.name,g)}break;case 2:this.cssRule(b[0],b[1])}return this},h.style=h.css,h.cssRule=function(a,b){var c=this.parse(a,b);if(c){var d=this.length-1;this[d].properties.push(c),this[d].properties[c.name]=c,c.name.match(/pie-(\d+)-background-size/)&&c.value&&(this._private.hasPie=!0),c.mapped&&this[d].mappedProperties.push(c);var e=!this[d].selector;e&&(this._private.coreStyle[c.name]=c)}return this},g.fromJson=function(a,b){var c=new g(a);return c.fromJson(b),c},g.fromString=function(a,b){return new g(a).fromString(b)},[a("./apply"),a("./bypass"),a("./container"),a("./get-for-ele"),a("./json"),a("./string-sheet"),a("./properties"),a("./parse")].forEach(function(a){e.extend(h,a)}),g.types=h.types,g.properties=h.properties,b.exports=g},{"../is":83,"../selector":87,"../util":100,"./apply":88,"./bypass":89,"./container":90,"./get-for-ele":91,"./json":93,"./parse":94,"./properties":95,"./string-sheet":96}],93:[function(a,b,c){"use strict";var d={};d.applyFromJson=function(a){for(var b=this,c=0;c<a.length;c++){var d=a[c],e=d.selector,f=d.style||d.css,g=Object.keys(f);b.selector(e);for(var h=0;h<g.length;h++){var i=g[h],j=f[i];b.css(i,j)}}return b},d.fromJson=function(a){var b=this;return b.resetToDefault(),b.applyFromJson(a),b},d.json=function(){for(var a=[],b=this.defaultLength;b<this.length;b++){for(var c=this[b],d=c.selector,e=c.properties,f={},g=0;g<e.length;g++){var h=e[g];f[h.name]=h.strValue}a.push({selector:d?d.toString():"core",style:f})}return a},b.exports=d},{}],94:[function(a,b,c){"use strict";var d=a("../util"),e=a("../is"),f=a("../math"),g={};g.parse=function(a,b,c,f){var g=this;if(e.fn(b))return g.parseImpl(a,b,c,f);var h,i=[a,b,c,f].join("$"),j=g.propCache=g.propCache||{};return(h=j[i])||(h=j[i]=g.parseImpl(a,b,c,f)),h=d.copy(h),h&&(h.value=d.copy(h.value)),h};var h=function(a,b,c,g){var h=this;a=d.camel2dash(a);var i=h.properties[a],j=b,k=h.types;if(!i)return null;if(void 0===b||null===b)return null;i.alias&&(i=i.pointsTo,a=i.name);var l=e.string(b);l&&(b=b.trim());var m=i.type;if(!m)return null;if(c&&(""===b||null===b))return{name:a,value:b,bypass:!0,deleteBypass:!0};if(e.fn(b))return{name:a,value:b,strValue:"fn",mapped:k.fn,bypass:c};var n,o,p,q,r,s;if(!l||g);else{if((n=new RegExp(k.data.regex).exec(b))||(p=new RegExp(k.layoutData.regex).exec(b))||(r=new RegExp(k.scratch.regex).exec(b))){if(c)return!1;var t;return t=n?k.data:p?k.layoutData:k.scratch,n=n||p||r,{name:a,value:n,strValue:""+b,mapped:t,field:n[1],bypass:c}}if((o=new RegExp(k.mapData.regex).exec(b))||(q=new RegExp(k.mapLayoutData.regex).exec(b))||(s=new RegExp(k.mapScratch.regex).exec(b))){if(c)return!1;if(m.multiple)return!1;var t;if(t=o?k.mapData:q?k.mapLayoutData:k.mapScratch,o=o||q||s,!m.color&&!m.number)return!1;var u=this.parse(a,o[4]);if(!u||u.mapped)return!1;var v=this.parse(a,o[5]);if(!v||v.mapped)return!1;if(u.value===v.value)return!1;if(m.color){var w=u.value,x=v.value,y=!(w[0]!==x[0]||w[1]!==x[1]||w[2]!==x[2]||w[3]!==x[3]&&(null!=w[3]&&1!==w[3]||null!=x[3]&&1!==x[3]));if(y)return!1}return{name:a,value:o,strValue:""+b,mapped:t,field:o[1],fieldMin:parseFloat(o[2]),fieldMax:parseFloat(o[3]),valueMin:u.value,valueMax:v.value,bypass:c}}}if(m.multiple&&"multiple"!==g){var z;if(z=l?b.split(/\s+/):e.array(b)?b:[b],m.evenMultiple&&z.length%2!==0)return null;var A=z.map(function(b){var d=h.parse(a,b,c,"multiple");return null!=d.pfValue?d.pfValue:d.value});return{name:a,value:A,pfValue:A,strValue:A.join(" "),bypass:c,units:m.number&&!m.unitless?m.implicitUnits||"px":void 0}}var B=function(){for(var d=0;d<m.enums.length;d++){var e=m.enums[d];if(e===b)return{name:a,value:b,strValue:""+b,bypass:c}}return null};if(m.number){var C,D="px";if(m.units&&(C=m.units),m.implicitUnits&&(D=m.implicitUnits),!m.unitless)if(l){var E="px|em"+(m.allowPercent?"|\\%":"");C&&(E=C);var F=b.match("^("+d.regex.number+")("+E+")?$");F&&(b=F[1],C=F[2]||D)}else C&&!m.implicitUnits||(C=D);if(b=parseFloat(b),isNaN(b)&&void 0===m.enums)return null;if(isNaN(b)&&void 0!==m.enums)return b=j,B();if(m.integer&&!e.integer(b))return null;if(void 0!==m.min&&b<m.min||void 0!==m.max&&b>m.max)return null;var G={name:a,value:b,strValue:""+b+(C?C:""),units:C,bypass:c};return m.unitless||"px"!==C&&"em"!==C?G.pfValue=b:G.pfValue="px"!==C&&C?this.getEmSizeInPixels()*b:b,"ms"!==C&&"s"!==C||(G.pfValue="ms"===C?b:1e3*b),"deg"!==C&&"rad"!==C||(G.pfValue="rad"===C?b:f.deg2rad(b)),G}if(m.propList){var H=[],I=""+b;if("none"===I);else{for(var J=I.split(","),K=0;K<J.length;K++){var L=J[K].trim();h.properties[L]&&H.push(L)}if(0===H.length)return null}return{name:a,value:H,strValue:0===H.length?"none":H.join(", "),bypass:c}}if(m.color){var M=d.color2tuple(b);return M?{name:a,value:M,strValue:""+b,bypass:c,roundValue:!0}:null}if(m.regex||m.regexes){if(m.enums){var N=B();if(N)return N}for(var O=m.regexes?m.regexes:[m.regex],K=0;K<O.length;K++){var P=new RegExp(O[K]),Q=P.exec(b);if(Q)return{name:a,value:Q,strValue:""+b,bypass:c}}return null}return m.string?{name:a,value:""+b,strValue:""+b,bypass:c}:m.enums?B():null};g.parseImpl=h,b.exports=g},{"../is":83,"../math":85,"../util":100}],95:[function(a,b,c){"use strict";var d=a("../util"),e={};!function(){var a=d.regex.number,b=d.regex.rgbaNoBackRefs,c=d.regex.hslaNoBackRefs,f=d.regex.hex3,g=d.regex.hex6,h=function(a){return"^"+a+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},i=function(d){var e=a+"|\\w+|"+b+"|"+c+"|"+f+"|"+g;return"^"+d+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+a+")\\s*\\,\\s*("+a+")\\s*,\\s*("+e+")\\s*\\,\\s*("+e+")\\)$"};e.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizes:{number:!0,multiple:!0},bgSize:{number:!0,min:0,allowPercent:!0},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"]},bgPos:{number:!0,allowPercent:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"]},bgFit:{enums:["none","contain","cover"]},bgCrossOrigin:{enums:["anonymous","use-credentials"]},bgClip:{enums:["none","node"]},color:{color:!0},bool:{enums:["yes","no"]},lineStyle:{enums:["solid","dotted","dashed"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontVariant:{enums:["small-caps","normal"]},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap"]},textBackgroundShape:{enums:["rectangle","roundrectangle"]},nodeShape:{enums:["rectangle","roundrectangle","ellipse","triangle","square","pentagon","hexagon","heptagon","octagon","star","diamond","vee","rhomboid","polygon"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","triangle-backcurve","half-triangle-overshot","vee","square","circle","diamond","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},text:{string:!0},data:{mapping:!0,regex:h("data")},layoutData:{mapping:!0,regex:h("layoutData")},scratch:{mapping:!0,regex:h("scratch")},mapData:{mapping:!0,regex:i("mapData")},mapLayoutData:{mapping:!0,regex:i("mapLayoutData")},mapScratch:{mapping:!0,regex:i("mapScratch")},fn:{mapping:!0,fn:!0},url:{regex:"url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)|none|(.+)$"},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position"]},easing:{regexes:["^(spring)\\s*\\(\\s*("+a+")\\s*,\\s*("+a+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+a+")\\s*,\\s*("+a+")\\s*,\\s*("+a+")\\s*,\\s*("+a+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]}};var j=e.types,k=e.properties=[{name:"label",type:j.text},{name:"text-rotation",type:j.textRotation},{name:"text-margin-x",type:j.bidirectionalSize},{name:"text-margin-y",type:j.bidirectionalSize},{name:"source-label",type:j.text},{name:"source-text-rotation",type:j.textRotation},{name:"source-text-margin-x",type:j.bidirectionalSize},{name:"source-text-margin-y",type:j.bidirectionalSize},{name:"source-text-offset",type:j.size},{name:"target-label",type:j.text},{name:"target-text-rotation",type:j.textRotation},{name:"target-text-margin-x",type:j.bidirectionalSize},{name:"target-text-margin-y",type:j.bidirectionalSize},{name:"target-text-offset",type:j.size},{name:"text-valign",type:j.valign},{name:"text-halign",type:j.halign},{name:"color",type:j.color},{name:"text-outline-color",type:j.color},{name:"text-outline-width",type:j.size},{name:"text-outline-opacity",type:j.zeroOneNumber},{name:"text-opacity",type:j.zeroOneNumber},{name:"text-background-color",type:j.color},{name:"text-background-margin",type:j.size},{name:"text-background-opacity",type:j.zeroOneNumber},{name:"text-border-opacity",type:j.zeroOneNumber},{name:"text-border-color",type:j.color},{name:"text-border-width",type:j.size},{name:"text-border-style",type:j.borderStyle},{name:"text-background-shape",type:j.textBackgroundShape},{name:"text-transform",type:j.textTransform},{name:"text-wrap",type:j.textWrap},{name:"text-max-width",type:j.size},{name:"text-events",type:j.bool},{name:"font-family",type:j.fontFamily},{name:"font-style",type:j.fontStyle},{name:"font-weight",type:j.fontWeight},{name:"font-size",type:j.size},{name:"min-zoomed-font-size",type:j.size},{name:"events",type:j.bool},{name:"display",type:j.display},{name:"visibility",type:j.visibility},{name:"opacity",type:j.zeroOneNumber},{name:"z-index",type:j.nonNegativeInt},{name:"overlay-padding",type:j.size},{name:"overlay-color",type:j.color},{name:"overlay-opacity",type:j.zeroOneNumber},{name:"shadow-blur",type:j.size},{name:"shadow-color",type:j.color},{name:"shadow-opacity",type:j.zeroOneNumber},{name:"shadow-offset-x",type:j.bidirectionalSize},{name:"shadow-offset-y",type:j.bidirectionalSize},{name:"text-shadow-blur",type:j.size},{name:"text-shadow-color",type:j.color},{name:"text-shadow-opacity",type:j.zeroOneNumber},{name:"text-shadow-offset-x",type:j.bidirectionalSize},{name:"text-shadow-offset-y",type:j.bidirectionalSize},{name:"transition-property",type:j.propList},{name:"transition-duration",type:j.time},{name:"transition-delay",type:j.time},{name:"transition-timing-function",type:j.easing},{name:"height",type:j.nodeSize},{name:"width",type:j.nodeSize},{name:"shape",type:j.nodeShape},{name:"shape-polygon-points",type:j.polygonPointList},{name:"background-color",type:j.color},{name:"background-opacity",type:j.zeroOneNumber},{name:"background-blacken",type:j.nOneOneNumber},{name:"padding",type:j.size},{name:"border-color",type:j.color},{name:"border-opacity",type:j.zeroOneNumber},{name:"border-width",type:j.size},{name:"border-style",type:j.borderStyle},{name:"background-image",type:j.url},{name:"background-image-crossorigin",type:j.bgCrossOrigin},{name:"background-image-opacity",type:j.zeroOneNumber},{name:"background-position-x",type:j.bgPos},{name:"background-position-y",type:j.bgPos},{name:"background-repeat",type:j.bgRepeat},{name:"background-fit",type:j.bgFit},{name:"background-clip",type:j.bgClip},{name:"background-width",type:j.bgWH},{name:"background-height",type:j.bgWH},{name:"position",type:j.position},{name:"compound-sizing-wrt-labels",type:j.compoundIncludeLabels},{name:"line-style",type:j.lineStyle},{name:"line-color",type:j.color},{name:"curve-style",type:j.curveStyle},{name:"haystack-radius",type:j.zeroOneNumber},{name:"control-point-step-size",type:j.size},{name:"control-point-distances",type:j.bidirectionalSizes},{name:"control-point-weights",type:j.numbers},{name:"segment-distances",type:j.bidirectionalSizes},{name:"segment-weights",type:j.numbers},{name:"edge-distances",type:j.edgeDistances},{name:"selection-box-color",type:j.color},{name:"selection-box-opacity",type:j.zeroOneNumber},{name:"selection-box-border-color",type:j.color},{name:"selection-box-border-width",type:j.size},{name:"active-bg-color",type:j.color},{name:"active-bg-opacity",type:j.zeroOneNumber},{name:"active-bg-size",type:j.size},{name:"outside-texture-bg-color",type:j.color},{name:"outside-texture-bg-opacity",type:j.zeroOneNumber}],l=e.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];e.pieBackgroundN=16,k.push({name:"pie-size",type:j.bgSize});for(var m=1;m<=e.pieBackgroundN;m++)k.push({name:"pie-"+m+"-background-color",type:j.color}),k.push({name:"pie-"+m+"-background-size",type:j.percent}),k.push({name:"pie-"+m+"-background-opacity",type:j.zeroOneNumber});var n=e.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:j.arrowShape},{name:"arrow-color",type:j.color},{name:"arrow-fill",type:j.arrowFill}].forEach(function(a){n.forEach(function(b){var c=b+"-"+a.name,d=a.type;k.push({name:c,type:d})})},{}),e.propertyNames=k.map(function(a){return a.name});for(var m=0;m<k.length;m++){var o=k[m];k[o.name]=o}for(var m=0;m<l.length;m++){var p=l[m],q=k[p.pointsTo],r={name:p.name,alias:!0,pointsTo:q};k.push(r),k[p.name]=r}}(),e.getDefaultProperty=function(a){return this.getDefaultProperties()[a]},e.getDefaultProperties=d.memoize(function(){for(var a=d.extend({events:"yes","text-events":"no","text-valign":"top","text-halign":"center",color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-margin":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","text-background-shape":"rectangle","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"shadow-opacity":0,"shadow-color":"#000","shadow-blur":10,"shadow-offset-x":0,"shadow-offset-y":0,"text-shadow-opacity":0,"text-shadow-color":"#000","text-shadow-blur":5,"text-shadow-offset-x":0,"text-shadow-offset-y":0,"transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-position-x":"50%","background-position-y":"50%","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1",padding:0,position:"origin","compound-sizing-wrt-labels":"include"},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(a,b){for(var c=1;c<=e.pieBackgroundN;c++){var d=b.name.replace("{{i}}",c),f=b.value;a[d]=f}return a},{}),{"line-style":"solid","line-color":"#999","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"edge-distances":"intersection","curve-style":"bezier","haystack-radius":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"}].reduce(function(a,b){return e.arrowPrefixes.forEach(function(c){var d=c+"-"+b.name,e=b.value;a[d]=e}),a},{})),b={},c=0;c<this.properties.length;c++){var f=this.properties[c];if(!f.pointsTo){var g=f.name,h=a[g],i=this.parse(g,h);b[g]=i}}return b}),e.addDefaultStylesheet=function(){this.selector("$node > node").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3,"curve-style":"haystack"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector("node:parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}).selector("core").css({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125}),this.defaultLength=this.length},b.exports=e},{"../util":100}],96:[function(a,b,c){"use strict";var d=a("../util"),e=a("../selector"),f={};f.applyFromString=function(a){function b(){k=k.length>f.length?k.substr(f.length):""}function c(){g=g.length>h.length?g.substr(h.length):""}var f,g,h,i=this,j=this,k=""+a;for(k=k.replace(/[\/][*](\s|.)+?[*][\/]/g,"");;){var l=k.match(/^\s*$/);if(l)break;var m=k.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!m){d.error("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+k);break}f=m[0];var n=m[1];if("core"!==n){var o=new e(n);if(o._private.invalid){d.error("Skipping parsing of block: Invalid selector found in string stylesheet: "+n),b();continue}}var p=m[2],q=!1;g=p;for(var r=[];;){var l=g.match(/^\s*$/);if(l)break;var s=g.match(/^\s*(.+?)\s*:\s*(.+?)\s*;/);if(!s){d.error("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+p),q=!0;break}h=s[0];var t=s[1],u=s[2],v=i.properties[t];if(v){var w=j.parse(t,u);w?(r.push({name:t,val:u}),c()):(d.error("Skipping property: Invalid property definition in: "+h),c())}else d.error("Skipping property: Invalid property name in: "+h),c()}if(q){b();break}j.selector(n);for(var x=0;x<r.length;x++){var v=r[x];j.css(v.name,v.val)}b()}return j},f.fromString=function(a){var b=this;return b.resetToDefault(),b.applyFromString(a),b},b.exports=f},{"../selector":87,"../util":100}],97:[function(a,b,c){"use strict";var d=a("./is"),e=a("./util"),f=a("./style"),g=function(){return this instanceof g?void(this.length=0):new g},h=g.prototype;h.instanceString=function(){return"stylesheet"},h.selector=function(a){var b=this.length++;return this[b]={selector:a,properties:[]},this},h.css=function(a,b){var c=this.length-1;if(d.string(a))this[c].properties.push({name:a,value:b});else if(d.plainObject(a))for(var g=a,h=0;h<f.properties.length;h++){var i=f.properties[h],j=g[i.name];if(void 0===j&&(j=g[e.dash2camel(i.name)]),void 0!==j){var a=i.name,b=j;this[c].properties.push({name:a,value:b})}}return this},h.style=h.css,h.generateStyle=function(a){for(var b=new f(a),c=0;c<this.length;c++){var d=this[c],e=d.selector,g=d.properties;b.selector(e);for(var h=0;h<g.length;h++){var i=g[h];b.css(i.name,i.value)}}return b},b.exports=g},{"./is":83,"./style":92,"./util":100}],98:[function(_dereq_,module,exports){"use strict";var window=_dereq_("./window"),util=_dereq_("./util"),Promise=_dereq_("./promise"),Event=_dereq_("./event"),define=_dereq_("./define"),is=_dereq_("./is"),Thread=function(a){if(!(this instanceof Thread))return new Thread(a);var b=this._private={requires:[],files:[],queue:null,pass:[],disabled:!1};is.plainObject(a)&&null!=a.disabled&&(b.disabled=!!a.disabled)},thdfn=Thread.prototype,stringifyFieldVal=function(a){var b=is.fn(a)?a.toString():"JSON.parse('"+JSON.stringify(a)+"')";return b},fnAsRequire=function(a){var b,c;is.object(a)&&a.fn?(b=fnAs(a.fn,a.name),c=a.name,a=a.fn):is.fn(a)?(b=a.toString(),c=a.name):is.string(a)?b=a:is.object(a)&&(b=a.proto?"":a.name+" = {};",c=a.name,a=a.obj),b+="\n";var d=function(a,c){if(a.prototype){var d=!1;for(var e in a.prototype){d=!0;break}d&&(b+=fnAsRequire({name:c,obj:a,proto:!0},a))}};if(a.prototype&&null!=c)for(var e in a.prototype){var f="",g=a.prototype[e],h=stringifyFieldVal(g),i=c+".prototype."+e;f+=i+" = "+h+";\n",f&&(b+=f),d(g,i)}if(!is.string(a))for(var e in a){var j="";if(a.hasOwnProperty(e)){var g=a[e],h=stringifyFieldVal(g),i=c+'["'+e+'"]';j+=i+" = "+h+";\n"}j&&(b+=j),d(g,i)}return b},isPathStr=function(a){return is.string(a)&&a.match(/\.js$/)};util.extend(thdfn,{instanceString:function(){return"thread"},require:function(a,b){var c=this._private.requires;if(isPathStr(a))return this._private.files.push(a),this;if(b)a=is.fn(a)?{name:b,fn:a}:{name:b,obj:a};else if(is.fn(a)){if(!a.name)throw'The function name could not be automatically determined.  Use thread.require( someFunction, "someFunction" )';a={name:a.name,fn:a}}return c.push(a),this},pass:function(a){return this._private.pass.push(a),this},run:function(fn,pass){var self=this,_p=this._private;if(pass=pass||_p.pass.shift(),_p.stopped)throw"Attempted to run a stopped thread!  Start a new thread or do not stop the existing thread and reuse it.";if(_p.running)return _p.queue=_p.queue.then(function(){return self.run(fn,pass)});var useWW=null!=window&&!_p.disabled,useNode=!window&&"undefined"!=typeof module&&!_p.disabled;self.trigger("run");var runP=new Promise(function(resolve,reject){_p.running=!0;var threadTechAlreadyExists=_p.ran,fnImplStr=is.string(fn)?fn:fn.toString(),fnStr="\n"+_p.requires.map(function(a){return fnAsRequire(a)}).concat(_p.files.map(function(a){if(useWW){var b=function(a){return a.match(/^\.\//)||a.match(/^\.\./)?window.location.origin+window.location.pathname+a:a.match(/^\//)?window.location.origin+"/"+a:a};return'importScripts("'+b(a)+'");'}if(useNode)return'eval( require("fs").readFileSync("'+a+'", { encoding: "utf8" }) );';throw"External file `"+a+"` can not be required without any threading technology."})).concat(["( function(){","var ret = ("+fnImplStr+")("+JSON.stringify(pass)+");","if( ret !== undefined ){ resolve(ret); }","} )()\n"]).join("\n");if(_p.requires=[],_p.files=[],useWW){var fnBlob,fnUrl;if(!threadTechAlreadyExists){var fnPre=fnStr+"";fnStr=["function _ref_(o){ return eval(o); };","function broadcast(m){ return message(m); };","function message(m){ postMessage(m); };","function listen(fn){",'  self.addEventListener("message", function(m){ ','    if( typeof m === "object" && (m.data.$$eval || m.data === "$$start") ){',"    } else { ","      fn( m.data );","    }","  });","};",'self.addEventListener("message", function(m){  if( m.data.$$eval ){ eval( m.data.$$eval ); }  });',"function resolve(v){ postMessage({ $$resolve: v }); };","function reject(v){ postMessage({ $$reject: v }); };"].join("\n"),fnStr+=fnPre,fnBlob=new Blob([fnStr],{type:"application/javascript"}),fnUrl=window.URL.createObjectURL(fnBlob)}var ww=_p.webworker=_p.webworker||new Worker(fnUrl);threadTechAlreadyExists&&ww.postMessage({$$eval:fnStr});var cb;ww.addEventListener("message",cb=function(a){var b=is.object(a)&&is.object(a.data);b&&"$$resolve"in a.data?(ww.removeEventListener("message",cb),resolve(a.data.$$resolve)):b&&"$$reject"in a.data?(ww.removeEventListener("message",cb),reject(a.data.$$reject)):self.trigger(new Event(a,{type:"message",message:a.data}))},!1),threadTechAlreadyExists||ww.postMessage("$$start")}else if(useNode){_p.child||(_p.child=_dereq_("child_process").fork(_dereq_("path").join(__dirname,"thread-node-fork")));var child=_p.child,cb;child.on("message",cb=function(a){is.object(a)&&"$$resolve"in a?(child.removeListener("message",cb),resolve(a.$$resolve)):is.object(a)&&"$$reject"in a?(child.removeListener("message",cb),reject(a.$$reject)):self.trigger(new Event({},{type:"message",message:a}))}),child.send({$$eval:fnStr})}else{var promiseResolve=resolve,promiseReject=reject,timer=_p.timer=_p.timer||{listeners:[],exec:function(){fnStr=["function _ref_(o){ return eval(o); };","function broadcast(m){ return message(m); };",'function message(m){ self.trigger( new Event({}, { type: "message", message: m }) ); };',"function listen(fn){ timer.listeners.push( fn ); };","function resolve(v){ promiseResolve(v); };","function reject(v){ promiseReject(v); };"].join("\n")+fnStr,eval(fnStr)},message:function(a){for(var b=timer.listeners,c=0;c<b.length;c++){var d=b[c];d(a)}}};timer.exec()}}).then(function(a){return _p.running=!1,_p.ran=!0,self.trigger("ran"),a});return null==_p.queue&&(_p.queue=runP),runP},message:function(a){var b=this._private;return b.webworker&&b.webworker.postMessage(a),b.child&&b.child.send(a),b.timer&&b.timer.message(a),this},stop:function(){var a=this._private;return a.webworker&&a.webworker.terminate(),a.child&&a.child.kill(),a.timer,a.stopped=!0,this.trigger("stop")},stopped:function(){return this._private.stopped}});var fnAs=function(a,b){var c=a.toString();return c=c.replace(/function\s*?\S*?\s*?\(/,"function "+b+"(")},defineFnal=function(a){return a=a||{},function(b,c){var d=fnAs(b,"_$_$_"+a.name);return this.require(d),this.run(["function( data ){","  var origResolve = resolve;","  var res = [];","  ","  resolve = function( val ){","    res.push( val );","  };","  ","  var ret = data."+a.name+"( _$_$_"+a.name+(arguments.length>1?", "+JSON.stringify(c):"")+" );","  ","  resolve = origResolve;","  resolve( res.length > 0 ? res : ret );","}"].join("\n"))}};util.extend(thdfn,{reduce:defineFnal({name:"reduce"}),reduceRight:defineFnal({name:"reduceRight"}),map:defineFnal({name:"map"})});var fn=thdfn;fn.promise=fn.run,fn.terminate=fn.halt=fn.stop,fn.include=fn.require,util.extend(thdfn,{on:define.on(),one:define.on({unbindSelfOnTrigger:!0}),off:define.off(),trigger:define.trigger()}),define.eventAliasesOn(thdfn),module.exports=Thread},{"./define":44,"./event":45,"./is":83,"./promise":86,"./util":100,"./window":107,child_process:void 0,path:void 0}],99:[function(a,b,c){"use strict";var d=a("../is");b.exports={hex2tuple:function(a){if((4===a.length||7===a.length)&&"#"===a[0]){var b,c,d,e=4===a.length,f=16;return e?(b=parseInt(a[1]+a[1],f),c=parseInt(a[2]+a[2],f),d=parseInt(a[3]+a[3],f)):(b=parseInt(a[1]+a[2],f),c=parseInt(a[3]+a[4],f),d=parseInt(a[5]+a[6],f)),[b,c,d]}},hsl2tuple:function(a){function b(a,b,c){return 0>c&&(c+=1),c>1&&(c-=1),1/6>c?a+6*(b-a)*c:.5>c?b:2/3>c?a+(b-a)*(2/3-c)*6:a}var c,d,e,f,g,h,i,j,k=new RegExp("^"+this.regex.hsla+"$").exec(a);if(k){if(d=parseInt(k[1]),0>d?d=(360- -1*d%360)%360:d>360&&(d%=360),d/=360,e=parseFloat(k[2]),0>e||e>100)return;if(e/=100,f=parseFloat(k[3]),0>f||f>100)return;if(f/=100,g=k[4],void 0!==g&&(g=parseFloat(g),0>g||g>1))return;if(0===e)h=i=j=Math.round(255*f);else{var l=.5>f?f*(1+e):f+e-f*e,m=2*f-l;h=Math.round(255*b(m,l,d+1/3)),i=Math.round(255*b(m,l,d)),j=Math.round(255*b(m,l,d-1/3))}c=[h,i,j,g]}return c},rgb2tuple:function(a){var b,c=new RegExp("^"+this.regex.rgba+"$").exec(a);if(c){b=[];for(var d=[],e=1;3>=e;e++){var f=c[e];if("%"===f[f.length-1]&&(d[e]=!0),f=parseFloat(f),d[e]&&(f=f/100*255),0>f||f>255)return;b.push(Math.floor(f))}var g=d[1]||d[2]||d[3],h=d[1]&&d[2]&&d[3];if(g&&!h)return;var i=c[4];if(void 0!==i){if(i=parseFloat(i),0>i||i>1)return;b.push(i)}}return b},colorname2tuple:function(a){return this.colors[a.toLowerCase()]},color2tuple:function(a){return(d.array(a)?a:null)||this.colorname2tuple(a)||this.hex2tuple(a)||this.rgb2tuple(a)||this.hsl2tuple(a)},colors:{transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],
ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}}},{"../is":83}],100:[function(a,b,c){"use strict";var d=a("../is"),e=a("../math"),f={trueify:function(){return!0},falsify:function(){return!1},zeroify:function(){return 0},noop:function(){},error:function(a){console.error?(console.error.apply(console,arguments),console.trace&&console.trace()):(console.log.apply(console,arguments),console.trace&&console.trace())},clone:function(a){return this.extend({},a)},copy:function(a){return null==a?a:d.array(a)?a.slice():d.plainObject(a)?this.clone({ node: a }):a},uuid:function(a, b){for(b=a=""; a++<36; b+=51*a&52?(15^a?8^Math.random()*(20^a?16:4):4).toString(16):"-");return b}};f.makeBoundingBox=e.makeBoundingBox.bind(e),f._staticEmptyObject={},f.staticEmptyObject=function(){return f._staticEmptyObject},f.extend=null!=Object.assign?Object.assign:function(a){for(var b=arguments,c=1; c<b.length; c++){var d=b[c];if(d)for(var e=Object.keys(d),f=0; f<e.length; f++){var g=e[f];a[g]=d[g]}}return a},f.default=function(a, b){return void 0===a?b:a},f.removeFromArray=function(a,b,c){for(var d=a.length;d>=0&&(a[d]!==b||(a.splice(d,1),c));d--);},f.clearArray=function(a){a.splice(0,a.length)},f.getPrefixedProperty=function(a,b,c){return c&&(b=this.prependCamel(c,b)),a[b]},f.setPrefixedProperty=function(a,b,c,d){c&&(b=this.prependCamel(c,b)),a[b]=d},[a("./colors"),a("./maps"),{memoize:a("./memoize")},a("./regex"),a("./strings"),a("./timing")].forEach(function(a){f.extend(f,a)}),b.exports=f},{"../is":83,"../math":85,"./colors":99,"./maps":101,"./memoize":102,"./regex":103,"./strings":104,"./timing":105}],101:[function(a,b,c){"use strict";var d=a("../is");b.exports={mapEmpty:function(a){var b=!0;return null!=a?0===Object.keys(a).length:b},pushMap:function(a){var b=this.getMap(a);null==b?this.setMap(this.extend({},a,{value:[a.value]})):b.push(a.value)},setMap:function(a){for(var b,c=a.map,e=a.keys,f=e.length,g=0;f>g;g++){var b=e[g];d.plainObject(b)&&this.error("Tried to set map with object key"),g<e.length-1?(null==c[b]&&(c[b]={}),c=c[b]):c[b]=a.value}},getMap:function(a){for(var b=a.map,c=a.keys,e=c.length,f=0;e>f;f++){var g=c[f];if(d.plainObject(g)&&this.error("Tried to get map with object key"),b=b[g],null==b)return b}return b},deleteMap:function(a){for(var b=a.map,c=a.keys,e=c.length,f=a.keepChildren,g=0;e>g;g++){var h=c[g];d.plainObject(h)&&this.error("Tried to delete map with object key");var i=g===a.keys.length-1;if(i)if(f)for(var j=Object.keys(b),k=0;k<j.length;k++){var l=j[k];f[l]||(b[l]=void 0)}else b[h]=void 0;else b=b[h]}}}},{"../is":83}],102:[function(a,b,c){"use strict";b.exports=function(a,b){b||(b=function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var a=[],b=0;b<arguments.length;b++)a.push(arguments[b]);return a.join("$")});var c=function(){var d,e=this,f=arguments,g=b.apply(e,f),h=c.cache;return(d=h[g])||(d=h[g]=a.apply(e,f)),d};return c.cache={},c}},{}],103:[function(a,b,c){"use strict";var d="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",e="rgb[a]?\\(("+d+"[%]?)\\s*,\\s*("+d+"[%]?)\\s*,\\s*("+d+"[%]?)(?:\\s*,\\s*("+d+"))?\\)",f="rgb[a]?\\((?:"+d+"[%]?)\\s*,\\s*(?:"+d+"[%]?)\\s*,\\s*(?:"+d+"[%]?)(?:\\s*,\\s*(?:"+d+"))?\\)",g="hsl[a]?\\(("+d+")\\s*,\\s*("+d+"[%])\\s*,\\s*("+d+"[%])(?:\\s*,\\s*("+d+"))?\\)",h="hsl[a]?\\((?:"+d+")\\s*,\\s*(?:"+d+"[%])\\s*,\\s*(?:"+d+"[%])(?:\\s*,\\s*(?:"+d+"))?\\)",i="\\#[0-9a-fA-F]{3}",j="\\#[0-9a-fA-F]{6}";b.exports={regex:{number:d,rgba:e,rgbaNoBackRefs:f,hsla:g,hslaNoBackRefs:h,hex3:i,hex6:j}}},{}],104:[function(a,b,c){"use strict";var d=a("./memoize"),e=a("../is");b.exports={camel2dash:d(function(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}),dash2camel:d(function(a){return a.replace(/(-\w)/g,function(a){return a[1].toUpperCase()})}),prependCamel:d(function(a,b){return a+b[0].toUpperCase()+b.substring(1)},function(a,b){return a+"$"+b}),capitalize:function(a){return e.emptyString(a)?a:a.charAt(0).toUpperCase()+a.substring(1)}}},{"../is":83,"./memoize":102}],105:[function(a,b,c){"use strict";var d=a("../window"),e=a("../is"),f=d?d.performance:null,g={},h=d?function(){return d.requestAnimationFrame?function(a){d.requestAnimationFrame(a)}:d.mozRequestAnimationFrame?function(a){d.mozRequestAnimationFrame(a)}:d.webkitRequestAnimationFrame?function(a){d.webkitRequestAnimationFrame(a)}:d.msRequestAnimationFrame?function(a){d.msRequestAnimationFrame(a)}:void 0}():function(a){a&&setTimeout(function(){a(i())},1e3/60)};g.requestAnimationFrame=function(a){h(a)};var i=f&&f.now?function(){return f.now()}:function(){return Date.now()};g.performanceNow=i,g.throttle=function(a,b,c){var d=!0,f=!0;return c===!1?d=!1:e.plainObject(c)&&(d="leading"in c?c.leading:d,f="trailing"in c?c.trailing:f),c=c||{},c.leading=d,c.maxWait=b,c.trailing=f,g.debounce(a,b,c)},g.now=function(){return Date.now()},g.debounce=function(a,b,c){var d,f,g,h,i,j,k,l=this,m=0,n=!1,o=!0;if(e.fn(a)){if(b=Math.max(0,b)||0,c===!0){var p=!0;o=!1}else e.plainObject(c)&&(p=c.leading,n="maxWait"in c&&(Math.max(b,c.maxWait)||0),o="trailing"in c?c.trailing:o);var q=function(){var c=b-(l.now()-h);if(0>=c){f&&clearTimeout(f);var e=k;f=j=k=void 0,e&&(m=l.now(),g=a.apply(i,d),j||f||(d=i=null))}else j=setTimeout(q,c)},r=function(){j&&clearTimeout(j),f=j=k=void 0,(o||n!==b)&&(m=l.now(),g=a.apply(i,d),j||f||(d=i=null))};return function(){if(d=arguments,h=l.now(),i=this,k=o&&(j||!p),n===!1)var c=p&&!j;else{f||p||(m=h);var e=n-(h-m),s=0>=e;s?(f&&(f=clearTimeout(f)),m=h,g=a.apply(i,d)):f||(f=setTimeout(r,e))}return s&&j?j=clearTimeout(j):j||b===n||(j=setTimeout(q,b)),c&&(s=!0,g=a.apply(i,d)),!s||j||f||(d=i=null),g}}},b.exports=g},{"../is":83,"../window":107}],106:[function(a,b,c){b.exports="2.7.13"},{}],107:[function(a,b,c){b.exports="undefined"==typeof window?null:window},{}]},{},[82])(82)}),!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.dagre=a()}}(function(){var a;return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){b.exports={graphlib:a("./lib/graphlib"),layout:a("./lib/layout"),debug:a("./lib/debug"),util:{time:a("./lib/util").time,notime:a("./lib/util").notime},version:a("./lib/version")}},{"./lib/debug":6,"./lib/graphlib":7,"./lib/layout":9,"./lib/util":29,"./lib/version":30}],2:[function(a,b,c){"use strict";function f(a){function c(a){return function(b){return a.edge(b).weight}}var b="greedy"===a.graph().acyclicer?e(a,c(a)):g(a);d.each(b,function(b){var c=a.edge(b);a.removeEdge(b),c.forwardName=b.name,c.reversed=!0,a.setEdge(b.w,b.v,c,d.uniqueId("rev"))})}function g(a){function f(g){d.has(e,g)||(e[g]=!0,c[g]=!0,d.each(a.outEdges(g),function(a){d.has(c,a.w)?b.push(a):f(a.w)}),delete c[g])}var b=[],c={},e={};return d.each(a.nodes(),f),b}function h(a){d.each(a.edges(),function(b){var c=a.edge(b);if(c.reversed){a.removeEdge(b);var d=c.forwardName;delete c.reversed,delete c.forwardName,a.setEdge(b.w,b.v,c,d)}})}var d=a("./lodash"),e=a("./greedy-fas");b.exports={run:f,undo:h}},{"./greedy-fas":8,"./lodash":10}],3:[function(a,b,c){function f(a){function b(c){var e=a.children(c),f=a.node(c);if(e.length&&d.each(e,b),d.has(f,"minRank")){f.borderLeft=[],f.borderRight=[];for(var h=f.minRank,i=f.maxRank+1;h<i;++h)g(a,"borderLeft","_bl",c,f,h),g(a,"borderRight","_br",c,f,h)}}d.each(a.children(),b)}function g(a,b,c,d,f,g){var h={width:0,height:0,rank:g,borderType:b},i=f[b][g-1],j=e.addDummyNode(a,"border",h,c);f[b][g]=j,a.setParent(j,d),i&&a.setEdge(i,j,{weight:1})}var d=a("./lodash"),e=a("./util");b.exports=f},{"./lodash":10,"./util":29}],4:[function(a,b,c){"use strict";function e(a){var b=a.graph().rankdir.toLowerCase();"lr"!==b&&"rl"!==b||g(a)}function f(a){var b=a.graph().rankdir.toLowerCase();"bt"!==b&&"rl"!==b||i(a),"lr"!==b&&"rl"!==b||(k(a),g(a))}function g(a){d.each(a.nodes(),function(b){h(a.node(b))}),d.each(a.edges(),function(b){h(a.edge(b))})}function h(a){var b=a.width;a.width=a.height,a.height=b}function i(a){d.each(a.nodes(),function(b){j(a.node(b))}),d.each(a.edges(),function(b){var c=a.edge(b);d.each(c.points,j),d.has(c,"y")&&j(c)})}function j(a){a.y=-a.y}function k(a){d.each(a.nodes(),function(b){l(a.node(b))}),d.each(a.edges(),function(b){var c=a.edge(b);d.each(c.points,l),d.has(c,"x")&&l(c)})}function l(a){var b=a.x;a.x=a.y,a.y=b}var d=a("./lodash");b.exports={adjust:e,undo:f}},{"./lodash":10}],5:[function(a,b,c){function d(){var a={};a._next=a._prev=a,this._sentinel=a}function e(a){a._prev._next=a._next,a._next._prev=a._prev,delete a._next,delete a._prev}function f(a,b){if("_next"!==a&&"_prev"!==a)return b}b.exports=d,d.prototype.dequeue=function(){var a=this._sentinel,b=a._prev;if(b!==a)return e(b),b},d.prototype.enqueue=function(a){var b=this._sentinel;a._prev&&a._next&&e(a),a._next=b._next,b._next._prev=a,b._next=a,a._prev=b},d.prototype.toString=function(){for(var a=[],b=this._sentinel,c=b._prev;c!==b;)a.push(JSON.stringify(c,f)),c=c._prev;return"["+a.join(", ")+"]"}},{}],6:[function(a,b,c){function g(a){var b=e.buildLayerMatrix(a),c=new f({compound:!0,multigraph:!0}).setGraph({});return d.each(a.nodes(),function(b){c.setNode(b,{label:b}),c.setParent(b,"layer"+a.node(b).rank)}),d.each(a.edges(),function(a){c.setEdge(a.v,a.w,{},a.name)}),d.each(b,function(a,b){var e="layer"+b;c.setNode(e,{rank:"same"}),d.reduce(a,function(a,b){return c.setEdge(a,b,{style:"invis"}),b})}),c}var d=a("./lodash"),e=a("./util"),f=a("./graphlib").Graph;b.exports={debugOrdering:g}},{"./graphlib":7,"./lodash":10,"./util":29}],7:[function(a,b,c){var d;if("function"==typeof a)try{d=a("graphlib")}catch(a){}d||(d=window.graphlib),b.exports=d},{graphlib:31}],8:[function(a,b,c){function h(a,b){if(a.nodeCount()<=1)return[];var c=k(a,b||g),e=i(c.graph,c.buckets,c.zeroIdx);return d.flatten(d.map(e,function(b){return a.outEdges(b.v,b.w)}),!0)}function i(a,b,c){for(var g,d=[],e=b[b.length-1],f=b[0];a.nodeCount();){for(;g=f.dequeue();)j(a,b,c,g);for(;g=e.dequeue();)j(a,b,c,g);if(a.nodeCount())for(var h=b.length-2;h>0;--h)if(g=b[h].dequeue()){d=d.concat(j(a,b,c,g,!0));break}}return d}function j(a,b,c,e,f){var g=f?[]:void 0;return d.each(a.inEdges(e.v),function(d){var e=a.edge(d),h=a.node(d.v);f&&g.push({v:d.v,w:d.w}),h.out-=e,l(b,c,h)}),d.each(a.outEdges(e.v),function(d){var e=a.edge(d),f=d.w,g=a.node(f);g.in-=e,l(b,c,g)}),a.removeNode(e.v),g}function k(a,b){var c=new e,g=0,h=0;d.each(a.nodes(),function(a){c.setNode(a,{v:a,in:0,out:0})}),d.each(a.edges(),function(a){var d=c.edge(a.v,a.w)||0,e=b(a),f=d+e;c.setEdge(a.v,a.w,f),h=Math.max(h,c.node(a.v).out+=e),g=Math.max(g,c.node(a.w).in+=e)});var i=d.range(h+g+3).map(function(){return new f}),j=g+1;return d.each(c.nodes(),function(a){l(i,j,c.node(a))}),{graph:c,buckets:i,zeroIdx:j}}function l(a,b,c){c.out?c.in?a[c.out-c.in+b].enqueue(c):a[a.length-1].enqueue(c):a[0].enqueue(c)}var d=a("./lodash"),e=a("./graphlib").Graph,f=a("./data/list");b.exports=h;var g=d.constant(1)},{"./data/list":5,"./graphlib":7,"./lodash":10}],9:[function(a,b,c){"use strict";function r(a,b){var c=b&&b.debugTiming?p.time:p.notime;c("layout",function(){var b=c("  buildLayoutGraph",function(){return C(a)});c("  runLayout",function(){s(b,c)}),c("  updateInputGraph",function(){t(a,b)})})}function s(a,b){b("    makeSpaceForEdgeLabels",function(){D(a)}),b("    removeSelfEdges",function(){M(a)}),b("    acyclic",function(){e.run(a)}),b("    nestingGraph.run",function(){k.run(a)}),b("    rank",function(){g(p.asNonCompoundGraph(a))}),b("    injectEdgeLabelProxies",function(){E(a)}),b("    removeEmptyRanks",function(){j(a)}),b("    nestingGraph.cleanup",function(){k.cleanup(a)}),b("    normalizeRanks",function(){h(a)}),b("    assignRankMinMax",function(){F(a)}),b("    removeEdgeLabelProxies",function(){G(a)}),b("    normalize.run",function(){f.run(a)}),b("    parentDummyChains",function(){i(a)}),b("    addBorderSegments",function(){l(a)}),b("    order",function(){n(a)}),b("    insertSelfEdges",function(){N(a)}),b("    adjustCoordinateSystem",function(){m.adjust(a)}),b("    position",function(){o(a)}),b("    positionSelfEdges",function(){O(a)}),b("    removeBorderNodes",function(){L(a)}),b("    normalize.undo",function(){f.undo(a)}),b("    fixupEdgeLabelCoords",function(){J(a)}),b("    undoCoordinateSystem",function(){m.undo(a)}),b("    translateGraph",function(){H(a)}),b("    assignNodeIntersects",function(){I(a)}),b("    reversePoints",function(){K(a)}),b("    acyclic.undo",function(){e.undo(a)})}function t(a,b){d.each(a.nodes(),function(c){var d=a.node(c),e=b.node(c);d&&(d.x=e.x,d.y=e.y,b.children(c).length&&(d.width=e.width,d.height=e.height))}),d.each(a.edges(),function(c){var e=a.edge(c),f=b.edge(c);e.points=f.points,d.has(f,"x")&&(e.x=f.x,e.y=f.y)}),a.graph().width=b.graph().width,a.graph().height=b.graph().height}function C(a){var b=new q({multigraph:!0,compound:!0}),c=Q(a.graph());return b.setGraph(d.merge({},v,P(c,u),d.pick(c,w))),d.each(a.nodes(),function(c){var e=Q(a.node(c));b.setNode(c,d.defaults(P(e,x),y)),b.setParent(c,a.parent(c))}),d.each(a.edges(),function(c){var e=Q(a.edge(c));b.setEdge(c,d.merge({},A,P(e,z),d.pick(e,B)))}),b}function D(a){var b=a.graph();b.ranksep/=2,d.each(a.edges(),function(c){var d=a.edge(c);d.minlen*=2,"c"!==d.labelpos.toLowerCase()&&("TB"===b.rankdir||"BT"===b.rankdir?d.width+=d.labeloffset:d.height+=d.labeloffset)})}function E(a){d.each(a.edges(),function(b){var c=a.edge(b);if(c.width&&c.height){var d=a.node(b.v),e=a.node(b.w),f={rank:(e.rank-d.rank)/2+d.rank,e:b};p.addDummyNode(a,"edge-proxy",f,"_ep")}})}function F(a){var b=0;d.each(a.nodes(),function(c){var e=a.node(c);e.borderTop&&(e.minRank=a.node(e.borderTop).rank,e.maxRank=a.node(e.borderBottom).rank,b=d.max(b,e.maxRank))}),a.graph().maxRank=b}function G(a){d.each(a.nodes(),function(b){var c=a.node(b);"edge-proxy"===c.dummy&&(a.edge(c.e).labelRank=c.rank,a.removeNode(b))})}function H(a){function j(a){var d=a.x,g=a.y,h=a.width,i=a.height;b=Math.min(b,d-h/2),c=Math.max(c,d+h/2),e=Math.min(e,g-i/2),f=Math.max(f,g+i/2)}var b=Number.POSITIVE_INFINITY,c=0,e=Number.POSITIVE_INFINITY,f=0,g=a.graph(),h=g.marginx||0,i=g.marginy||0;d.each(a.nodes(),function(b){j(a.node(b))}),d.each(a.edges(),function(b){var c=a.edge(b);d.has(c,"x")&&j(c)}),b-=h,e-=i,d.each(a.nodes(),function(c){var d=a.node(c);d.x-=b,d.y-=e}),d.each(a.edges(),function(c){var f=a.edge(c);d.each(f.points,function(a){a.x-=b,a.y-=e}),d.has(f,"x")&&(f.x-=b),d.has(f,"y")&&(f.y-=e)}),g.width=c-b+h,g.height=f-e+i}function I(a){d.each(a.edges(),function(b){var f,g,c=a.edge(b),d=a.node(b.v),e=a.node(b.w);c.points?(f=c.points[0],g=c.points[c.points.length-1]):(c.points=[],f=e,g=d),c.points.unshift(p.intersectRect(d,f)),c.points.push(p.intersectRect(e,g))})}function J(a){d.each(a.edges(),function(b){var c=a.edge(b);if(d.has(c,"x"))switch("l"!==c.labelpos&&"r"!==c.labelpos||(c.width-=c.labeloffset),c.labelpos){case"l":c.x-=c.width/2+c.labeloffset;break;case"r":c.x+=c.width/2+c.labeloffset}})}function K(a){d.each(a.edges(),function(b){var c=a.edge(b);c.reversed&&c.points.reverse()})}function L(a){d.each(a.nodes(),function(b){if(a.children(b).length){var c=a.node(b),e=a.node(c.borderTop),f=a.node(c.borderBottom),g=a.node(d.last(c.borderLeft)),h=a.node(d.last(c.borderRight));c.width=Math.abs(h.x-g.x),c.height=Math.abs(f.y-e.y),c.x=g.x+c.width/2,c.y=e.y+c.height/2}}),d.each(a.nodes(),function(b){"border"===a.node(b).dummy&&a.removeNode(b)})}function M(a){d.each(a.edges(),function(b){if(b.v===b.w){var c=a.node(b.v);c.selfEdges||(c.selfEdges=[]),c.selfEdges.push({e:b,label:a.edge(b)}),a.removeEdge(b)}})}function N(a){var b=p.buildLayerMatrix(a);d.each(b,function(b){var c=0;d.each(b,function(b,e){var f=a.node(b);f.order=e+c,d.each(f.selfEdges,function(b){p.addDummyNode(a,"selfedge",{width:b.label.width,height:b.label.height,rank:f.rank,order:e+ ++c,e:b.e,label:b.label},"_se")}),delete f.selfEdges})})}function O(a){d.each(a.nodes(),function(b){var c=a.node(b);if("selfedge"===c.dummy){var d=a.node(c.e.v),e=d.x+d.width/2,f=d.y,g=c.x-e,h=d.height/2;a.setEdge(c.e,c.label),a.removeNode(b),c.label.points=[{x:e+2*g/3,y:f-h},{x:e+5*g/6,y:f-h},{x:e+g,y:f},{x:e+5*g/6,y:f+h},{x:e+2*g/3,y:f+h}],c.label.x=c.x,c.label.y=c.y}})}function P(a,b){return d.mapValues(d.pick(a,b),Number)}function Q(a){var b={};return d.each(a,function(a,c){b[c.toLowerCase()]=a}),b}var d=a("./lodash"),e=a("./acyclic"),f=a("./normalize"),g=a("./rank"),h=a("./util").normalizeRanks,i=a("./parent-dummy-chains"),j=a("./util").removeEmptyRanks,k=a("./nesting-graph"),l=a("./add-border-segments"),m=a("./coordinate-system"),n=a("./order"),o=a("./position"),p=a("./util"),q=a("./graphlib").Graph;b.exports=r;var u=["nodesep","edgesep","ranksep","marginx","marginy"],v={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},w=["acyclicer","ranker","rankdir","align"],x=["width","height"],y={width:0,height:0},z=["minlen","weight","width","height","labeloffset"],A={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},B=["labelpos"]},{"./acyclic":2,"./add-border-segments":3,"./coordinate-system":4,"./graphlib":7,"./lodash":10,"./nesting-graph":11,"./normalize":12,"./order":17,"./parent-dummy-chains":22,"./position":24,"./rank":26,"./util":29}],10:[function(a,b,c){var d;if("function"==typeof a)try{d=a("lodash")}catch(a){}d||(d=window._),b.exports=d},{lodash:51}],11:[function(a,b,c){function f(a){var b=e.addDummyNode(a,"root",{},"_root"),c=h(a),f=d.max(c)-1,j=2*f+1;a.graph().nestingRoot=b,d.each(a.edges(),function(b){a.edge(b).minlen*=j});var k=i(a)+1;d.each(a.children(),function(d){g(a,b,j,k,f,c,d)}),a.graph().nodeRankFactor=j}function g(a,b,c,f,h,i,j){var k=a.children(j);if(!k.length)return void(j!==b&&a.setEdge(b,j,{weight:0,minlen:c}));var l=e.addBorderNode(a,"_bt"),m=e.addBorderNode(a,"_bb"),n=a.node(j);a.setParent(l,j),n.borderTop=l,a.setParent(m,j),n.borderBottom=m,d.each(k,function(d){g(a,b,c,f,h,i,d);var e=a.node(d),k=e.borderTop?e.borderTop:d,n=e.borderBottom?e.borderBottom:d,o=e.borderTop?f:2*f,p=k!==n?1:h-i[j]+1;a.setEdge(l,k,{weight:o,minlen:p,nestingEdge:!0}),a.setEdge(n,m,{weight:o,minlen:p,nestingEdge:!0})}),a.parent(j)||a.setEdge(b,l,{weight:0,minlen:h+i[j]})}function h(a){function c(e,f){var g=a.children(e);g&&g.length&&d.each(g,function(a){c(a,f+1)}),b[e]=f}var b={};return d.each(a.children(),function(a){c(a,1)}),b}function i(a){return d.reduce(a.edges(),function(b,c){return b+a.edge(c).weight},0)}function j(a){var b=a.graph();a.removeNode(b.nestingRoot),delete b.nestingRoot,d.each(a.edges(),function(b){var c=a.edge(b);c.nestingEdge&&a.removeEdge(b)})}var d=a("./lodash"),e=a("./util");b.exports={run:f,cleanup:j}},{"./lodash":10,"./util":29}],12:[function(a,b,c){"use strict";function f(a){a.graph().dummyChains=[],d.each(a.edges(),function(b){g(a,b)})}function g(a,b){var c=b.v,d=a.node(c).rank,f=b.w,g=a.node(f).rank,h=b.name,i=a.edge(b),j=i.labelRank;if(g!==d+1){a.removeEdge(b);var k,l,m;for(m=0,++d;d<g;++m,++d)i.points=[],l={width:0,height:0,edgeLabel:i,edgeObj:b,rank:d},k=e.addDummyNode(a,"edge",l,"_d"),d===j&&(l.width=i.width,l.height=i.height,l.dummy="edge-label",l.labelpos=i.labelpos),a.setEdge(c,k,{weight:i.weight},h),0===m&&a.graph().dummyChains.push(k),c=k;a.setEdge(c,f,{weight:i.weight},h)}}function h(a){d.each(a.graph().dummyChains,function(b){var e,c=a.node(b),d=c.edgeLabel;for(a.setEdge(c.edgeObj,d);c.dummy;)e=a.successors(b)[0],a.removeNode(b),d.points.push({x:c.x,y:c.y}),"edge-label"===c.dummy&&(d.x=c.x,d.y=c.y,d.width=c.width,d.height=c.height),b=e,c=a.node(b)})}var d=a("./lodash"),e=a("./util");b.exports={run:f,undo:h}},{"./lodash":10,"./util":29}],13:[function(a,b,c){function e(a,b,c){var f,e={};d.each(c,function(c){for(var g,h,d=a.parent(c);d;){if(g=a.parent(d),g?(h=e[g],e[g]=d):(h=f,f=d),h&&h!==d)return void b.setEdge(h,d);d=g}})}var d=a("../lodash");b.exports=e},{"../lodash":10}],14:[function(a,b,c){function e(a,b){return d.map(b,function(b){var c=a.inEdges(b);if(c.length){var e=d.reduce(c,function(b,c){var d=a.edge(c),e=a.node(c.v);return{sum:b.sum+d.weight*e.order,weight:b.weight+d.weight}},{sum:0,weight:0});return{v:b,barycenter:e.sum/e.weight,weight:e.weight}}return{v:b}})}var d=a("../lodash");b.exports=e},{"../lodash":10}],15:[function(a,b,c){function f(a,b,c){var f=g(a),h=new e({compound:!0}).setGraph({root:f}).setDefaultNodeLabel(function(b){return a.node(b)});return d.each(a.nodes(),function(e){var g=a.node(e),i=a.parent(e);(g.rank===b||g.minRank<=b&&b<=g.maxRank)&&(h.setNode(e),h.setParent(e,i||f),d.each(a[c](e),function(b){var c=b.v===e?b.w:b.v,f=h.edge(c,e),g=d.isUndefined(f)?0:f.weight;h.setEdge(c,e,{weight:a.edge(b).weight+g})}),d.has(g,"minRank")&&h.setNode(e,{borderLeft:g.borderLeft[b],borderRight:g.borderRight[b]}))}),h}function g(a){for(var b;a.hasNode(b=d.uniqueId("_root")););return b}var d=a("../lodash"),e=a("../graphlib").Graph;b.exports=f},{"../graphlib":7,"../lodash":10}],16:[function(a,b,c){"use strict";function e(a,b){for(var c=0,d=1;d<b.length;++d)c+=f(a,b[d-1],b[d]);return c}function f(a,b,c){for(var e=d.zipObject(c,d.map(c,function(a,b){return b})),f=d.flatten(d.map(b,function(b){return d.chain(a.outEdges(b)).map(function(b){return{pos:e[b.w],weight:a.edge(b).weight}}).sortBy("pos").value()}),!0),g=1;g<c.length;)g<<=1;var h=2*g-1;g-=1;var i=d.map(new Array(h),function(){return 0}),j=0;return d.each(f.forEach(function(a){var b=a.pos+g;i[b]+=a.weight;for(var c=0;b>0;)b%2&&(c+=i[b+1]),b=b-1>>1,i[b]+=a.weight;j+=a.weight*c})),j}var d=a("../lodash");b.exports=e},{"../lodash":10}],17:[function(a,b,c){"use strict";function l(a){var b=k.maxRank(a),c=m(a,d.range(1,b+1),"inEdges"),g=m(a,d.range(b-1,-1,-1),"outEdges"),h=e(a);o(a,h);for(var j,i=Number.POSITIVE_INFINITY,l=0,p=0;p<4;++l,++p){n(l%2?c:g,l%4>=2),h=k.buildLayerMatrix(a);var q=f(a,h);q<i&&(p=0,j=d.cloneDeep(h),i=q)}o(a,j)}function m(a,b,c){return d.map(b,function(b){return h(a,b,c)})}function n(a,b){var c=new j;d.each(a,function(a){var e=a.graph().root,f=g(a,e,c,b);d.each(f.vs,function(b,c){a.node(b).order=c}),i(a,c,f.vs)})}function o(a,b){d.each(b,function(b){d.each(b,function(b,c){a.node(b).order=c})})}var d=a("../lodash"),e=a("./init-order"),f=a("./cross-count"),g=a("./sort-subgraph"),h=a("./build-layer-graph"),i=a("./add-subgraph-constraints"),j=a("../graphlib").Graph,k=a("../util");b.exports=l},{"../graphlib":7,"../lodash":10,"../util":29,"./add-subgraph-constraints":13,"./build-layer-graph":15,"./cross-count":16,"./init-order":18,"./sort-subgraph":20}],18:[function(a,b,c){"use strict";function e(a){function g(c){if(!d.has(b,c)){b[c]=!0;var e=a.node(c);f[e.rank].push(c),d.each(a.successors(c),g)}}var b={},c=d.filter(a.nodes(),function(b){return!a.children(b).length}),e=d.max(d.map(c,function(b){return a.node(b).rank})),f=d.map(d.range(e+1),function(){return[]}),h=d.sortBy(c,function(b){return a.node(b).rank});return d.each(h,g),f}var d=a("../lodash");b.exports=e},{"../lodash":10}],19:[function(a,b,c){"use strict";function e(a,b){var c={};d.each(a,function(a,b){var e=c[a.v]={indegree:0,in:[],out:[],vs:[a.v],i:b};d.isUndefined(a.barycenter)||(e.barycenter=a.barycenter,e.weight=a.weight)}),d.each(b.edges(),function(a){var b=c[a.v],e=c[a.w];d.isUndefined(b)||d.isUndefined(e)||(e.indegree++,b.out.push(c[a.w]))});var e=d.filter(c,function(a){return!a.indegree});return f(e)}function f(a){function c(a){return function(b){b.merged||(d.isUndefined(b.barycenter)||d.isUndefined(a.barycenter)||b.barycenter>=a.barycenter)&&g(a,b)}}function e(b){return function(c){c.in.push(b),0===--c.indegree&&a.push(c)}}for(var b=[];a.length;){var f=a.pop();b.push(f),d.each(f.in.reverse(),c(f)),d.each(f.out,e(f))}return d.chain(b).filter(function(a){return!a.merged}).map(function(a){return d.pick(a,["vs","i","barycenter","weight"])}).value()}function g(a,b){var c=0,d=0;a.weight&&(c+=a.barycenter*a.weight,d+=a.weight),b.weight&&(c+=b.barycenter*b.weight,d+=b.weight),a.vs=b.vs.concat(a.vs),a.barycenter=c/d,a.weight=d,a.i=Math.min(b.i,a.i),b.merged=!0}var d=a("../lodash");b.exports=e},{"../lodash":10}],20:[function(a,b,c){function h(a,b,c,k){var l=a.children(b),m=a.node(b),n=m?m.borderLeft:void 0,o=m?m.borderRight:void 0,p={};n&&(l=d.filter(l,function(a){return a!==n&&a!==o}));var q=e(a,l);d.each(q,function(b){if(a.children(b.v).length){var e=h(a,b.v,c,k);p[b.v]=e,d.has(e,"barycenter")&&j(b,e)}});var r=f(q,c);i(r,p);var s=g(r,k);if(n&&(s.vs=d.flatten([n,s.vs,o],!0),a.predecessors(n).length)){var t=a.node(a.predecessors(n)[0]),u=a.node(a.predecessors(o)[0]);d.has(s,"barycenter")||(s.barycenter=0,s.weight=0),s.barycenter=(s.barycenter*s.weight+t.order+u.order)/(s.weight+2),s.weight+=2}return s}function i(a,b){d.each(a,function(a){a.vs=d.flatten(a.vs.map(function(a){return b[a]?b[a].vs:a}),!0)})}function j(a,b){d.isUndefined(a.barycenter)?(a.barycenter=b.barycenter,a.weight=b.weight):(a.barycenter=(a.barycenter*a.weight+b.barycenter*b.weight)/(a.weight+b.weight),a.weight+=b.weight)}var d=a("../lodash"),e=a("./barycenter"),f=a("./resolve-conflicts"),g=a("./sort");b.exports=h},{"../lodash":10,"./barycenter":14,"./resolve-conflicts":19,"./sort":21}],21:[function(a,b,c){function f(a,b){var c=e.partition(a,function(a){return d.has(a,"barycenter")}),f=c.lhs,i=d.sortBy(c.rhs,function(a){return-a.i}),j=[],k=0,l=0,m=0;f.sort(h(!!b)),m=g(j,i,m),d.each(f,function(a){m+=a.vs.length,j.push(a.vs),k+=a.barycenter*a.weight,l+=a.weight,m=g(j,i,m)});var n={vs:d.flatten(j,!0)};return l&&(n.barycenter=k/l,n.weight=l),n}function g(a,b,c){for(var e;b.length&&(e=d.last(b)).i<=c;)b.pop(),a.push(e.vs),c++;return c}function h(a){return function(b,c){return b.barycenter<c.barycenter?-1:b.barycenter>c.barycenter?1:a?c.i-b.i:b.i-c.i}}var d=a("../lodash"),e=a("../util");b.exports=f},{"../lodash":10,"../util":29}],22:[function(a,b,c){function e(a){var b=g(a);d.each(a.graph().dummyChains,function(c){for(var d=a.node(c),e=d.edgeObj,g=f(a,b,e.v,e.w),h=g.path,i=g.lca,j=0,k=h[j],l=!0;c!==e.w;){if(d=a.node(c),l){for(;(k=h[j])!==i&&a.node(k).maxRank<d.rank;)j++;k===i&&(l=!1)}if(!l){for(;j<h.length-1&&a.node(k=h[j+1]).minRank<=d.rank;)j++;k=h[j]}a.setParent(c,k),c=a.successors(c)[0]}})}function f(a,b,c,d){var i,j,e=[],f=[],g=Math.min(b[c].low,b[d].low),h=Math.max(b[c].lim,b[d].lim);i=c;do i=a.parent(i),e.push(i);while(i&&(b[i].low>g||h>b[i].lim));for(j=i,i=d;(i=a.parent(i))!==j;)f.push(i);return{path:e.concat(f.reverse()),lca:j}}function g(a){function e(f){var g=c;d.each(a.children(f),e),b[f]={low:g,lim:c++}}var b={},c=0;return d.each(a.children(),e),b}var d=a("./lodash");b.exports=e},{"./lodash":10}],23:[function(a,b,c){"use strict";function g(a,b){function e(b,e){var f=0,g=0,h=b.length,k=d.last(e);return d.each(e,function(b,l){var m=i(a,b),n=m?a.node(m).order:h;(m||b===k)&&(d.each(e.slice(g,l+1),function(b){d.each(a.predecessors(b),function(d){var e=a.node(d),g=e.order;!(g<f||n<g)||e.dummy&&a.node(b).dummy||j(c,d,b)})}),g=l+1,f=n)}),e}var c={};return d.reduce(b,e),c}function h(a,b){function e(b,e,f,g,h){var i;d.each(d.range(e,f),function(e){i=b[e],a.node(i).dummy&&d.each(a.predecessors(i),function(b){var d=a.node(b);d.dummy&&(d.order<g||d.order>h)&&j(c,b,i)})})}function f(b,c){var g,f=-1,h=0;return d.each(c,function(d,i){if("border"===a.node(d).dummy){var j=a.predecessors(d);j.length&&(g=a.node(j[0]).order,e(c,h,i,f,g),h=i,f=g)}e(c,h,c.length,g,b.length)}),c}var c={};return d.reduce(b,f),c}function i(a,b){if(a.node(b).dummy)return d.find(a.predecessors(b),function(b){return a.node(b).dummy})}function j(a,b,c){if(b>c){var d=b;b=c,c=d}var e=a[b];e||(a[b]=e={}),e[c]=!0}function k(a,b,c){if(b>c){var e=b;b=c,c=e}return d.has(a[b],c)}function l(a,b,c,e){var f={},g={},h={};return d.each(b,function(a){d.each(a,function(a,b){f[a]=a,g[a]=a,h[a]=b})}),d.each(b,function(a){var b=-1;d.each(a,function(a){var i=e(a);if(i.length){i=d.sortBy(i,function(a){return h[a]});for(var j=(i.length-1)/2,l=Math.floor(j),m=Math.ceil(j);l<=m;++l){var n=i[l];g[a]===a&&b<h[n]&&!k(c,a,n)&&(g[n]=a,g[a]=f[a]=f[n],b=h[n])}}})}),{root:f,align:g}}function m(a,b,c,e,f){function j(a){d.has(i,a)||(i[a]=!0,g[a]=d.reduce(h.inEdges(a),function(a,b){return j(b.v),Math.max(a,g[b.v]+h.edge(b))},0))}function l(b){if(2!==i[b]){i[b]++;var c=a.node(b),e=d.reduce(h.outEdges(b),function(a,b){return l(b.w),Math.min(a,g[b.w]-h.edge(b))},Number.POSITIVE_INFINITY);e!==Number.POSITIVE_INFINITY&&c.borderType!==k&&(g[b]=Math.max(g[b],e))}}var g={},h=n(a,b,c,f),i={};d.each(h.nodes(),j);var k=f?"borderLeft":"borderRight";return d.each(h.nodes(),l),d.each(e,function(a){g[a]=g[c[a]]}),g}function n(a,b,c,f){var g=new e,h=a.graph(),i=s(h.nodesep,h.edgesep,f);return d.each(b,function(b){var e;d.each(b,function(b){var d=c[b];if(g.setNode(d),e){var f=c[e],h=g.edge(f,d);g.setEdge(f,d,Math.max(i(a,b,e),h||0))}e=b})}),g}function o(a,b){return d.min(b,function(b){var c=d.min(b,function(b,c){return b-t(a,c)/2}),e=d.max(b,function(b,c){return b+t(a,c)/2});return e-c})}function p(a,b){var c=d.min(b),e=d.max(b);d.each(["u","d"],function(f){d.each(["l","r"],function(g){var j,h=f+g,i=a[h];i!==b&&(j="l"===g?c-d.min(i):e-d.max(i),j&&(a[h]=d.mapValues(i,function(a){return a+j})))})})}function q(a,b){return d.mapValues(a.ul,function(c,e){if(b)return a[b.toLowerCase()][e];var f=d.sortBy(d.pluck(a,e));return(f[1]+f[2])/2})}function r(a){var i,b=f.buildLayerMatrix(a),c=d.merge(g(a,b),h(a,b)),e={};d.each(["u","d"],function(f){i="u"===f?b:d.values(b).reverse(),d.each(["l","r"],function(b){
"r"===b&&(i=d.map(i,function(a){return d.values(a).reverse()}));var g=d.bind("u"===f?a.predecessors:a.successors,a),h=l(a,i,c,g),j=m(a,i,h.root,h.align,"r"===b);"r"===b&&(j=d.mapValues(j,function(a){return-a})),e[f+b]=j})});var j=o(a,e);return p(e,j),q(e,a.graph().align)}function s(a,b,c){return function(e,f,g){var k,h=e.node(f),i=e.node(g),j=0;if(j+=h.width/2,d.has(h,"labelpos"))switch(h.labelpos.toLowerCase()){case"l":k=-h.width/2;break;case"r":k=h.width/2}if(k&&(j+=c?k:-k),k=0,j+=(h.dummy?b:a)/2,j+=(i.dummy?b:a)/2,j+=i.width/2,d.has(i,"labelpos"))switch(i.labelpos.toLowerCase()){case"l":k=i.width/2;break;case"r":k=-i.width/2}return k&&(j+=c?k:-k),k=0,j}}function t(a,b){return a.node(b).width}var d=a("../lodash"),e=a("../graphlib").Graph,f=a("../util");b.exports={positionX:r,findType1Conflicts:g,findType2Conflicts:h,addConflict:j,hasConflict:k,verticalAlignment:l,horizontalCompaction:m,alignCoordinates:p,findSmallestWidthAlignment:o,balance:q}},{"../graphlib":7,"../lodash":10,"../util":29}],24:[function(a,b,c){"use strict";function g(a){a=e.asNonCompoundGraph(a),h(a),d.each(f(a),function(b,c){a.node(c).x=b})}function h(a){var b=e.buildLayerMatrix(a),c=a.graph().ranksep,f=0;d.each(b,function(b){var e=d.max(d.map(b,function(b){return a.node(b).height}));d.each(b,function(b){a.node(b).y=f+e/2}),f+=e+c})}var d=a("../lodash"),e=a("../util"),f=a("./bk").positionX;b.exports=g},{"../lodash":10,"../util":29,"./bk":23}],25:[function(a,b,c){"use strict";function g(a){var b=new e({directed:!1}),c=a.nodes()[0],d=a.nodeCount();b.setNode(c,{});for(var g,k;h(b,a)<d;)g=i(b,a),k=b.hasNode(g.v)?f(a,g):-f(a,g),j(b,a,k);return b}function h(a,b){function c(e){d.each(b.nodeEdges(e),function(d){var g=d.v,h=e===g?d.w:g;a.hasNode(h)||f(b,d)||(a.setNode(h,{}),a.setEdge(e,h,{}),c(h))})}return d.each(a.nodes(),c),a.nodeCount()}function i(a,b){return d.min(b.edges(),function(c){if(a.hasNode(c.v)!==a.hasNode(c.w))return f(b,c)})}function j(a,b,c){d.each(a.nodes(),function(a){b.node(a).rank+=c})}var d=a("../lodash"),e=a("../graphlib").Graph,f=a("./util").slack;b.exports=g},{"../graphlib":7,"../lodash":10,"./util":28}],26:[function(a,b,c){"use strict";function h(a){switch(a.graph().ranker){case"network-simplex":k(a);break;case"tight-tree":j(a);break;case"longest-path":i(a);break;default:k(a)}}function j(a){e(a),f(a)}function k(a){g(a)}var d=a("./util"),e=d.longestPath,f=a("./feasible-tree"),g=a("./network-simplex");b.exports=h;var i=e},{"./feasible-tree":25,"./network-simplex":27,"./util":28}],27:[function(a,b,c){"use strict";function k(a){a=j(a),g(a);var b=e(a);o(b),l(b,a);for(var c,d;c=q(b);)d=r(b,a,c),s(b,a,c,d)}function l(a,b){var c=i(a,a.nodes());c=c.slice(0,c.length-1),d.each(c,function(c){m(a,b,c)})}function m(a,b,c){var d=a.node(c),e=d.parent;a.edge(c,e).cutvalue=n(a,b,c)}function n(a,b,c){var e=a.node(c),f=e.parent,g=!0,h=b.edge(c,f),i=0;return h||(g=!1,h=b.edge(f,c)),i=h.weight,d.each(b.nodeEdges(c),function(d){var e=d.v===c,h=e?d.w:d.v;if(h!==f){var j=e===g,k=b.edge(d).weight;if(i+=j?k:-k,u(a,c,h)){var l=a.edge(c,h).cutvalue;i+=j?-l:l}}}),i}function o(a,b){arguments.length<2&&(b=a.nodes()[0]),p(a,{},1,b)}function p(a,b,c,e,f){var g=c,h=a.node(e);return b[e]=!0,d.each(a.neighbors(e),function(f){d.has(b,f)||(c=p(a,b,c,f,e))}),h.low=g,h.lim=c++,f?h.parent=f:delete h.parent,c}function q(a){return d.find(a.edges(),function(b){return a.edge(b).cutvalue<0})}function r(a,b,c){var e=c.v,g=c.w;b.hasEdge(e,g)||(e=c.w,g=c.v);var h=a.node(e),i=a.node(g),j=h,k=!1;h.lim>i.lim&&(j=i,k=!0);var l=d.filter(b.edges(),function(b){return k===v(a,a.node(b.v),j)&&k!==v(a,a.node(b.w),j)});return d.min(l,function(a){return f(b,a)})}function s(a,b,c,d){var e=c.v,f=c.w;a.removeEdge(e,f),a.setEdge(d.v,d.w,{}),o(a),l(a,b),t(a,b)}function t(a,b){var c=d.find(a.nodes(),function(a){return!b.node(a).parent}),e=h(a,c);e=e.slice(1),d.each(e,function(c){var d=a.node(c).parent,e=b.edge(c,d),f=!1;e||(e=b.edge(d,c),f=!0),b.node(c).rank=b.node(d).rank+(f?e.minlen:-e.minlen)})}function u(a,b,c){return a.hasEdge(b,c)}function v(a,b,c){return c.low<=b.lim&&b.lim<=c.lim}var d=a("../lodash"),e=a("./feasible-tree"),f=a("./util").slack,g=a("./util").longestPath,h=a("../graphlib").alg.preorder,i=a("../graphlib").alg.postorder,j=a("../util").simplify;b.exports=k,k.initLowLimValues=o,k.initCutValues=l,k.calcCutValue=n,k.leaveEdge=q,k.enterEdge=r,k.exchangeEdges=s},{"../graphlib":7,"../lodash":10,"../util":29,"./feasible-tree":25,"./util":28}],28:[function(a,b,c){"use strict";function e(a){function c(e){var f=a.node(e);if(d.has(b,e))return f.rank;b[e]=!0;var g=d.min(d.map(a.outEdges(e),function(b){return c(b.w)-a.edge(b).minlen}));return g===Number.POSITIVE_INFINITY&&(g=0),f.rank=g}var b={};d.each(a.sources(),c)}function f(a,b){return a.node(b.w).rank-a.node(b.v).rank-a.edge(b).minlen}var d=a("../lodash");b.exports={longestPath:e,slack:f}},{"../lodash":10}],29:[function(a,b,c){"use strict";function f(a,b,c,e){var f;do f=d.uniqueId(e);while(a.hasNode(f));return c.dummy=b,a.setNode(f,c),f}function g(a){var b=(new e).setGraph(a.graph());return d.each(a.nodes(),function(c){b.setNode(c,a.node(c))}),d.each(a.edges(),function(c){var d=b.edge(c.v,c.w)||{weight:0,minlen:1},e=a.edge(c);b.setEdge(c.v,c.w,{weight:d.weight+e.weight,minlen:Math.max(d.minlen,e.minlen)})}),b}function h(a){var b=new e({multigraph:a.isMultigraph()}).setGraph(a.graph());return d.each(a.nodes(),function(c){a.children(c).length||b.setNode(c,a.node(c))}),d.each(a.edges(),function(c){b.setEdge(c,a.edge(c))}),b}function i(a){var b=d.map(a.nodes(),function(b){var c={};return d.each(a.outEdges(b),function(b){c[b.w]=(c[b.w]||0)+a.edge(b).weight}),c});return d.zipObject(a.nodes(),b)}function j(a){var b=d.map(a.nodes(),function(b){var c={};return d.each(a.inEdges(b),function(b){c[b.v]=(c[b.v]||0)+a.edge(b).weight}),c});return d.zipObject(a.nodes(),b)}function k(a,b){var c=a.x,d=a.y,e=b.x-c,f=b.y-d,g=a.width/2,h=a.height/2;if(!e&&!f)throw new Error("Not possible to find intersection inside of the rectangle");var i,j;return Math.abs(f)*g>Math.abs(e)*h?(f<0&&(h=-h),i=h*e/f,j=h):(e<0&&(g=-g),i=g,j=g*f/e),{x:c+i,y:d+j}}function l(a){var b=d.map(d.range(p(a)+1),function(){return[]});return d.each(a.nodes(),function(c){var e=a.node(c),f=e.rank;d.isUndefined(f)||(b[f][e.order]=c)}),b}function m(a){var b=d.min(d.map(a.nodes(),function(b){return a.node(b).rank}));d.each(a.nodes(),function(c){var e=a.node(c);d.has(e,"rank")&&(e.rank-=b)})}function n(a){var b=d.min(d.map(a.nodes(),function(b){return a.node(b).rank})),c=[];d.each(a.nodes(),function(d){var e=a.node(d).rank-b;c[e]||(c[e]=[]),c[e].push(d)});var e=0,f=a.graph().nodeRankFactor;d.each(c,function(b,c){d.isUndefined(b)&&c%f!==0?--e:e&&d.each(b,function(b){a.node(b).rank+=e})})}function o(a,b,c,d){var e={width:0,height:0};return arguments.length>=4&&(e.rank=c,e.order=d),f(a,"border",e,b)}function p(a){return d.max(d.map(a.nodes(),function(b){var c=a.node(b).rank;if(!d.isUndefined(c))return c}))}function q(a,b){var c={lhs:[],rhs:[]};return d.each(a,function(a){b(a)?c.lhs.push(a):c.rhs.push(a)}),c}function r(a,b){var c=d.now();try{return b()}finally{console.log(a+" time: "+(d.now()-c)+"ms")}}function s(a,b){return b()}var d=a("./lodash"),e=a("./graphlib").Graph;b.exports={addDummyNode:f,simplify:g,asNonCompoundGraph:h,successorWeights:i,predecessorWeights:j,intersectRect:k,buildLayerMatrix:l,normalizeRanks:m,removeEmptyRanks:n,addBorderNode:o,maxRank:p,partition:q,time:r,notime:s}},{"./graphlib":7,"./lodash":10}],30:[function(a,b,c){b.exports="0.7.4"},{}],31:[function(a,b,c){var d=a("./lib");b.exports={Graph:d.Graph,json:a("./lib/json"),alg:a("./lib/alg"),version:d.version}},{"./lib":47,"./lib/alg":38,"./lib/json":48}],32:[function(a,b,c){function e(a){function f(c){d.has(b,c)||(b[c]=!0,e.push(c),d.each(a.successors(c),f),d.each(a.predecessors(c),f))}var e,b={},c=[];return d.each(a.nodes(),function(a){e=[],f(a),e.length&&c.push(e)}),c}var d=a("../lodash");b.exports=e},{"../lodash":49}],33:[function(a,b,c){function e(a,b,c){d.isArray(b)||(b=[b]);var e=[],g={};return d.each(b,function(b){if(!a.hasNode(b))throw new Error("Graph does not have node: "+b);f(a,b,"post"===c,g,e)}),e}function f(a,b,c,e,g){d.has(e,b)||(e[b]=!0,c||g.push(b),d.each(a.neighbors(b),function(b){f(a,b,c,e,g)}),c&&g.push(b))}var d=a("../lodash");b.exports=e},{"../lodash":49}],34:[function(a,b,c){function f(a,b,c){return e.transform(a.nodes(),function(e,f){e[f]=d(a,f,b,c)},{})}var d=a("./dijkstra"),e=a("../lodash");b.exports=f},{"../lodash":49,"./dijkstra":35}],35:[function(a,b,c){function g(a,b,c,d){return h(a,String(b),c||f,d||function(b){return a.outEdges(b)})}function h(a,b,c,d){var h,i,f={},g=new e,j=function(a){var b=a.v!==h?a.v:a.w,d=f[b],e=c(a),j=i.distance+e;if(e<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+a+" Weight: "+e);j<d.distance&&(d.distance=j,d.predecessor=h,g.decrease(b,j))};for(a.nodes().forEach(function(a){var c=a===b?0:Number.POSITIVE_INFINITY;f[a]={distance:c},g.add(a,c)});g.size()>0&&(h=g.removeMin(),i=f[h],i.distance!==Number.POSITIVE_INFINITY);)d(h).forEach(j);return f}var d=a("../lodash"),e=a("../data/priority-queue");b.exports=g;var f=d.constant(1)},{"../data/priority-queue":45,"../lodash":49}],36:[function(a,b,c){function f(a){return d.filter(e(a),function(b){return b.length>1||1===b.length&&a.hasEdge(b[0],b[0])})}var d=a("../lodash"),e=a("./tarjan");b.exports=f},{"../lodash":49,"./tarjan":43}],37:[function(a,b,c){function f(a,b,c){return g(a,b||e,c||function(b){return a.outEdges(b)})}function g(a,b,c){var d={},e=a.nodes();return e.forEach(function(a){d[a]={},d[a][a]={distance:0},e.forEach(function(b){a!==b&&(d[a][b]={distance:Number.POSITIVE_INFINITY})}),c(a).forEach(function(c){var e=c.v===a?c.w:c.v,f=b(c);d[a][e]={distance:f,predecessor:a}})}),e.forEach(function(a){var b=d[a];e.forEach(function(c){var f=d[c];e.forEach(function(c){var d=f[a],e=b[c],g=f[c],h=d.distance+e.distance;h<g.distance&&(g.distance=h,g.predecessor=e.predecessor)})})}),d}var d=a("../lodash");b.exports=f;var e=d.constant(1)},{"../lodash":49}],38:[function(a,b,c){b.exports={components:a("./components"),dijkstra:a("./dijkstra"),dijkstraAll:a("./dijkstra-all"),findCycles:a("./find-cycles"),floydWarshall:a("./floyd-warshall"),isAcyclic:a("./is-acyclic"),postorder:a("./postorder"),preorder:a("./preorder"),prim:a("./prim"),tarjan:a("./tarjan"),topsort:a("./topsort")}},{"./components":32,"./dijkstra":35,"./dijkstra-all":34,"./find-cycles":36,"./floyd-warshall":37,"./is-acyclic":39,"./postorder":40,"./preorder":41,"./prim":42,"./tarjan":43,"./topsort":44}],39:[function(a,b,c){function e(a){try{d(a)}catch(a){if(a instanceof d.CycleException)return!1;throw a}return!0}var d=a("./topsort");b.exports=e},{"./topsort":44}],40:[function(a,b,c){function e(a,b){return d(a,b,"post")}var d=a("./dfs");b.exports=e},{"./dfs":33}],41:[function(a,b,c){function e(a,b){return d(a,b,"pre")}var d=a("./dfs");b.exports=e},{"./dfs":33}],42:[function(a,b,c){function g(a,b){function j(a){var c=a.v===i?a.w:a.v,d=h.priority(c);if(void 0!==d){var e=b(a);e<d&&(g[c]=i,h.decrease(c,e))}}var i,c=new e,g={},h=new f;if(0===a.nodeCount())return c;d.each(a.nodes(),function(a){h.add(a,Number.POSITIVE_INFINITY),c.setNode(a)}),h.decrease(a.nodes()[0],0);for(var k=!1;h.size()>0;){if(i=h.removeMin(),d.has(g,i))c.setEdge(i,g[i]);else{if(k)throw new Error("Input graph is not connected: "+a);k=!0}a.nodeEdges(i).forEach(j)}return c}var d=a("../lodash"),e=a("../graph"),f=a("../data/priority-queue");b.exports=g},{"../data/priority-queue":45,"../graph":46,"../lodash":49}],43:[function(a,b,c){function e(a){function g(h){var i=e[h]={onStack:!0,lowlink:b,index:b++};if(c.push(h),a.successors(h).forEach(function(a){d.has(e,a)?e[a].onStack&&(i.lowlink=Math.min(i.lowlink,e[a].index)):(g(a),i.lowlink=Math.min(i.lowlink,e[a].lowlink))}),i.lowlink===i.index){var k,j=[];do k=c.pop(),e[k].onStack=!1,j.push(k);while(h!==k);f.push(j)}}var b=0,c=[],e={},f=[];return a.nodes().forEach(function(a){d.has(e,a)||g(a)}),f}var d=a("../lodash");b.exports=e},{"../lodash":49}],44:[function(a,b,c){function e(a){function g(h){if(d.has(c,h))throw new f;d.has(b,h)||(c[h]=!0,b[h]=!0,d.each(a.predecessors(h),g),delete c[h],e.push(h))}var b={},c={},e=[];if(d.each(a.sinks(),g),d.size(b)!==a.nodeCount())throw new f;return e}function f(){}var d=a("../lodash");b.exports=e,e.CycleException=f},{"../lodash":49}],45:[function(a,b,c){function e(){this._arr=[],this._keyIndices={}}var d=a("../lodash");b.exports=e,e.prototype.size=function(){return this._arr.length},e.prototype.keys=function(){return this._arr.map(function(a){return a.key})},e.prototype.has=function(a){return d.has(this._keyIndices,a)},e.prototype.priority=function(a){var b=this._keyIndices[a];if(void 0!==b)return this._arr[b].priority},e.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},e.prototype.add=function(a,b){var c=this._keyIndices;if(a=String(a),!d.has(c,a)){var e=this._arr,f=e.length;return c[a]=f,e.push({key:a,priority:b}),this._decrease(f),!0}return!1},e.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var a=this._arr.pop();return delete this._keyIndices[a.key],this._heapify(0),a.key},e.prototype.decrease=function(a,b){var c=this._keyIndices[a];if(b>this._arr[c].priority)throw new Error("New priority is greater than current priority. Key: "+a+" Old: "+this._arr[c].priority+" New: "+b);this._arr[c].priority=b,this._decrease(c)},e.prototype._heapify=function(a){var b=this._arr,c=2*a,d=c+1,e=a;c<b.length&&(e=b[c].priority<b[e].priority?c:e,d<b.length&&(e=b[d].priority<b[e].priority?d:e),e!==a&&(this._swap(a,e),this._heapify(e)))},e.prototype._decrease=function(a){for(var d,b=this._arr,c=b[a].priority;0!==a&&(d=a>>1,!(b[d].priority<c));)this._swap(a,d),a=d},e.prototype._swap=function(a,b){var c=this._arr,d=this._keyIndices,e=c[a],f=c[b];c[a]=f,c[b]=e,d[f.key]=a,d[e.key]=b}},{"../lodash":49}],46:[function(a,b,c){"use strict";function h(a){this._isDirected=!d.has(a,"directed")||a.directed,this._isMultigraph=!!d.has(a,"multigraph")&&a.multigraph,this._isCompound=!!d.has(a,"compound")&&a.compound,this._label=void 0,this._defaultNodeLabelFn=d.constant(void 0),this._defaultEdgeLabelFn=d.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[f]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function i(a,b){d.has(a,b)?a[b]++:a[b]=1}function j(a,b){--a[b]||delete a[b]}function k(a,b,c,f){if(!a&&b>c){var h=b;b=c,c=h}return b+g+c+g+(d.isUndefined(f)?e:f)}function l(a,b,c,d){if(!a&&b>c){var e=b;b=c,c=e}var f={v:b,w:c};return d&&(f.name=d),f}function m(a,b){return k(a,b.v,b.w,b.name)}var d=a("./lodash");b.exports=h;var e="\0",f="\0",g="";h.prototype._nodeCount=0,h.prototype._edgeCount=0,h.prototype.isDirected=function(){return this._isDirected},h.prototype.isMultigraph=function(){return this._isMultigraph},h.prototype.isCompound=function(){return this._isCompound},h.prototype.setGraph=function(a){return this._label=a,this},h.prototype.graph=function(){return this._label},h.prototype.setDefaultNodeLabel=function(a){return d.isFunction(a)||(a=d.constant(a)),this._defaultNodeLabelFn=a,this},h.prototype.nodeCount=function(){return this._nodeCount},h.prototype.nodes=function(){return d.keys(this._nodes)},h.prototype.sources=function(){return d.filter(this.nodes(),function(a){return d.isEmpty(this._in[a])},this)},h.prototype.sinks=function(){return d.filter(this.nodes(),function(a){return d.isEmpty(this._out[a])},this)},h.prototype.setNodes=function(a,b){var c=arguments;return d.each(a,function(a){c.length>1?this.setNode(a,b):this.setNode(a)},this),this},h.prototype.setNode=function(a,b){return d.has(this._nodes,a)?(arguments.length>1&&(this._nodes[a]=b),this):(this._nodes[a]=arguments.length>1?b:this._defaultNodeLabelFn(a),this._isCompound&&(this._parent[a]=f,this._children[a]={},this._children[f][a]=!0),this._in[a]={},this._preds[a]={},this._out[a]={},this._sucs[a]={},++this._nodeCount,this)},h.prototype.node=function(a){return this._nodes[a]},h.prototype.hasNode=function(a){return d.has(this._nodes,a)},h.prototype.removeNode=function(a){var b=this;if(d.has(this._nodes,a)){var c=function(a){b.removeEdge(b._edgeObjs[a])};delete this._nodes[a],this._isCompound&&(this._removeFromParentsChildList(a),delete this._parent[a],d.each(this.children(a),function(a){this.setParent(a)},this),delete this._children[a]),d.each(d.keys(this._in[a]),c),delete this._in[a],delete this._preds[a],d.each(d.keys(this._out[a]),c),delete this._out[a],delete this._sucs[a],--this._nodeCount}return this},h.prototype.setParent=function(a,b){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(d.isUndefined(b))b=f;else{b+="";for(var c=b;!d.isUndefined(c);c=this.parent(c))if(c===a)throw new Error("Setting "+b+" as parent of "+a+" would create create a cycle");this.setNode(b)}return this.setNode(a),this._removeFromParentsChildList(a),this._parent[a]=b,this._children[b][a]=!0,this},h.prototype._removeFromParentsChildList=function(a){delete this._children[this._parent[a]][a]},h.prototype.parent=function(a){if(this._isCompound){var b=this._parent[a];if(b!==f)return b}},h.prototype.children=function(a){if(d.isUndefined(a)&&(a=f),this._isCompound){var b=this._children[a];if(b)return d.keys(b)}else{if(a===f)return this.nodes();if(this.hasNode(a))return[]}},h.prototype.predecessors=function(a){var b=this._preds[a];if(b)return d.keys(b)},h.prototype.successors=function(a){var b=this._sucs[a];if(b)return d.keys(b)},h.prototype.neighbors=function(a){var b=this.predecessors(a);if(b)return d.union(b,this.successors(a))},h.prototype.setDefaultEdgeLabel=function(a){return d.isFunction(a)||(a=d.constant(a)),this._defaultEdgeLabelFn=a,this},h.prototype.edgeCount=function(){return this._edgeCount},h.prototype.edges=function(){return d.values(this._edgeObjs)},h.prototype.setPath=function(a,b){var c=this,e=arguments;return d.reduce(a,function(a,d){return e.length>1?c.setEdge(a,d,b):c.setEdge(a,d),d}),this},h.prototype.setEdge=function(){var a,b,c,e,f=!1;d.isPlainObject(arguments[0])?(a=arguments[0].v,b=arguments[0].w,c=arguments[0].name,2===arguments.length&&(e=arguments[1],f=!0)):(a=arguments[0],b=arguments[1],c=arguments[3],arguments.length>2&&(e=arguments[2],f=!0)),a=""+a,b=""+b,d.isUndefined(c)||(c=""+c);var g=k(this._isDirected,a,b,c);if(d.has(this._edgeLabels,g))return f&&(this._edgeLabels[g]=e),this;if(!d.isUndefined(c)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(a),this.setNode(b),this._edgeLabels[g]=f?e:this._defaultEdgeLabelFn(a,b,c);var h=l(this._isDirected,a,b,c);return a=h.v,b=h.w,Object.freeze(h),this._edgeObjs[g]=h,i(this._preds[b],a),i(this._sucs[a],b),this._in[b][g]=h,this._out[a][g]=h,this._edgeCount++,this},h.prototype.edge=function(a,b,c){var d=1===arguments.length?m(this._isDirected,arguments[0]):k(this._isDirected,a,b,c);return this._edgeLabels[d]},h.prototype.hasEdge=function(a,b,c){var e=1===arguments.length?m(this._isDirected,arguments[0]):k(this._isDirected,a,b,c);return d.has(this._edgeLabels,e)},h.prototype.removeEdge=function(a,b,c){var d=1===arguments.length?m(this._isDirected,arguments[0]):k(this._isDirected,a,b,c),e=this._edgeObjs[d];return e&&(a=e.v,b=e.w,delete this._edgeLabels[d],delete this._edgeObjs[d],j(this._preds[b],a),j(this._sucs[a],b),delete this._in[b][d],delete this._out[a][d],this._edgeCount--),this},h.prototype.inEdges=function(a,b){var c=this._in[a];if(c){var e=d.values(c);return b?d.filter(e,function(a){return a.v===b}):e}},h.prototype.outEdges=function(a,b){var c=this._out[a];if(c){var e=d.values(c);return b?d.filter(e,function(a){return a.w===b}):e}},h.prototype.nodeEdges=function(a,b){var c=this.inEdges(a,b);if(c)return c.concat(this.outEdges(a,b))}},{"./lodash":49}],47:[function(a,b,c){b.exports={Graph:a("./graph"),version:a("./version")}},{"./graph":46,"./version":50}],48:[function(a,b,c){function f(a){var b={options:{directed:a.isDirected(),multigraph:a.isMultigraph(),compound:a.isCompound()},nodes:g(a),edges:h(a)};return d.isUndefined(a.graph())||(b.value=d.clone({ node: a.graph() })),b}function g(a){return d.map(a.nodes(),function(b){var c=a.node(b),e=a.parent(b),f={v:b};return d.isUndefined(c)||(f.value=c),d.isUndefined(e)||(f.parent=e),f})}function h(a){return d.map(a.edges(),function(b){var c=a.edge(b),e={v:b.v,w:b.w};return d.isUndefined(b.name)||(e.name=b.name),d.isUndefined(c)||(e.value=c),e})}function i(a){var b=new e(a.options).setGraph(a.value);return d.each(a.nodes,function(a){b.setNode(a.v,a.value),a.parent&&b.setParent(a.v,a.parent)}),d.each(a.edges,function(a){b.setEdge({v:a.v,w:a.w,name:a.name},a.value)}),b}var d=a("./lodash"),e=a("./graph");b.exports={write:f,read:i}},{"./graph":46,"./lodash":49}],49:[function(a,b,c){b.exports=a(10)},{"/Users/cpettitt/projects/dagre/lib/lodash.js":10,lodash:51}],50:[function(a,b,c){b.exports="1.0.5"},{}],51:[function(b,c,d){(function(b){(function(){function Ka(a,b){if(a!==b){var c=null===a,d=a===e,f=a===a,g=null===b,h=b===e,i=b===b;if(a>b&&!g||!f||c&&!h&&i||d&&i)return 1;if(a<b&&!c||!i||g&&!d&&f||h&&f)return-1}return 0}function La(a,b,c){for(var d=a.length,e=c?d:-1;c?e--:++e<d;)if(b(a[e],e,a))return e;return-1}function Ma(a,b,c){if(b!==b)return Xa(a,c);for(var d=c-1,e=a.length;++d<e;)if(a[d]===b)return d;return-1}function Na(a){return"function"==typeof a||!1}function Oa(a){return null==a?"":a+""}function Pa(a,b){for(var c=-1,d=a.length;++c<d&&b.indexOf(a.charAt(c))>-1;);return c}function Qa(a,b){for(var c=a.length;c--&&b.indexOf(a.charAt(c))>-1;);return c}function Ra(a,b){return Ka(a.criteria,b.criteria)||a.index-b.index}function Sa(a,b,c){for(var d=-1,e=a.criteria,f=b.criteria,g=e.length,h=c.length;++d<g;){var i=Ka(e[d],f[d]);if(i){if(d>=h)return i;var j=c[d];return i*("asc"===j||j===!0?1:-1)}}return a.index-b.index}function Ta(a){return xa[a]}function Ua(a){return ya[a]}function Va(a,b,c){return b?a=Ba[a]:c&&(a=Ca[a]),"\\"+a}function Wa(a){return"\\"+Ca[a]}function Xa(a,b,c){for(var d=a.length,e=b+(c?0:-1);c?e--:++e<d;){var f=a[e];if(f!==f)return e}return-1}function Ya(a){return!!a&&"object"==typeof a}function Za(a){return a<=160&&a>=9&&a<=13||32==a||160==a||5760==a||6158==a||a>=8192&&(a<=8202||8232==a||8233==a||8239==a||8287==a||12288==a||65279==a)}function $a(a,b){for(var c=-1,d=a.length,e=-1,f=[];++c<d;)a[c]===b&&(a[c]=x,f[++e]=c);return f}function _a(a,b){for(var c,d=-1,e=a.length,f=-1,g=[];++d<e;){var h=a[d],i=b?b(h,d,a):h;d&&c===i||(c=i,g[++f]=h)}return g}function ab(a){for(var b=-1,c=a.length;++b<c&&Za(a.charCodeAt(b)););return b}function bb(a){for(var b=a.length;b--&&Za(a.charCodeAt(b)););return b}function cb(a){return za[a]}function db(a){function Ib(a){if(Ya(a)&&!pg(a)&&!(a instanceof Mb)){if(a instanceof Kb)return a;if(Fa.call(a,"__chain__")&&Fa.call(a,"__wrapped__"))return qe(a)}return new Kb(a)}function Jb(){}function Kb(a,b,c){this.__wrapped__=a,this.__actions__=c||[],this.__chain__=!!b}function Mb(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Bb,this.__views__=[]}function Nb(){var a=new Mb(this.__wrapped__);return a.__actions__=Zb(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=Zb(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=Zb(this.__views__),a}function Ob(){if(this.__filtered__){var a=new Mb(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function Pb(){var a=this.__wrapped__.value(),b=this.__dir__,c=pg(a),d=b<0,e=c?a.length:0,f=Wd(0,e,this.__views__),g=f.start,h=f.end,i=h-g,j=d?h:g-1,k=this.__iteratees__,l=k.length,m=0,n=wb(i,this.__takeCount__);if(!c||e<t||e==i&&n==i)return dd(d&&c?a.reverse():a,this.__actions__);var o=[];a:for(;i--&&m<n;){j+=b;for(var p=-1,q=a[j];++p<l;){var r=k[p],s=r.iteratee,w=r.type,x=s(q);if(w==v)q=x;else if(!x){if(w==u)continue a;break a}}o[m++]=q}return o}function Qb(){this.__data__={}}function Rb(a){return this.has(a)&&delete this.__data__[a]}function Sb(a){return"__proto__"==a?e:this.__data__[a]}function Tb(a){return"__proto__"!=a&&Fa.call(this.__data__,a)}function Ub(a,b){return"__proto__"!=a&&(this.__data__[a]=b),this}function Vb(a){var b=a?a.length:0;for(this.data={hash:qb(null),set:new kb};b--;)this.push(a[b])}function Wb(a,b){var c=a.data,d="string"==typeof b||yg(b)?c.set.has(b):c.hash[b];return d?0:-1}function Xb(a){var b=this.data;"string"==typeof a||yg(a)?b.set.add(a):b.hash[a]=!0}function Yb(a,c){for(var d=-1,e=a.length,f=-1,g=c.length,h=b(e+g);++d<e;)h[d]=a[d];for(;++f<g;)h[d++]=c[f];return h}function Zb(a,c){var d=-1,e=a.length;for(c||(c=b(e));++d<e;)c[d]=a[d];return c}function $b(a,b){for(var c=-1,d=a.length;++c<d&&b(a[c],c,a)!==!1;);return a}function _b(a,b){for(var c=a.length;c--&&b(a[c],c,a)!==!1;);return a}function ac(a,b){for(var c=-1,d=a.length;++c<d;)if(!b(a[c],c,a))return!1;return!0}function bc(a,b,c,d){for(var e=-1,f=a.length,g=d,h=g;++e<f;){var i=a[e],j=+b(i);c(j,g)&&(g=j,h=i)}return h}function cc(a,b){for(var c=-1,d=a.length,e=-1,f=[];++c<d;){var g=a[c];b(g,c,a)&&(f[++e]=g)}return f}function dc(a,c){for(var d=-1,e=a.length,f=b(e);++d<e;)f[d]=c(a[d],d,a);return f}function ec(a,b){for(var c=-1,d=b.length,e=a.length;++c<d;)a[e+c]=b[c];return a}function fc(a,b,c,d){var e=-1,f=a.length;for(d&&f&&(c=a[++e]);++e<f;)c=b(c,a[e],e,a);return c}function gc(a,b,c,d){var e=a.length;for(d&&e&&(c=a[--e]);e--;)c=b(c,a[e],e,a);return c}function hc(a,b){for(var c=-1,d=a.length;++c<d;)if(b(a[c],c,a))return!0;return!1}function ic(a,b){for(var c=a.length,d=0;c--;)d+=+b(a[c])||0;return d}function jc(a,b){return a===e?b:a}function kc(a,b,c,d){return a!==e&&Fa.call(d,c)?a:b}function lc(a,b,c){for(var d=-1,f=ah(b),g=f.length;++d<g;){var h=f[d],i=a[h],j=c(i,b[h],h,a,b);(j===j?j===i:i!==i)&&(i!==e||h in a)||(a[h]=j)}return a}function mc(a,b){return null==b?a:oc(b,ah(b),a)}function nc(a,c){for(var d=-1,f=null==a,g=!f&&_d(a),h=g?a.length:0,i=c.length,j=b(i);++d<i;){var k=c[d];g?j[d]=ae(k,h)?a[k]:e:j[d]=f?e:a[k]}return j}function oc(a,b,c){c||(c={});for(var d=-1,e=b.length;++d<e;){var f=b[d];c[f]=a[f]}return c}function pc(a,b,c){var d=typeof a;return"function"==d?b===e?a:gd(a,b,c):null==a?Nh:"object"==d?Nc(a):b===e?Vh(a):Oc(a,b)}function qc(a,b,c,d,f,g,h){var i;if(c&&(i=f?c(a,d,f):c(a)),i!==e)return i;if(!yg(a))return a;var j=pg(a);if(j){if(i=Xd(a),!b)return Zb(a,i)}else{var k=Ha.call(a),l=k==D;if(k!=G&&k!=y&&(!l||f))return wa[k]?Zd(a,k,b):f?a:{};if(i=Yd(l?{}:a),!b)return mc(i,a)}g||(g=[]),h||(h=[]);for(var m=g.length;m--;)if(g[m]==a)return h[m];return g.push(a),h.push(i),(j?$b:Fc)(a,function(d,e){i[e]=qc(d,b,c,e,a,g,h)}),i}function sc(a,b,c){if("function"!=typeof a)throw new Aa(w);return lb(function(){a.apply(e,c)},b)}function tc(a,b){var c=a?a.length:0,d=[];if(!c)return d;var e=-1,f=Sd(),g=f==Ma,h=g&&b.length>=t?pd(b):null,i=b.length;h&&(f=Wb,g=!1,b=h);a:for(;++e<c;){var j=a[e];if(g&&j===j){for(var k=i;k--;)if(b[k]===j)continue a;d.push(j)}else f(b,j,0)<0&&d.push(j)}return d}function wc(a,b){var c=!0;return uc(a,function(a,d,e){return c=!!b(a,d,e)}),c}function xc(a,b,c,d){var e=d,f=e;return uc(a,function(a,g,h){var i=+b(a,g,h);(c(i,e)||i===d&&i===f)&&(e=i,f=a)}),f}function yc(a,b,c,d){var f=a.length;for(c=null==c?0:+c||0,c<0&&(c=-c>f?0:f+c),d=d===e||d>f?f:+d||0,d<0&&(d+=f),f=c>d?0:d>>>0,c>>>=0;c<f;)a[c++]=b;return a}function zc(a,b){var c=[];return uc(a,function(a,d,e){b(a,d,e)&&c.push(a)}),c}function Ac(a,b,c,d){var e;return c(a,function(a,c,f){if(b(a,c,f))return e=d?c:a,!1}),e}function Bc(a,b,c,d){d||(d=[]);for(var e=-1,f=a.length;++e<f;){var g=a[e];Ya(g)&&_d(g)&&(c||pg(g)||og(g))?b?Bc(g,b,c,d):ec(d,g):c||(d[d.length]=g)}return d}function Ec(a,b){return Cc(a,b,bh)}function Fc(a,b){return Cc(a,b,ah)}function Gc(a,b){return Dc(a,b,ah)}function Hc(a,b){for(var c=-1,d=b.length,e=-1,f=[];++c<d;){var g=b[c];xg(a[g])&&(f[++e]=g)}return f}function Ic(a,b,c){if(null!=a){c!==e&&c in oe(a)&&(b=[c]);for(var d=0,f=b.length;null!=a&&d<f;)a=a[b[d++]];return d&&d==f?a:e}}function Jc(a,b,c,d,e,f){return a===b||(null==a||null==b||!yg(a)&&!Ya(b)?a!==a&&b!==b:Kc(a,b,Jc,c,d,e,f))}function Kc(a,b,c,d,e,f,g){var h=pg(a),i=pg(b),j=z,k=z;h||(j=Ha.call(a),j==y?j=G:j!=G&&(h=Hg(a))),i||(k=Ha.call(b),k==y?k=G:k!=G&&(i=Hg(b)));var l=j==G,m=k==G,n=j==k;if(n&&!h&&!l)return Nd(a,b,j);if(!e){var o=l&&Fa.call(a,"__wrapped__"),p=m&&Fa.call(b,"__wrapped__");if(o||p)return c(o?a.value():a,p?b.value():b,d,e,f,g)}if(!n)return!1;f||(f=[]),g||(g=[]);for(var q=f.length;q--;)if(f[q]==a)return g[q]==b;f.push(a),g.push(b);var r=(h?Md:Od)(a,b,c,d,e,f,g);return f.pop(),g.pop(),r}function Lc(a,b,c){var d=b.length,f=d,g=!c;if(null==a)return!f;for(a=oe(a);d--;){var h=b[d];if(g&&h[2]?h[1]!==a[h[0]]:!(h[0]in a))return!1}for(;++d<f;){h=b[d];var i=h[0],j=a[i],k=h[1];if(g&&h[2]){if(j===e&&!(i in a))return!1}else{var l=c?c(j,k,i):e;if(!(l===e?Jc(k,j,c,!0):l))return!1}}return!0}function Mc(a,c){var d=-1,e=_d(a)?b(a.length):[];return uc(a,function(a,b,f){e[++d]=c(a,b,f)}),e}function Nc(a){var b=Ud(a);if(1==b.length&&b[0][2]){var c=b[0][0],d=b[0][1];return function(a){return null!=a&&(a[c]===d&&(d!==e||c in oe(a)))}}return function(a){return Lc(a,b)}}function Oc(a,b){var c=pg(a),d=ce(a)&&fe(b),f=a+"";return a=pe(a),function(g){if(null==g)return!1;var h=f;if(g=oe(g),(c||!d)&&!(h in g)){if(g=1==a.length?g:Ic(g,Xc(a,0,-1)),null==g)return!1;h=He(a),g=oe(g)}return g[h]===b?b!==e||h in g:Jc(b,g[h],e,!0)}}function Pc(a,b,c,d,f){if(!yg(a))return a;var g=_d(b)&&(pg(b)||Hg(b)),h=g?e:ah(b);return $b(h||b,function(i,j){if(h&&(j=i,i=b[j]),Ya(i))d||(d=[]),f||(f=[]),Qc(a,b,j,Pc,c,d,f);else{var k=a[j],l=c?c(k,i,j,a,b):e,m=l===e;m&&(l=i),l===e&&(!g||j in a)||!m&&(l===l?l===k:k!==k)||(a[j]=l)}}),a}function Qc(a,b,c,d,f,g,h){for(var i=g.length,j=b[c];i--;)if(g[i]==j)return void(a[c]=h[i]);var k=a[c],l=f?f(k,j,c,a,b):e,m=l===e;m&&(l=j,_d(j)&&(pg(j)||Hg(j))?l=pg(k)?k:_d(k)?Zb(k):[]:Eg(j)||og(j)?l=og(k)?Mg(k):Eg(k)?k:{}:m=!1),g.push(j),h.push(l),m?a[c]=d(l,j,f,g,h):(l===l?l!==k:k===k)&&(a[c]=l)}function Rc(a){return function(b){return null==b?e:b[a]}}function Sc(a){var b=a+"";return a=pe(a),function(c){return Ic(c,a,b)}}function Tc(a,b){for(var c=a?b.length:0;c--;){var d=b[c];if(d!=e&&ae(d)){var e=d;mb.call(a,d,1)}}return a}function Uc(a,b){return a+rb(zb()*(b-a+1))}function Vc(a,b,c,d,e){return e(a,function(a,e,f){c=d?(d=!1,a):b(c,a,e,f)}),c}function Xc(a,c,d){var f=-1,g=a.length;c=null==c?0:+c||0,c<0&&(c=-c>g?0:g+c),d=d===e||d>g?g:+d||0,d<0&&(d+=g),g=c>d?0:d-c>>>0,c>>>=0;for(var h=b(g);++f<g;)h[f]=a[f+c];return h}function Yc(a,b){var c;return uc(a,function(a,d,e){return c=b(a,d,e),!c}),!!c}function Zc(a,b){var c=a.length;for(a.sort(b);c--;)a[c]=a[c].value;return a}function $c(a,b,c){var d=Pd(),e=-1;b=dc(b,function(a){return d(a)});var f=Mc(a,function(a){var c=dc(b,function(b){return b(a)});return{criteria:c,index:++e,value:a}});return Zc(f,function(a,b){return Sa(a,b,c)})}function _c(a,b){var c=0;return uc(a,function(a,d,e){c+=+b(a,d,e)||0}),c}function ad(a,b){var c=-1,d=Sd(),e=a.length,f=d==Ma,g=f&&e>=t,h=g?pd():null,i=[];h?(d=Wb,f=!1):(g=!1,h=b?[]:i);a:for(;++c<e;){var j=a[c],k=b?b(j,c,a):j;if(f&&j===j){for(var l=h.length;l--;)if(h[l]===k)continue a;b&&h.push(k),i.push(j)}else d(h,k,0)<0&&((b||g)&&h.push(k),i.push(j))}return i}function bd(a,c){for(var d=-1,e=c.length,f=b(e);++d<e;)f[d]=a[c[d]];return f}function cd(a,b,c,d){for(var e=a.length,f=d?e:-1;(d?f--:++f<e)&&b(a[f],f,a););return c?Xc(a,d?0:f,d?f+1:e):Xc(a,d?f+1:0,d?e:f)}function dd(a,b){var c=a;c instanceof Mb&&(c=c.value());for(var d=-1,e=b.length;++d<e;){var f=b[d];c=f.func.apply(f.thisArg,ec([c],f.args))}return c}function ed(a,b,c){var d=0,e=a?a.length:d;if("number"==typeof b&&b===b&&e<=Eb){for(;d<e;){var f=d+e>>>1,g=a[f];(c?g<=b:g<b)&&null!==g?d=f+1:e=f}return e}return fd(a,b,Nh,c)}function fd(a,b,c,d){b=c(b);for(var f=0,g=a?a.length:0,h=b!==b,i=null===b,j=b===e;f<g;){var k=rb((f+g)/2),l=c(a[k]),m=l!==e,n=l===l;
if(h)var o=n||d;else o=i?n&&m&&(d||null!=l):j?n&&(d||m):null!=l&&(d?l<=b:l<b);o?f=k+1:g=k}return wb(g,Db)}function gd(a,b,c){if("function"!=typeof a)return Nh;if(b===e)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)};case 5:return function(c,d,e,f,g){return a.call(b,c,d,e,f,g)}}return function(){return a.apply(b,arguments)}}function hd(a){var b=new fb(a.byteLength),c=new nb(b);return c.set(new nb(a)),b}function id(a,c,d){for(var e=d.length,f=-1,g=vb(a.length-e,0),h=-1,i=c.length,j=b(i+g);++h<i;)j[h]=c[h];for(;++f<e;)j[d[f]]=a[f];for(;g--;)j[h++]=a[f++];return j}function jd(a,c,d){for(var e=-1,f=d.length,g=-1,h=vb(a.length-f,0),i=-1,j=c.length,k=b(h+j);++g<h;)k[g]=a[g];for(var l=g;++i<j;)k[l+i]=c[i];for(;++e<f;)k[l+d[e]]=a[g++];return k}function kd(a,b){return function(c,d,e){var f=b?b():{};if(d=Pd(d,e,3),pg(c))for(var g=-1,h=c.length;++g<h;){var i=c[g];a(f,i,d(i,g,c),c)}else uc(c,function(b,c,e){a(f,b,d(b,c,e),e)});return f}}function ld(a){return gg(function(b,c){var d=-1,f=null==b?0:c.length,g=f>2?c[f-2]:e,h=f>2?c[2]:e,i=f>1?c[f-1]:e;for("function"==typeof g?(g=gd(g,i,5),f-=2):(g="function"==typeof i?i:e,f-=g?1:0),h&&be(c[0],c[1],h)&&(g=f<3?e:g,f=1);++d<f;){var j=c[d];j&&a(b,j,g)}return b})}function md(a,b){return function(c,d){var e=c?Td(c):0;if(!ee(e))return a(c,d);for(var f=b?e:-1,g=oe(c);(b?f--:++f<e)&&d(g[f],f,g)!==!1;);return c}}function nd(a){return function(b,c,d){for(var e=oe(b),f=d(b),g=f.length,h=a?g:-1;a?h--:++h<g;){var i=f[h];if(c(e[i],i,e)===!1)break}return b}}function od(a,b){function d(){var e=this&&this!==Ja&&this instanceof d?c:a;return e.apply(b,arguments)}var c=rd(a);return d}function pd(a){return qb&&kb?new Vb(a):null}function qd(a){return function(b){for(var c=-1,d=Jh(qh(b)),e=d.length,f="";++c<e;)f=a(f,d[c],c);return f}}function rd(a){return function(){var b=arguments;switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var c=rc(a.prototype),d=a.apply(c,b);return yg(d)?d:c}}function sd(a){function b(c,d,f){f&&be(c,d,f)&&(d=e);var g=Ld(c,a,e,e,e,e,e,d);return g.placeholder=b.placeholder,g}return b}function td(a,b){return gg(function(c){var d=c[0];return null==d?d:(c.push(b),a.apply(e,c))})}function ud(a,b){return function(c,d,f){if(f&&be(c,d,f)&&(d=e),d=Pd(d,f,3),1==d.length){c=pg(c)?c:ne(c);var g=bc(c,d,a,b);if(!c.length||g!==b)return g}return xc(c,d,a,b)}}function vd(a,b){return function(c,d,f){if(d=Pd(d,f,3),pg(c)){var g=La(c,d,b);return g>-1?c[g]:e}return Ac(c,d,a)}}function wd(a){return function(b,c,d){return b&&b.length?(c=Pd(c,d,3),La(b,c,a)):-1}}function xd(a){return function(b,c,d){return c=Pd(c,d,3),Ac(b,c,a,!0)}}function yd(a){return function(){for(var c,d=arguments.length,f=a?d:-1,g=0,h=b(d);a?f--:++f<d;){var i=h[g++]=arguments[f];if("function"!=typeof i)throw new Aa(w);!c&&Kb.prototype.thru&&"wrapper"==Rd(i)&&(c=new Kb([],!0))}for(f=c?-1:d;++f<d;){i=h[f];var k=Rd(i),m="wrapper"==k?Qd(i):e;c=m&&de(m[0])&&m[1]==(n|j|l|o)&&!m[4].length&&1==m[9]?c[Rd(m[0])].apply(c,m[3]):1==i.length&&de(i)?c[k]():c.thru(i)}return function(){var a=arguments,b=a[0];if(c&&1==a.length&&pg(b)&&b.length>=t)return c.plant(b).value();for(var e=0,f=d?h[e].apply(this,a):b;++e<d;)f=h[e].call(this,f);return f}}}function zd(a,b){return function(c,d,f){return"function"==typeof d&&f===e&&pg(c)?a(c,d):b(c,gd(d,f,3))}}function Ad(a){return function(b,c,d){return"function"==typeof c&&d===e||(c=gd(c,d,3)),a(b,c,bh)}}function Bd(a){return function(b,c,d){return"function"==typeof c&&d===e||(c=gd(c,d,3)),a(b,c)}}function Cd(a){return function(b,c,d){var e={};return c=Pd(c,d,3),Fc(b,function(b,d,f){var g=c(b,d,f);d=a?g:d,b=a?b:g,e[d]=b}),e}}function Dd(a){return function(b,c,d){return b=Oa(b),(a?b:"")+Hd(b,c,d)+(a?"":b)}}function Ed(a){var b=gg(function(c,d){var f=$a(d,b.placeholder);return Ld(c,a,e,d,f)});return b}function Fd(a,b){return function(c,d,f,g){var h=arguments.length<3;return"function"==typeof d&&g===e&&pg(c)?a(c,d,f,h):Vc(c,Pd(d,g,4),f,h,b)}}function Gd(a,c,d,f,o,p,q,r,s,t){function B(){for(var i=arguments.length,j=i,k=b(i);j--;)k[j]=arguments[j];if(f&&(k=id(k,f,o)),p&&(k=jd(k,p,q)),x||z){var n=B.placeholder,C=$a(k,n);if(i-=C.length,i<t){var D=r?Zb(r):e,E=vb(t-i,0),F=x?C:e,G=x?e:C,H=x?k:e,I=x?e:k;c|=x?l:m,c&=~(x?m:l),y||(c&=~(g|h));var J=[a,c,d,H,F,I,G,D,s,E],K=Gd.apply(e,J);return de(a)&&le(K,J),K.placeholder=n,K}}var L=v?d:this,M=w?L[a]:a;return r&&(k=ke(k,r)),u&&s<k.length&&(k.length=s),this&&this!==Ja&&this instanceof B&&(M=A||rd(a)),M.apply(L,k)}var u=c&n,v=c&g,w=c&h,x=c&j,y=c&i,z=c&k,A=w?e:rd(a);return B}function Hd(a,b,c){var d=a.length;if(b=+b,d>=b||!tb(b))return"";var e=b-d;return c=null==c?" ":c+"",zh(c,pb(e/c.length)).slice(0,e)}function Id(a,c,d,e){function i(){for(var c=-1,g=arguments.length,j=-1,k=e.length,l=b(k+g);++j<k;)l[j]=e[j];for(;g--;)l[j++]=arguments[++c];var m=this&&this!==Ja&&this instanceof i?h:a;return m.apply(f?d:this,l)}var f=c&g,h=rd(a);return i}function Jd(a){var b=I[a];return function(a,c){return c=c===e?0:+c||0,c?(c=ib(10,c),b(a*c)/c):b(a)}}function Kd(a){return function(b,c,d,e){var f=Pd(d);return null==d&&f===pc?ed(b,c,a):fd(b,c,f(d,e,1),a)}}function Ld(a,b,c,d,f,i,j,k){var n=b&h;if(!n&&"function"!=typeof a)throw new Aa(w);var o=d?d.length:0;if(o||(b&=~(l|m),d=f=e),o-=f?f.length:0,b&m){var p=d,q=f;d=f=e}var r=n?e:Qd(a),s=[a,b,c,d,f,p,q,i,j,k];if(r&&(ge(s,r),b=s[1],k=s[9]),s[9]=null==k?n?0:a.length:vb(k-o,0)||0,b==g)var t=od(s[0],s[2]);else t=b!=l&&b!=(g|l)||s[4].length?Gd.apply(e,s):Id.apply(e,s);var u=r?Wc:le;return u(t,s)}function Md(a,b,c,d,f,g,h){var i=-1,j=a.length,k=b.length;if(j!=k&&!(f&&k>j))return!1;for(;++i<j;){var l=a[i],m=b[i],n=d?d(f?m:l,f?l:m,i):e;if(n!==e){if(n)continue;return!1}if(f){if(!hc(b,function(a){return l===a||c(l,a,d,f,g,h)}))return!1}else if(l!==m&&!c(l,m,d,f,g,h))return!1}return!0}function Nd(a,b,c){switch(c){case A:case B:return+a==+b;case C:return a.name==b.name&&a.message==b.message;case F:return a!=+a?b!=+b:a==+b;case H:case J:return a==b+""}return!1}function Od(a,b,c,d,f,g,h){var i=ah(a),j=i.length,k=ah(b),l=k.length;if(j!=l&&!f)return!1;for(var m=j;m--;){var n=i[m];if(!(f?n in b:Fa.call(b,n)))return!1}for(var o=f;++m<j;){n=i[m];var p=a[n],q=b[n],r=d?d(f?q:p,f?p:q,n):e;if(!(r===e?c(p,q,d,f,g,h):r))return!1;o||(o="constructor"==n)}if(!o){var s=a.constructor,t=b.constructor;if(s!=t&&"constructor"in a&&"constructor"in b&&!("function"==typeof s&&s instanceof s&&"function"==typeof t&&t instanceof t))return!1}return!0}function Pd(a,b,c){var d=Ib.callback||Lh;return d=d===Lh?pc:d,c?d(a,b,c):d}function Rd(a){for(var b=a.name,c=Hb[b],d=c?c.length:0;d--;){var e=c[d],f=e.func;if(null==f||f==a)return e.name}return b}function Sd(a,b,c){var d=Ib.indexOf||Ee;return d=d===Ee?Ma:d,a?d(a,b,c):d}function Ud(a){for(var b=fh(a),c=b.length;c--;)b[c][2]=fe(b[c][1]);return b}function Vd(a,b){var c=null==a?e:a[b];return Bg(c)?c:e}function Wd(a,b,c){for(var d=-1,e=c.length;++d<e;){var f=c[d],g=f.size;switch(f.type){case"drop":a+=g;break;case"dropRight":b-=g;break;case"take":b=wb(b,a+g);break;case"takeRight":a=vb(a,b-g)}}return{start:a,end:b}}function Xd(a){var b=a.length,c=new a.constructor(b);return b&&"string"==typeof a[0]&&Fa.call(a,"index")&&(c.index=a.index,c.input=a.input),c}function Yd(a){var b=a.constructor;return"function"==typeof b&&b instanceof b||(b=xa),new b}function Zd(a,b,c){var d=a.constructor;switch(b){case L:return hd(a);case A:case B:return new d(+a);case M:case N:case O:case P:case Q:case R:case S:case T:case U:var e=a.buffer;return new d(c?hd(e):e,a.byteOffset,a.length);case F:case J:return new d(a);case H:var f=new d(a.source,la.exec(a));f.lastIndex=a.lastIndex}return f}function $d(a,b,c){null==a||ce(b,a)||(b=pe(b),a=1==b.length?a:Ic(a,Xc(b,0,-1)),b=He(b));var d=null==a?a:a[b];return null==d?e:d.apply(a,c)}function _d(a){return null!=a&&ee(Td(a))}function ae(a,b){return a="number"==typeof a||oa.test(a)?+a:-1,b=null==b?Fb:b,a>-1&&a%1==0&&a<b}function be(a,b,c){if(!yg(c))return!1;var d=typeof b;if("number"==d?_d(c)&&ae(b,c.length):"string"==d&&b in c){var e=c[b];return a===a?a===e:e!==e}return!1}function ce(a,b){var c=typeof a;if("string"==c&&ea.test(a)||"number"==c)return!0;if(pg(a))return!1;var d=!da.test(a);return d||null!=b&&a in oe(b)}function de(a){var b=Rd(a);if(!(b in Mb.prototype))return!1;var c=Ib[b];if(a===c)return!0;var d=Qd(c);return!!d&&a===d[0]}function ee(a){return"number"==typeof a&&a>-1&&a%1==0&&a<=Fb}function fe(a){return a===a&&!yg(a)}function ge(a,b){var c=a[1],d=b[1],e=c|d,f=e<n,h=d==n&&c==j||d==n&&c==o&&a[7].length<=b[8]||d==(n|o)&&c==j;if(!f&&!h)return a;d&g&&(a[2]=b[2],e|=c&g?0:i);var k=b[3];if(k){var l=a[3];a[3]=l?id(l,k,b[4]):Zb(k),a[4]=l?$a(a[3],x):Zb(b[4])}return k=b[5],k&&(l=a[5],a[5]=l?jd(l,k,b[6]):Zb(k),a[6]=l?$a(a[5],x):Zb(b[6])),k=b[7],k&&(a[7]=Zb(k)),d&n&&(a[8]=null==a[8]?b[8]:wb(a[8],b[8])),null==a[9]&&(a[9]=b[9]),a[0]=b[0],a[1]=e,a}function he(a,b){return a===e?b:Ng(a,b,he)}function ie(a,b){a=oe(a);for(var c=-1,d=b.length,e={};++c<d;){var f=b[c];f in a&&(e[f]=a[f])}return e}function je(a,b){var c={};return Ec(a,function(a,d,e){b(a,d,e)&&(c[d]=a)}),c}function ke(a,b){for(var c=a.length,d=wb(b.length,c),f=Zb(a);d--;){var g=b[d];a[d]=ae(g,c)?f[g]:e}return a}function me(a){for(var b=bh(a),c=b.length,d=c&&a.length,e=!!d&&ee(d)&&(pg(a)||og(a)),f=-1,g=[];++f<c;){var h=b[f];(e&&ae(h,d)||Fa.call(a,h))&&g.push(h)}return g}function ne(a){return null==a?[]:_d(a)?yg(a)?a:xa(a):kh(a)}function oe(a){return yg(a)?a:xa(a)}function pe(a){if(pg(a))return a;var b=[];return Oa(a).replace(fa,function(a,c,d,e){b.push(d?e.replace(ja,"$1"):c||a)}),b}function qe(a){return a instanceof Mb?a.clone():new Kb(a.__wrapped__,a.__chain__,Zb(a.__actions__))}function re(a,c,d){c=(d?be(a,c,d):null==c)?1:vb(rb(c)||1,1);for(var e=0,f=a?a.length:0,g=-1,h=b(pb(f/c));e<f;)h[++g]=Xc(a,e,e+=c);return h}function se(a){for(var b=-1,c=a?a.length:0,d=-1,e=[];++b<c;){var f=a[b];f&&(e[++d]=f)}return e}function ue(a,b,c){var d=a?a.length:0;return d?((c?be(a,b,c):null==b)&&(b=1),Xc(a,b<0?0:b)):[]}function ve(a,b,c){var d=a?a.length:0;return d?((c?be(a,b,c):null==b)&&(b=1),b=d-(+b||0),Xc(a,0,b<0?0:b)):[]}function we(a,b,c){return a&&a.length?cd(a,Pd(b,c,3),!0,!0):[]}function xe(a,b,c){return a&&a.length?cd(a,Pd(b,c,3),!0):[]}function ye(a,b,c,d){var e=a?a.length:0;return e?(c&&"number"!=typeof c&&be(a,b,c)&&(c=0,d=e),yc(a,b,c,d)):[]}function Be(a){return a?a[0]:e}function Ce(a,b,c){var d=a?a.length:0;return c&&be(a,b,c)&&(b=!1),d?Bc(a,b):[]}function De(a){var b=a?a.length:0;return b?Bc(a,!0):[]}function Ee(a,b,c){var d=a?a.length:0;if(!d)return-1;if("number"==typeof c)c=c<0?vb(d+c,0):c;else if(c){var e=ed(a,b);return e<d&&(b===b?b===a[e]:a[e]!==a[e])?e:-1}return Ma(a,b,c||0)}function Fe(a){return ve(a,1)}function He(a){var b=a?a.length:0;return b?a[b-1]:e}function Ie(a,b,c){var d=a?a.length:0;if(!d)return-1;var e=d;if("number"==typeof c)e=(c<0?vb(d+c,0):wb(c||0,d-1))+1;else if(c){e=ed(a,b,!0)-1;var f=a[e];return(b===b?b===f:f!==f)?e:-1}if(b!==b)return Xa(a,e,!0);for(;e--;)if(a[e]===b)return e;return-1}function Je(){var a=arguments,b=a[0];if(!b||!b.length)return b;for(var c=0,d=Sd(),e=a.length;++c<e;)for(var f=0,g=a[c];(f=d(b,g,f))>-1;)mb.call(b,f,1);return b}function Le(a,b,c){var d=[];if(!a||!a.length)return d;var e=-1,f=[],g=a.length;for(b=Pd(b,c,3);++e<g;){var h=a[e];b(h,e,a)&&(d.push(h),f.push(e))}return Tc(a,f),d}function Me(a){return ue(a,1)}function Ne(a,b,c){var d=a?a.length:0;return d?(c&&"number"!=typeof c&&be(a,b,c)&&(b=0,c=d),Xc(a,b,c)):[]}function Qe(a,b,c){var d=a?a.length:0;return d?((c?be(a,b,c):null==b)&&(b=1),Xc(a,0,b<0?0:b)):[]}function Re(a,b,c){var d=a?a.length:0;return d?((c?be(a,b,c):null==b)&&(b=1),b=d-(+b||0),Xc(a,b<0?0:b)):[]}function Se(a,b,c){return a&&a.length?cd(a,Pd(b,c,3),!1,!0):[]}function Te(a,b,c){return a&&a.length?cd(a,Pd(b,c,3)):[]}function Ve(a,b,c,d){var f=a?a.length:0;if(!f)return[];null!=b&&"boolean"!=typeof b&&(d=c,c=be(a,b,d)?e:b,b=!1);var g=Pd();return null==c&&g===pc||(c=g(c,d,3)),b&&Sd()==Ma?_a(a,c):ad(a,c)}function We(a){if(!a||!a.length)return[];var c=-1,d=0;a=cc(a,function(a){if(_d(a))return d=vb(a.length,d),!0});for(var e=b(d);++c<d;)e[c]=dc(a,Rc(c));return e}function Xe(a,b,c){var d=a?a.length:0;if(!d)return[];var f=We(a);return null==b?f:(b=gd(b,c,4),dc(f,function(a){return fc(a,b,e,!0)}))}function Ze(){for(var a=-1,b=arguments.length;++a<b;){var c=arguments[a];if(_d(c))var d=d?ec(tc(d,c),tc(c,d)):c}return d?ad(d):[]}function _e(a,b){var c=-1,d=a?a.length:0,e={};for(!d||b||pg(a[0])||(b=[]);++c<d;){var f=a[c];b?e[f]=b[c]:f&&(e[f[0]]=f[1])}return e}function bf(a){var b=Ib(a);return b.__chain__=!0,b}function cf(a,b,c){return b.call(c,a),a}function df(a,b,c){return b.call(c,a)}function ef(){return bf(this)}function ff(){return new Kb(this.value(),this.__chain__)}function hf(a){for(var b,c=this;c instanceof Jb;){var d=qe(c);b?e.__wrapped__=d:b=d;var e=d;c=c.__wrapped__}return e.__wrapped__=a,b}function jf(){var a=this.__wrapped__,b=function(a){return c&&c.__dir__<0?a:a.reverse()};if(a instanceof Mb){var c=a;return this.__actions__.length&&(c=new Mb(this)),c=c.reverse(),c.__actions__.push({func:df,args:[b],thisArg:e}),new Kb(c,this.__chain__)}return this.thru(b)}function kf(){return this.value()+""}function lf(){return dd(this.__wrapped__,this.__actions__)}function of(a,b,c){var d=pg(a)?ac:wc;return c&&be(a,b,c)&&(b=e),"function"==typeof b&&c===e||(b=Pd(b,c,3)),d(a,b)}function pf(a,b,c){var d=pg(a)?cc:zc;return b=Pd(b,c,3),d(a,b)}function sf(a,b){return qf(a,Nc(b))}function wf(a,b,c,d){var e=a?Td(a):0;return ee(e)||(a=kh(a),e=a.length),c="number"!=typeof c||d&&be(b,c,d)?0:c<0?vb(e+c,0):c||0,"string"==typeof a||!pg(a)&&Gg(a)?c<=e&&a.indexOf(b,c)>-1:!!e&&Sd(a,b,c)>-1}function zf(a,b,c){var d=pg(a)?dc:Mc;return b=Pd(b,c,3),d(a,b)}function Bf(a,b){return zf(a,Vh(b))}function Ef(a,b,c){var d=pg(a)?cc:zc;return b=Pd(b,c,3),d(a,function(a,c,d){return!b(a,c,d)})}function Ff(a,b,c){if(c?be(a,b,c):null==b){a=ne(a);var d=a.length;return d>0?a[Uc(0,d-1)]:e}var f=-1,g=Lg(a),d=g.length,h=d-1;for(b=wb(b<0?0:+b||0,d);++f<b;){var i=Uc(f,h),j=g[i];g[i]=g[f],g[f]=j}return g.length=b,g}function Gf(a){return Ff(a,Bb)}function Hf(a){var b=a?Td(a):0;return ee(b)?b:ah(a).length}function If(a,b,c){var d=pg(a)?hc:Yc;return c&&be(a,b,c)&&(b=e),"function"==typeof b&&c===e||(b=Pd(b,c,3)),d(a,b)}function Jf(a,b,c){if(null==a)return[];c&&be(a,b,c)&&(b=e);var d=-1;b=Pd(b,c,3);var f=Mc(a,function(a,c,e){return{criteria:b(a,c,e),index:++d,value:a}});return Zc(f,Ra)}function Lf(a,b,c,d){return null==a?[]:(d&&be(b,c,d)&&(c=e),pg(b)||(b=null==b?[]:[b]),pg(c)||(c=null==c?[]:[c]),$c(a,b,c))}function Mf(a,b){return pf(a,Nc(b))}function Of(a,b){if("function"!=typeof b){if("function"!=typeof a)throw new Aa(w);var c=a;a=b,b=c}return a=tb(a=+a)?a:0,function(){if(--a<1)return b.apply(this,arguments)}}function Pf(a,b,c){return c&&be(a,b,c)&&(b=e),b=a&&null==b?a.length:vb(+b||0,0),Ld(a,n,e,e,e,e,b)}function Qf(a,b){var c;if("function"!=typeof b){if("function"!=typeof a)throw new Aa(w);var d=a;a=b,b=d}return function(){return--a>0&&(c=b.apply(this,arguments)),a<=1&&(b=e),c}}function Wf(a,b,c){function p(){j&&gb(j),f&&gb(f),l=0,f=j=k=e}function q(b,c){c&&gb(c),f=j=k=e,b&&(l=Nf(),g=a.apply(i,d),j||f||(d=i=e))}function r(){var a=b-(Nf()-h);a<=0||a>b?q(k,f):j=lb(r,a)}function s(){q(n,j)}function t(){if(d=arguments,h=Nf(),i=this,k=n&&(j||!o),m===!1)var c=o&&!j;else{f||o||(l=h);var p=m-(h-l),q=p<=0||p>m;q?(f&&(f=gb(f)),l=h,g=a.apply(i,d)):f||(f=lb(s,p))}return q&&j?j=gb(j):j||b===m||(j=lb(r,b)),c&&(q=!0,g=a.apply(i,d)),!q||j||f||(d=i=e),g}var d,f,g,h,i,j,k,l=0,m=!1,n=!0;if("function"!=typeof a)throw new Aa(w);if(b=b<0?0:+b||0,c===!0){var o=!0;n=!1}else yg(c)&&(o=!!c.leading,m="maxWait"in c&&vb(+c.maxWait||0,b),n="trailing"in c?!!c.trailing:n);return t.cancel=p,t}function _f(a,b){if("function"!=typeof a||b&&"function"!=typeof b)throw new Aa(w);var c=function(){var d=arguments,e=b?b.apply(this,d):d[0],f=c.cache;if(f.has(e))return f.get(e);var g=a.apply(this,d);return c.cache=f.set(e,g),g};return c.cache=new _f.Cache,c}function bg(a){if("function"!=typeof a)throw new Aa(w);return function(){return!a.apply(this,arguments)}}function cg(a){return Qf(2,a)}function gg(a,c){if("function"!=typeof a)throw new Aa(w);return c=vb(c===e?a.length-1:+c||0,0),function(){for(var d=arguments,e=-1,f=vb(d.length-c,0),g=b(f);++e<f;)g[e]=d[c+e];switch(c){case 0:return a.call(this,g);case 1:return a.call(this,d[0],g);case 2:return a.call(this,d[0],d[1],g)}var h=b(c+1);for(e=-1;++e<c;)h[e]=d[e];return h[c]=g,a.apply(this,h)}}function hg(a){if("function"!=typeof a)throw new Aa(w);return function(b){return a.apply(this,b)}}function ig(a,b,c){var d=!0,e=!0;if("function"!=typeof a)throw new Aa(w);return c===!1?d=!1:yg(c)&&(d="leading"in c?!!c.leading:d,e="trailing"in c?!!c.trailing:e),Wf(a,b,{leading:d,maxWait:+b,trailing:e})}function jg(a,b){return b=null==b?Nh:b,Ld(b,l,e,[a],[])}function kg(a,b,c,d){return b&&"boolean"!=typeof b&&be(a,b,c)?b=!1:"function"==typeof b&&(d=c,c=b,b=!1),"function"==typeof c?qc(a,b,gd(c,d,1)):qc(a,b)}function lg(a,b,c){return"function"==typeof b?qc(a,!0,gd(b,c,1)):qc(a,!0)}function mg(a,b){return a>b}function ng(a,b){return a>=b}function og(a){return Ya(a)&&_d(a)&&Fa.call(a,"callee")&&!jb.call(a,"callee")}function qg(a){return a===!0||a===!1||Ya(a)&&Ha.call(a)==A}function rg(a){return Ya(a)&&Ha.call(a)==B}function sg(a){return!!a&&1===a.nodeType&&Ya(a)&&!Eg(a)}function tg(a){return null==a||(_d(a)&&(pg(a)||Gg(a)||og(a)||Ya(a)&&xg(a.splice))?!a.length:!ah(a).length)}function ug(a,b,c,d){c="function"==typeof c?gd(c,d,3):e;var f=c?c(a,b):e;return f===e?Jc(a,b,c):!!f}function vg(a){return Ya(a)&&"string"==typeof a.message&&Ha.call(a)==C}function wg(a){return"number"==typeof a&&tb(a)}function xg(a){return yg(a)&&Ha.call(a)==D}function yg(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function zg(a,b,c,d){return c="function"==typeof c?gd(c,d,3):e,Lc(a,Ud(b),c)}function Ag(a){return Dg(a)&&a!=+a}function Bg(a){return null!=a&&(xg(a)?Za.test(Ea.call(a)):Ya(a)&&na.test(a))}function Cg(a){return null===a}function Dg(a){return"number"==typeof a||Ya(a)&&Ha.call(a)==F}function Eg(a){var b;if(!Ya(a)||Ha.call(a)!=G||og(a)||!Fa.call(a,"constructor")&&(b=a.constructor,"function"==typeof b&&!(b instanceof b)))return!1;var c;return Ec(a,function(a,b){c=b}),c===e||Fa.call(a,c)}function Fg(a){return yg(a)&&Ha.call(a)==H}function Gg(a){return"string"==typeof a||Ya(a)&&Ha.call(a)==J}function Hg(a){return Ya(a)&&ee(a.length)&&!!va[Ha.call(a)]}function Ig(a){return a===e}function Jg(a,b){return a<b}function Kg(a,b){return a<=b}function Lg(a){var b=a?Td(a):0;return ee(b)?b?Zb(a):[]:kh(a)}function Mg(a){return oc(a,bh(a))}function Pg(a,b,c){var d=rc(a);return c&&be(a,b,c)&&(b=e),b?mc(d,b):d}function Yg(a){return Hc(a,bh(a))}function Zg(a,b,c){var d=null==a?e:Ic(a,pe(b),b+"");return d===e?c:d}function $g(a,b){if(null==a)return!1;var c=Fa.call(a,b);if(!c&&!ce(b)){if(b=pe(b),a=1==b.length?a:Ic(a,Xc(b,0,-1)),null==a)return!1;b=He(b),c=Fa.call(a,b)}return c||ee(a.length)&&ae(b,a.length)&&(pg(a)||og(a))}function _g(a,b,c){c&&be(a,b,c)&&(b=e);for(var d=-1,f=ah(a),g=f.length,h={};++d<g;){var i=f[d],j=a[i];b?Fa.call(h,j)?h[j].push(i):h[j]=[i]:h[j]=i}return h}function bh(a){if(null==a)return[];yg(a)||(a=xa(a));var c=a.length;c=c&&ee(c)&&(pg(a)||og(a))&&c||0;for(var d=a.constructor,e=-1,f="function"==typeof d&&d.prototype===a,g=b(c),h=c>0;++e<c;)g[e]=e+"";for(var i in a)h&&ae(i,c)||"constructor"==i&&(f||!Fa.call(a,i))||g.push(i);return g}function fh(a){a=oe(a);for(var c=-1,d=ah(a),e=d.length,f=b(e);++c<e;){var g=d[c];f[c]=[g,a[g]]}return f}function hh(a,b,c){var d=null==a?e:a[b];return d===e&&(null==a||ce(b,a)||(b=pe(b),a=1==b.length?a:Ic(a,Xc(b,0,-1)),d=null==a?e:a[He(b)]),d=d===e?c:d),xg(d)?d.call(a):d}function ih(a,b,c){if(null==a)return a;var d=b+"";b=null!=a[d]||ce(b,a)?[d]:pe(b);for(var e=-1,f=b.length,g=f-1,h=a;null!=h&&++e<f;){var i=b[e];yg(h)&&(e==g?h[i]=c:null==h[i]&&(h[i]=ae(b[e+1])?[]:{})),h=h[i]}return a}function jh(a,b,c,d){var f=pg(a)||Hg(a);if(b=Pd(b,d,4),null==c)if(f||yg(a)){var g=a.constructor;c=f?pg(a)?new g:[]:rc(xg(g)?g.prototype:e)}else c={};return(f?$b:Fc)(a,function(a,d,e){return b(c,a,d,e)}),c}function kh(a){return bd(a,ah(a))}function lh(a){return bd(a,bh(a))}function mh(a,b,c){return b=+b||0,c===e?(c=b,b=0):c=+c||0,a>=wb(b,c)&&a<vb(b,c)}function nh(a,b,c){c&&be(a,b,c)&&(b=c=e);var d=null==a,f=null==b;if(null==c&&(f&&"boolean"==typeof a?(c=a,a=1):"boolean"==typeof b&&(c=b,f=!0)),d&&f&&(b=1,f=!1),a=+a||0,f?(b=a,a=0):b=+b||0,c||a%1||b%1){var g=zb();return wb(a+g*(b-a+hb("1e-"+((g+"").length-1))),b)}return Uc(a,b)}function ph(a){return a=Oa(a),a&&a.charAt(0).toUpperCase()+a.slice(1)}function qh(a){return a=Oa(a),a&&a.replace(pa,Ta).replace(ia,"")}function rh(a,b,c){a=Oa(a),b+="";var d=a.length;return c=c===e?d:wb(c<0?0:+c||0,d),c-=b.length,c>=0&&a.indexOf(b,c)==c}function sh(a){return a=Oa(a),a&&_.test(a)?a.replace(Z,Ua):a}function th(a){return a=Oa(a),a&&ha.test(a)?a.replace(ga,Va):a||"(?:)"}function vh(a,b,c){a=Oa(a),b=+b;var d=a.length;if(d>=b||!tb(b))return a;var e=(b-d)/2,f=rb(e),g=pb(e);return c=Hd("",g,c),c.slice(0,f)+a+c}function yh(a,b,c){return(c?be(a,b,c):null==b)?b=0:b&&(b=+b),a=Eh(a),yb(a,b||(ma.test(a)?16:10))}function zh(a,b){var c="";if(a=Oa(a),b=+b,b<1||!a||!tb(b))return c;do b%2&&(c+=a),b=rb(b/2),a+=a;while(b);return c}function Ch(a,b,c){return a=Oa(a),c=null==c?0:wb(c<0?0:+c||0,a.length),a.lastIndexOf(b,c)==c}function Dh(a,b,c){var d=Ib.templateSettings;c&&be(a,b,c)&&(b=c=e),a=Oa(a),b=lc(mc({},c||b),d,kc);var i,j,f=lc(mc({},b.imports),d.imports,kc),g=ah(f),h=bd(f,g),k=0,l=b.interpolate||qa,m="__p += '",n=ya((b.escape||qa).source+"|"+l.source+"|"+(l===ca?ka:qa).source+"|"+(b.evaluate||qa).source+"|$","g"),o="//# sourceURL="+("sourceURL"in b?b.sourceURL:"lodash.templateSources["+ ++ua+"]")+"\n";a.replace(n,function(b,c,d,e,f,g){return d||(d=e),m+=a.slice(k,g).replace(ra,Wa),c&&(i=!0,m+="' +\n__e("+c+") +\n'"),f&&(j=!0,m+="';\n"+f+";\n__p += '"),d&&(m+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'"),k=g+b.length,b}),m+="';\n";var p=b.variable;p||(m="with (obj) {\n"+m+"\n}\n"),m=(j?m.replace(V,""):m).replace(W,"$1").replace(X,"$1;"),m="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(j?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+m+"return __p\n}";var q=Kh(function(){return E(g,o+"return "+m).apply(e,h)});if(q.source=m,vg(q))throw q;return q}function Eh(a,b,c){var d=a;return(a=Oa(a))?(c?be(d,b,c):null==b)?a.slice(ab(a),bb(a)+1):(b+="",a.slice(Pa(a,b),Qa(a,b)+1)):a}function Fh(a,b,c){var d=a;return a=Oa(a),a?(c?be(d,b,c):null==b)?a.slice(ab(a)):a.slice(Pa(a,b+"")):a}function Gh(a,b,c){var d=a;return a=Oa(a),a?(c?be(d,b,c):null==b)?a.slice(0,bb(a)+1):a.slice(0,Qa(a,b+"")+1):a}function Hh(a,b,c){c&&be(a,b,c)&&(b=e);var d=p,f=q;if(null!=b)if(yg(b)){var g="separator"in b?b.separator:g;d="length"in b?+b.length||0:d,f="omission"in b?Oa(b.omission):f}else d=+b||0;if(a=Oa(a),d>=a.length)return a;var h=d-f.length;if(h<1)return f;var i=a.slice(0,h);if(null==g)return i+f;if(Fg(g)){if(a.slice(h).search(g)){var j,k,l=a.slice(0,h);for(g.global||(g=ya(g.source,(la.exec(g)||"")+"g")),g.lastIndex=0;j=g.exec(l);)k=j.index;i=i.slice(0,null==k?h:k)}}else if(a.indexOf(g,h)!=h){var m=i.lastIndexOf(g);m>-1&&(i=i.slice(0,m))}return i+f}function Ih(a){return a=Oa(a),a&&$.test(a)?a.replace(Y,cb):a}function Jh(a,b,c){return c&&be(a,b,c)&&(b=e),a=Oa(a),a.match(b||sa)||[]}function Lh(a,b,c){return c&&be(a,b,c)&&(b=e),Ya(a)?Oh(a):pc(a,b)}function Mh(a){return function(){return a}}function Nh(a){return a}function Oh(a){return Nc(qc(a,!0))}function Ph(a,b){return Oc(a,qc(b,!0))}function Sh(a,b,c){if(null==c){var d=yg(b),f=d?ah(b):e,g=f&&f.length?Hc(b,f):e;(g?g.length:d)||(g=!1,c=b,b=a,a=this)}g||(g=Hc(b,ah(b)));var h=!0,i=-1,j=xg(a),k=g.length;c===!1?h=!1:yg(c)&&"chain"in c&&(h=c.chain);for(;++i<k;){var l=g[i],m=b[l];a[l]=m,j&&(a.prototype[l]=function(b){return function(){var c=this.__chain__;if(h||c){var d=a(this.__wrapped__),e=d.__actions__=Zb(this.__actions__);return e.push({func:b,args:arguments,thisArg:a}),d.__chain__=c,d}return b.apply(a,ec([this.value()],arguments))}}(m))}return a}function Th(){return Ja._=Ia,this}function Uh(){}function Vh(a){return ce(a)?Rc(a):Sc(a)}function Wh(a){return function(b){return Ic(a,pe(b),b+"")}}function Xh(a,c,d){d&&be(a,c,d)&&(c=d=e),a=+a||0,d=null==d?1:+d||0,null==c?(c=a,a=0):c=+c||0;for(var f=-1,g=vb(pb((c-a)/(d||1)),0),h=b(g);++f<g;)h[f]=a,a+=d;return h}function Yh(a,c,d){if(a=rb(a),a<1||!tb(a))return[];var e=-1,f=b(wb(a,Cb));for(c=gd(c,d,1);++e<a;)e<Cb?f[e]=c(e):c(e);return f}function Zh(a){var b=++Ga;return Oa(a)+b}function $h(a,b){return(+a||0)+(+b||0)}function ei(a,b,c){return c&&be(a,b,c)&&(b=e),b=Pd(b,c,3),1==b.length?ic(pg(a)?a:ne(a),b):_c(a,b)}a=a?eb.defaults(Ja.Object(),a,eb.pick(Ja,ta)):Ja;var b=a.Array,c=a.Date,d=a.Error,E=a.Function,I=a.Math,K=a.Number,xa=a.Object,ya=a.RegExp,za=a.String,Aa=a.TypeError,Ba=b.prototype,Ca=xa.prototype,Da=za.prototype,Ea=E.prototype.toString,Fa=Ca.hasOwnProperty,Ga=0,Ha=Ca.toString,Ia=Ja._,Za=ya("^"+Ea.call(Fa).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fb=a.ArrayBuffer,gb=a.clearTimeout,hb=a.parseFloat,ib=I.pow,jb=Ca.propertyIsEnumerable,kb=Vd(a,"Set"),lb=a.setTimeout,mb=Ba.splice,nb=a.Uint8Array,ob=Vd(a,"WeakMap"),pb=I.ceil,qb=Vd(xa,"create"),rb=I.floor,sb=Vd(b,"isArray"),tb=a.isFinite,ub=Vd(xa,"keys"),vb=I.max,wb=I.min,xb=Vd(c,"now"),yb=a.parseInt,zb=I.random,Ab=K.NEGATIVE_INFINITY,Bb=K.POSITIVE_INFINITY,Cb=4294967295,Db=Cb-1,Eb=Cb>>>1,Fb=9007199254740991,Gb=ob&&new ob,Hb={};Ib.support={};Ib.templateSettings={escape:aa,evaluate:ba,interpolate:ca,variable:"",imports:{_:Ib}};var rc=function(){function a(){}return function(b){if(yg(b)){a.prototype=b;var c=new a;a.prototype=e}return c||{}}}(),uc=md(Fc),vc=md(Gc,!0),Cc=nd(),Dc=nd(!0),Wc=Gb?function(a,b){return Gb.set(a,b),a}:Nh,Qd=Gb?function(a){return Gb.get(a)}:Uh,Td=Rc("length"),le=function(){var a=0,b=0;return function(c,d){var e=Nf(),f=s-(e-b);if(b=e,f>0){if(++a>=r)return c}else a=0;return Wc(c,d)}}(),te=gg(function(a,b){return Ya(a)&&_d(a)?tc(a,Bc(b,!1,!0)):[]}),ze=wd(),Ae=wd(!0),Ge=gg(function(a){for(var c=a.length,d=c,e=b(l),f=Sd(),g=f==Ma,h=[];d--;){var i=a[d]=_d(i=a[d])?i:[];e[d]=g&&i.length>=120?pd(d&&i):null}var j=a[0],k=-1,l=j?j.length:0,m=e[0];a:for(;++k<l;)if(i=j[k],(m?Wb(m,i):f(h,i,0))<0){for(var d=c;--d;){var n=e[d];if((n?Wb(n,i):f(a[d],i,0))<0)continue a}m&&m.push(i),h.push(i)}return h}),Ke=gg(function(a,b){b=Bc(b);var c=nc(a,b);return Tc(a,b.sort(Ka)),c}),Oe=Kd(),Pe=Kd(!0),Ue=gg(function(a){return ad(Bc(a,!1,!0))}),Ye=gg(function(a,b){return _d(a)?tc(a,b):[]}),$e=gg(We),af=gg(function(a){var b=a.length,c=b>2?a[b-2]:e,d=b>1?a[b-1]:e;return b>2&&"function"==typeof c?b-=2:(c=b>1&&"function"==typeof d?(--b,d):e,d=e),a.length=b,Xe(a,c,d)}),gf=gg(function(a){return a=Bc(a),this.thru(function(b){return Yb(pg(b)?b:[oe(b)],a)})}),mf=gg(function(a,b){return nc(a,Bc(b))}),nf=kd(function(a,b,c){Fa.call(a,c)?++a[c]:a[c]=1}),qf=vd(uc),rf=vd(vc,!0),tf=zd($b,uc),uf=zd(_b,vc),vf=kd(function(a,b,c){Fa.call(a,c)?a[c].push(b):a[c]=[b]}),xf=kd(function(a,b,c){a[c]=b}),yf=gg(function(a,c,d){var f=-1,g="function"==typeof c,h=ce(c),i=_d(a)?b(a.length):[];return uc(a,function(a){var b=g?c:h&&null!=a?a[c]:e;i[++f]=b?b.apply(a,d):$d(a,c,d)}),i}),Af=kd(function(a,b,c){a[c?0:1].push(b)},function(){return[[],[]]}),Cf=Fd(fc,uc),Df=Fd(gc,vc),Kf=gg(function(a,b){if(null==a)return[];var c=b[2];return c&&be(b[0],b[1],c)&&(b.length=1),$c(a,Bc(b),[])}),Nf=xb||function(){return(new c).getTime()},Rf=gg(function(a,b,c){var d=g;if(c.length){var e=$a(c,Rf.placeholder);d|=l}return Ld(a,d,b,c,e)}),Sf=gg(function(a,b){b=b.length?Bc(b):Yg(a);for(var c=-1,d=b.length;++c<d;){var e=b[c];a[e]=Ld(a[e],g,a)}return a}),Tf=gg(function(a,b,c){var d=g|h;if(c.length){var e=$a(c,Tf.placeholder);d|=l}return Ld(b,d,a,c,e)}),Uf=sd(j),Vf=sd(k),Xf=gg(function(a,b){return sc(a,1,b)}),Yf=gg(function(a,b,c){return sc(a,b,c)}),Zf=yd(),$f=yd(!0),ag=gg(function(a,b){if(b=Bc(b),"function"!=typeof a||!ac(b,Na))throw new Aa(w);var c=b.length;return gg(function(d){for(var e=wb(d.length,c);e--;)d[e]=b[e](d[e]);return a.apply(this,d)})}),dg=Ed(l),eg=Ed(m),fg=gg(function(a,b){return Ld(a,o,e,e,e,Bc(b))}),pg=sb||function(a){return Ya(a)&&ee(a.length)&&Ha.call(a)==z},Ng=ld(Pc),Og=ld(function(a,b,c){return c?lc(a,b,c):mc(a,b)}),Qg=td(Og,jc),Rg=td(Ng,he),Sg=xd(Fc),Tg=xd(Gc),Ug=Ad(Cc),Vg=Ad(Dc),Wg=Bd(Fc),Xg=Bd(Gc),ah=ub?function(a){var b=null==a?e:a.constructor;return"function"==typeof b&&b.prototype===a||"function"!=typeof a&&_d(a)?me(a):yg(a)?ub(a):[]}:me,ch=Cd(!0),dh=Cd(),eh=gg(function(a,b){if(null==a)return{};if("function"!=typeof b[0]){var b=dc(Bc(b),za);return ie(a,tc(bh(a),b))}var c=gd(b[0],b[1],3);return je(a,function(a,b,d){return!c(a,b,d)})}),gh=gg(function(a,b){return null==a?{}:"function"==typeof b[0]?je(a,gd(b[0],b[1],3)):ie(a,Bc(b))}),oh=qd(function(a,b,c){return b=b.toLowerCase(),a+(c?b.charAt(0).toUpperCase()+b.slice(1):b)}),uh=qd(function(a,b,c){return a+(c?"-":"")+b.toLowerCase()}),wh=Dd(),xh=Dd(!0),Ah=qd(function(a,b,c){return a+(c?"_":"")+b.toLowerCase()}),Bh=qd(function(a,b,c){return a+(c?" ":"")+(b.charAt(0).toUpperCase()+b.slice(1))}),Kh=gg(function(a,b){try{return a.apply(e,b)}catch(a){return vg(a)?a:new d(a)}}),Qh=gg(function(a,b){return function(c){return $d(c,a,b)}}),Rh=gg(function(a,b){return function(c){return $d(a,c,b)}}),_h=Jd("ceil"),ai=Jd("floor"),bi=ud(mg,Ab),ci=ud(Jg,Bb),di=Jd("round");return Ib.prototype=Jb.prototype,Kb.prototype=rc(Jb.prototype),Kb.prototype.constructor=Kb,Mb.prototype=rc(Jb.prototype),Mb.prototype.constructor=Mb,Qb.prototype.delete=Rb,Qb.prototype.get=Sb,Qb.prototype.has=Tb,Qb.prototype.set=Ub,Vb.prototype.push=Xb,_f.Cache=Qb,Ib.after=Of,Ib.ary=Pf,Ib.assign=Og,Ib.at=mf,Ib.before=Qf,Ib.bind=Rf,Ib.bindAll=Sf,Ib.bindKey=Tf,Ib.callback=Lh,Ib.chain=bf,Ib.chunk=re,Ib.compact=se,Ib.constant=Mh,Ib.countBy=nf,Ib.create=Pg,Ib.curry=Uf,Ib.curryRight=Vf,Ib.debounce=Wf,Ib.defaults=Qg,Ib.defaultsDeep=Rg,Ib.defer=Xf,Ib.delay=Yf,Ib.difference=te,Ib.drop=ue,Ib.dropRight=ve,Ib.dropRightWhile=we,Ib.dropWhile=xe,Ib.fill=ye,Ib.filter=pf,Ib.flatten=Ce,Ib.flattenDeep=De,Ib.flow=Zf,Ib.flowRight=$f,Ib.forEach=tf,Ib.forEachRight=uf,Ib.forIn=Ug,Ib.forInRight=Vg,Ib.forOwn=Wg,Ib.forOwnRight=Xg,Ib.functions=Yg,Ib.groupBy=vf,Ib.indexBy=xf,Ib.initial=Fe,Ib.intersection=Ge,Ib.invert=_g,Ib.invoke=yf,Ib.keys=ah,Ib.keysIn=bh,Ib.map=zf,Ib.mapKeys=ch,Ib.mapValues=dh,Ib.matches=Oh,Ib.matchesProperty=Ph,Ib.memoize=_f,Ib.merge=Ng,Ib.method=Qh,Ib.methodOf=Rh,Ib.mixin=Sh,Ib.modArgs=ag,Ib.negate=bg,Ib.omit=eh,Ib.once=cg,Ib.pairs=fh,Ib.partial=dg,Ib.partialRight=eg,Ib.partition=Af,Ib.pick=gh,Ib.pluck=Bf,Ib.property=Vh,Ib.propertyOf=Wh,Ib.pull=Je,Ib.pullAt=Ke,Ib.range=Xh,Ib.rearg=fg,Ib.reject=Ef,Ib.remove=Le,Ib.rest=Me,Ib.restParam=gg,Ib.set=ih,Ib.shuffle=Gf,Ib.slice=Ne,Ib.sortBy=Jf,Ib.sortByAll=Kf,Ib.sortByOrder=Lf,Ib.spread=hg,Ib.take=Qe,Ib.takeRight=Re,Ib.takeRightWhile=Se,Ib.takeWhile=Te,Ib.tap=cf,Ib.throttle=ig,Ib.thru=df,Ib.times=Yh,Ib.toArray=Lg,Ib.toPlainObject=Mg,Ib.transform=jh,Ib.union=Ue,Ib.uniq=Ve,Ib.unzip=We,Ib.unzipWith=Xe,Ib.values=kh,Ib.valuesIn=lh,Ib.where=Mf,Ib.without=Ye,Ib.wrap=jg,Ib.xor=Ze,Ib.zip=$e,Ib.zipObject=_e,Ib.zipWith=af,Ib.backflow=$f,Ib.collect=zf,Ib.compose=$f,Ib.each=tf,Ib.eachRight=uf,Ib.extend=Og,Ib.iteratee=Lh,Ib.methods=Yg,Ib.object=_e,Ib.select=pf,Ib.tail=Me,Ib.unique=Ve,Sh(Ib,Ib),Ib.add=$h,Ib.attempt=Kh,Ib.camelCase=oh,Ib.capitalize=ph,Ib.ceil=_h,Ib.clone=kg,Ib.cloneDeep=lg,
Ib.deburr=qh,Ib.endsWith=rh,Ib.escape=sh,Ib.escapeRegExp=th,Ib.every=of,Ib.find=qf,Ib.findIndex=ze,Ib.findKey=Sg,Ib.findLast=rf,Ib.findLastIndex=Ae,Ib.findLastKey=Tg,Ib.findWhere=sf,Ib.first=Be,Ib.floor=ai,Ib.get=Zg,Ib.gt=mg,Ib.gte=ng,Ib.has=$g,Ib.identity=Nh,Ib.includes=wf,Ib.indexOf=Ee,Ib.inRange=mh,Ib.isArguments=og,Ib.isArray=pg,Ib.isBoolean=qg,Ib.isDate=rg,Ib.isElement=sg,Ib.isEmpty=tg,Ib.isEqual=ug,Ib.isError=vg,Ib.isFinite=wg,Ib.isFunction=xg,Ib.isMatch=zg,Ib.isNaN=Ag,Ib.isNative=Bg,Ib.isNull=Cg,Ib.isNumber=Dg,Ib.isObject=yg,Ib.isPlainObject=Eg,Ib.isRegExp=Fg,Ib.isString=Gg,Ib.isTypedArray=Hg,Ib.isUndefined=Ig,Ib.kebabCase=uh,Ib.last=He,Ib.lastIndexOf=Ie,Ib.lt=Jg,Ib.lte=Kg,Ib.max=bi,Ib.min=ci,Ib.noConflict=Th,Ib.noop=Uh,Ib.now=Nf,Ib.pad=vh,Ib.padLeft=wh,Ib.padRight=xh,Ib.parseInt=yh,Ib.random=nh,Ib.reduce=Cf,Ib.reduceRight=Df,Ib.repeat=zh,Ib.result=hh,Ib.round=di,Ib.runInContext=db,Ib.size=Hf,Ib.snakeCase=Ah,Ib.some=If,Ib.sortedIndex=Oe,Ib.sortedLastIndex=Pe,Ib.startCase=Bh,Ib.startsWith=Ch,Ib.sum=ei,Ib.template=Dh,Ib.trim=Eh,Ib.trimLeft=Fh,Ib.trimRight=Gh,Ib.trunc=Hh,Ib.unescape=Ih,Ib.uniqueId=Zh,Ib.words=Jh,Ib.all=of,Ib.any=If,Ib.contains=wf,Ib.eq=ug,Ib.detect=qf,Ib.foldl=Cf,Ib.foldr=Df,Ib.head=Be,Ib.include=wf,Ib.inject=Cf,Sh(Ib,function(){var a={};return Fc(Ib,function(b,c){Ib.prototype[c]||(a[c]=b)}),a}(),!1),Ib.sample=Ff,Ib.prototype.sample=function(a){return this.__chain__||null!=a?this.thru(function(b){return Ff(b,a)}):Ff(this.value())},Ib.VERSION=f,$b(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){Ib[a].placeholder=Ib}),$b(["drop","take"],function(a,b){Mb.prototype[a]=function(c){var d=this.__filtered__;if(d&&!b)return new Mb(this);c=null==c?1:vb(rb(c)||0,0);var e=this.clone();return d?e.__takeCount__=wb(e.__takeCount__,c):e.__views__.push({size:c,type:a+(e.__dir__<0?"Right":"")}),e},Mb.prototype[a+"Right"]=function(b){return this.reverse()[a](b).reverse()}}),$b(["filter","map","takeWhile"],function(a,b){var c=b+1,d=c!=v;Mb.prototype[a]=function(a,b){var e=this.clone();return e.__iteratees__.push({iteratee:Pd(a,b,1),type:c}),e.__filtered__=e.__filtered__||d,e}}),$b(["first","last"],function(a,b){var c="take"+(b?"Right":"");Mb.prototype[a]=function(){return this[c](1).value()[0]}}),$b(["initial","rest"],function(a,b){var c="drop"+(b?"":"Right");Mb.prototype[a]=function(){return this.__filtered__?new Mb(this):this[c](1)}}),$b(["pluck","where"],function(a,b){var c=b?"filter":"map",d=b?Nc:Vh;Mb.prototype[a]=function(a){return this[c](d(a))}}),Mb.prototype.compact=function(){return this.filter(Nh)},Mb.prototype.reject=function(a,b){return a=Pd(a,b,1),this.filter(function(b){return!a(b)})},Mb.prototype.slice=function(a,b){a=null==a?0:+a||0;var c=this;return c.__filtered__&&(a>0||b<0)?new Mb(c):(a<0?c=c.takeRight(-a):a&&(c=c.drop(a)),b!==e&&(b=+b||0,c=b<0?c.dropRight(-b):c.take(b-a)),c)},Mb.prototype.takeRightWhile=function(a,b){return this.reverse().takeWhile(a,b).reverse()},Mb.prototype.toArray=function(){return this.take(Bb)},Fc(Mb.prototype,function(a,b){var c=/^(?:filter|map|reject)|While$/.test(b),d=/^(?:first|last)$/.test(b),f=Ib[d?"take"+("last"==b?"Right":""):b];f&&(Ib.prototype[b]=function(){var b=d?[1]:arguments,g=this.__chain__,h=this.__wrapped__,i=!!this.__actions__.length,j=h instanceof Mb,k=b[0],l=j||pg(h);l&&c&&"function"==typeof k&&1!=k.length&&(j=l=!1);var m=function(a){return d&&g?f(a,1)[0]:f.apply(e,ec([a],b))},n={func:df,args:[m],thisArg:e},o=j&&!i;if(d&&!g)return o?(h=h.clone(),h.__actions__.push(n),a.call(h)):f.call(e,this.value())[0];if(!d&&l){h=o?h:new Mb(this);var p=a.apply(h,b);return p.__actions__.push(n),new Kb(p,g)}return this.thru(m)})}),$b(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(a){var b=(/^(?:replace|split)$/.test(a)?Da:Ba)[a],c=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",d=/^(?:join|pop|replace|shift)$/.test(a);Ib.prototype[a]=function(){var a=arguments;return d&&!this.__chain__?b.apply(this.value(),a):this[c](function(c){return b.apply(c,a)})}}),Fc(Mb.prototype,function(a,b){var c=Ib[b];if(c){var d=c.name,e=Hb[d]||(Hb[d]=[]);e.push({name:b,func:c})}}),Hb[Gd(e,h).name]=[{name:"wrapper",func:e}],Mb.prototype.clone=Nb,Mb.prototype.reverse=Ob,Mb.prototype.value=Pb,Ib.prototype.chain=ef,Ib.prototype.commit=ff,Ib.prototype.concat=gf,Ib.prototype.plant=hf,Ib.prototype.reverse=jf,Ib.prototype.toString=kf,Ib.prototype.run=Ib.prototype.toJSON=Ib.prototype.valueOf=Ib.prototype.value=lf,Ib.prototype.collect=Ib.prototype.map,Ib.prototype.head=Ib.prototype.first,Ib.prototype.select=Ib.prototype.filter,Ib.prototype.tail=Ib.prototype.rest,Ib}var e,f="3.10.0",g=1,h=2,i=4,j=8,k=16,l=32,m=64,n=128,o=256,p=30,q="...",r=150,s=16,t=200,u=1,v=2,w="Expected a function",x="__lodash_placeholder__",y="[object Arguments]",z="[object Array]",A="[object Boolean]",B="[object Date]",C="[object Error]",D="[object Function]",E="[object Map]",F="[object Number]",G="[object Object]",H="[object RegExp]",I="[object Set]",J="[object String]",K="[object WeakMap]",L="[object ArrayBuffer]",M="[object Float32Array]",N="[object Float64Array]",O="[object Int8Array]",P="[object Int16Array]",Q="[object Int32Array]",R="[object Uint8Array]",S="[object Uint8ClampedArray]",T="[object Uint16Array]",U="[object Uint32Array]",V=/\b__p \+= '';/g,W=/\b(__p \+=) '' \+/g,X=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Y=/&(?:amp|lt|gt|quot|#39|#96);/g,Z=/[&<>"'`]/g,$=RegExp(Y.source),_=RegExp(Z.source),aa=/<%-([\s\S]+?)%>/g,ba=/<%([\s\S]+?)%>/g,ca=/<%=([\s\S]+?)%>/g,da=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,ea=/^\w*$/,fa=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,ga=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,ha=RegExp(ga.source),ia=/[\u0300-\u036f\ufe20-\ufe23]/g,ja=/\\(\\)?/g,ka=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,la=/\w*$/,ma=/^0[xX]/,na=/^\[object .+?Constructor\]$/,oa=/^\d+$/,pa=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,qa=/($^)/,ra=/['\n\r\u2028\u2029\\]/g,sa=function(){var a="[A-Z\\xc0-\\xd6\\xd8-\\xde]",b="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(a+"+(?="+a+b+")|"+a+"?"+b+"|"+a+"+|[0-9]+","g")}(),ta=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],ua=-1,va={};va[M]=va[N]=va[O]=va[P]=va[Q]=va[R]=va[S]=va[T]=va[U]=!0,va[y]=va[z]=va[L]=va[A]=va[B]=va[C]=va[D]=va[E]=va[F]=va[G]=va[H]=va[I]=va[J]=va[K]=!1;var wa={};wa[y]=wa[z]=wa[L]=wa[A]=wa[B]=wa[M]=wa[N]=wa[O]=wa[P]=wa[Q]=wa[F]=wa[G]=wa[H]=wa[J]=wa[R]=wa[S]=wa[T]=wa[U]=!0,wa[C]=wa[D]=wa[E]=wa[I]=wa[K]=!1;var xa={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},ya={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},za={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Aa={function:!0,object:!0},Ba={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},Ca={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Da=Aa[typeof d]&&d&&!d.nodeType&&d,Ea=Aa[typeof c]&&c&&!c.nodeType&&c,Fa=Da&&Ea&&"object"==typeof b&&b&&b.Object&&b,Ga=Aa[typeof self]&&self&&self.Object&&self,Ha=Aa[typeof window]&&window&&window.Object&&window,Ia=Ea&&Ea.exports===Da&&Da,Ja=Fa||Ha!==(this&&this.window)&&Ha||Ga||this,eb=db();"function"==typeof a&&"object"==typeof a.amd&&a.amd?(Ja._=eb,a(function(){return eb})):Da&&Ea?Ia?(Ea.exports=eb)._=eb:Da._=eb:Ja._=eb}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)}),function(){"use strict";var a=function(a,b){function e(a){var b=this.options={};for(var c in d)b[c]=d[c];for(var c in a)b[c]=a[c]}if(a&&b){var c=function(a){return"function"==typeof a},d={nodeSep:void 0,edgeSep:void 0,rankSep:void 0,rankDir:void 0,minLen:function(a){return 1},edgeWeight:function(a){return 1},fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,boundingBox:void 0,ready:function(){},stop:function(){}};e.prototype.run=function(){var a=this.options,d=this,e=a.cy,f=a.eles,g=function(a,b){return c(b)?b.apply(a,[a]):b},h=a.boundingBox||{x1:0,y1:0,w:e.width(),h:e.height()};void 0===h.x2&&(h.x2=h.x1+h.w),void 0===h.w&&(h.w=h.x2-h.x1),void 0===h.y2&&(h.y2=h.y1+h.h),void 0===h.h&&(h.h=h.y2-h.y1);var i=new b.graphlib.Graph({multigraph:!0,compound:!0}),j={},k=function(a,b){null!=b&&(j[a]=b)};k("nodesep",a.nodeSep),k("edgesep",a.edgeSep),k("ranksep",a.rankSep),k("rankdir",a.rankDir),i.setGraph(j),i.setDefaultEdgeLabel(function(){return{}}),i.setDefaultNodeLabel(function(){return{}});for(var l=f.nodes(),m=0;m<l.length;m++){var n=l[m],o=n.boundingBox();i.setNode(n.id(),{width:o.w,height:o.h,name:n.id()})}for(var m=0;m<l.length;m++){var n=l[m];n.isChild()&&i.setParent(n.id(),n.parent().id())}for(var p=f.edges().stdFilter(function(a){return!a.source().isParent()&&!a.target().isParent()}),m=0;m<p.length;m++){var q=p[m];i.setEdge(q.source().id(),q.target().id(),{minlen:g(q,a.minLen),weight:g(q,a.edgeWeight),name:q.id()},q.id())}b.layout(i);for(var r=i.nodes(),m=0;m<r.length;m++){var s=r[m],t=i.node(s);e.getElementById(s).scratch().dagre=t}var u;a.boundingBox?(u={x1:1/0,x2:-(1/0),y1:1/0,y2:-(1/0)},l.forEach(function(a){var b=a.scratch().dagre;u.x1=Math.min(u.x1,b.x),u.x2=Math.max(u.x2,b.x),u.y1=Math.min(u.y1,b.y),u.y2=Math.max(u.y2,b.y)}),u.w=u.x2-u.x1,u.h=u.y2-u.y1):u=h;var v=function(b){if(a.boundingBox){var c=0===u.w?0:(b.x-u.x1)/u.w,d=0===u.h?0:(b.y-u.y1)/u.h;return{x:h.x1+c*h.w,y:h.y1+d*h.h}}return b};return l.layoutPositions(d,a,function(){var a=this.scratch().dagre;return v({x:a.x,y:a.y})}),this},a("layout","dagre",e)}};"undefined"!=typeof module&&module.exports&&(module.exports=a),"undefined"!=typeof define&&define.amd&&define("cytoscape-dagre",function(){return a}),"undefined"!=typeof cytoscape&&"undefined"!=typeof dagre&&a(cytoscape,dagre)}();
